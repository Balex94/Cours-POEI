<html><head><title>Cr&eacute;er un moteur d&#39;affichage 2D  en HTML5</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=pYEwJuzr3ZMDX2Y1syVbvyys90xk6yC7BGUgJrNTTF0');ul.lst-kix_tx5h7vmpv05d-5{list-style-type:none}.lst-kix_5rvk9typeixi-7>li:before{content:"\0025cb  "}.lst-kix_fw801o12j8pc-3>li:before{content:"\0025cf  "}ul.lst-kix_io5aoygbg06t-4{list-style-type:none}ul.lst-kix_tx5h7vmpv05d-6{list-style-type:none}.lst-kix_kyspjcvmpscx-8>li:before{content:"\0025a0  "}ul.lst-kix_io5aoygbg06t-3{list-style-type:none}ul.lst-kix_tx5h7vmpv05d-3{list-style-type:none}ul.lst-kix_io5aoygbg06t-6{list-style-type:none}ul.lst-kix_tx5h7vmpv05d-4{list-style-type:none}ul.lst-kix_io5aoygbg06t-5{list-style-type:none}ul.lst-kix_tx5h7vmpv05d-1{list-style-type:none}ul.lst-kix_io5aoygbg06t-8{list-style-type:none}ul.lst-kix_tx5h7vmpv05d-2{list-style-type:none}.lst-kix_m19xsrwwovg7-1>li:before{content:"\0025cb  "}ul.lst-kix_io5aoygbg06t-7{list-style-type:none}ul.lst-kix_tx5h7vmpv05d-0{list-style-type:none}.lst-kix_qx2879sjrnaj-4>li:before{content:"\0025cb  "}.lst-kix_vtze6t2zaf6v-6>li:before{content:"\0025cf  "}.lst-kix_vi4c4bepb9nj-3>li:before{content:"\0025cf  "}.lst-kix_tx5h7vmpv05d-8>li:before{content:"\0025cf  "}.lst-kix_uuheyt7f1guj-5>li:before{content:"\0025a0  "}ul.lst-kix_tx5h7vmpv05d-7{list-style-type:none}ul.lst-kix_tx5h7vmpv05d-8{list-style-type:none}.lst-kix_lf4yh4qagrta-4>li:before{content:"\0025cb  "}.lst-kix_2i8dul3p1urb-3>li:before{content:"\0025cf  "}.lst-kix_tpctte2r7m1s-2>li:before{content:"\0025a0  "}.lst-kix_9l7bob7jy42l-2>li:before{content:"\0025cf  "}.lst-kix_uyezhlf50xkc-4>li:before{content:"\0025cb  "}.lst-kix_735cwea6feyk-2>li:before{content:"\0025a0  "}ul.lst-kix_oe7a2y97vt6f-6{list-style-type:none}.lst-kix_pq2bm5pgk3f8-2>li:before{content:"\0025a0  "}ul.lst-kix_oe7a2y97vt6f-7{list-style-type:none}ul.lst-kix_oe7a2y97vt6f-8{list-style-type:none}.lst-kix_67j48hi636wv-8>li:before{content:"\0025a0  "}.lst-kix_tx5h7vmpv05d-3>li:before{content:"\0025cb  "}.lst-kix_pq2bm5pgk3f8-8>li:before{content:"\0025a0  "}.lst-kix_5sqcbiptdqn7-3>li:before{content:"\0025cf  "}.lst-kix_9lacosnr1i9j-8>li:before{content:"\0025a0  "}.lst-kix_v3euetjabtir-0>li:before{content:"\0025cf  "}ul.lst-kix_oe7a2y97vt6f-0{list-style-type:none}ul.lst-kix_oe7a2y97vt6f-1{list-style-type:none}ul.lst-kix_oe7a2y97vt6f-2{list-style-type:none}.lst-kix_9lacosnr1i9j-3>li:before{content:"\0025cf  "}.lst-kix_5rvk9typeixi-4>li:before{content:"\0025cb  "}ul.lst-kix_oe7a2y97vt6f-3{list-style-type:none}ul.lst-kix_oe7a2y97vt6f-4{list-style-type:none}.lst-kix_pq2bm5pgk3f8-6>li:before{content:"\0025cf  "}ul.lst-kix_oe7a2y97vt6f-5{list-style-type:none}.lst-kix_894weqd38n83-0>li:before{content:"\0025cf  "}.lst-kix_u4ps4nrrh7jp-5>li:before{content:"\0025a0  "}.lst-kix_u4ps4nrrh7jp-4>li:before{content:"\0025cb  "}.lst-kix_i7rj1rz28ohe-5>li:before{content:"\0025a0  "}.lst-kix_ux4yyj3830u0-8>li:before{content:"\0025a0  "}.lst-kix_vtze6t2zaf6v-7>li:before{content:"\0025cb  "}.lst-kix_k6m2fush27ta-2>li:before{content:"\0025a0  "}.lst-kix_438f8zvxynha-6>li:before{content:"\0025cf  "}.lst-kix_6ew8evsstjna-2>li:before{content:"\0025a0  "}.lst-kix_pybtkz7ijq57-1>li:before{content:"\0025cb  "}.lst-kix_lf4yh4qagrta-5>li:before{content:"\0025a0  "}.lst-kix_tpctte2r7m1s-4>li:before{content:"\0025cb  "}ul.lst-kix_5jk7gjoib57i-7{list-style-type:none}ul.lst-kix_5jk7gjoib57i-6{list-style-type:none}.lst-kix_5jk7gjoib57i-5>li:before{content:"\0025a0  "}ul.lst-kix_5jk7gjoib57i-8{list-style-type:none}.lst-kix_sdl0hitb0cmu-3>li:before{content:"\0025cf  "}.lst-kix_fzi2fyc6kicg-0>li:before{content:"\0025cf  "}.lst-kix_7ghsuvm9wtud-5>li:before{content:"\0025a0  "}ul.lst-kix_5jk7gjoib57i-1{list-style-type:none}.lst-kix_bgpsvx6ulyvm-0>li:before{content:"\0025cf  "}ul.lst-kix_5jk7gjoib57i-0{list-style-type:none}ul.lst-kix_5jk7gjoib57i-3{list-style-type:none}ul.lst-kix_5jk7gjoib57i-2{list-style-type:none}ul.lst-kix_5jk7gjoib57i-5{list-style-type:none}ul.lst-kix_5jk7gjoib57i-4{list-style-type:none}.lst-kix_pybtkz7ijq57-7>li:before{content:"\0025cb  "}.lst-kix_qx2879sjrnaj-1>li:before{content:"\0025cb  "}.lst-kix_lvbalc9n2puu-0>li:before{content:"\0025cf  "}.lst-kix_c8b3326ntei0-5>li:before{content:"\0025a0  "}.lst-kix_muvo9icko027-5>li:before{content:"\0025a0  "}.lst-kix_ux4yyj3830u0-5>li:before{content:"\0025a0  "}ul.lst-kix_rr72dbc52mfr-7{list-style-type:none}ul.lst-kix_rr72dbc52mfr-8{list-style-type:none}ul.lst-kix_rr72dbc52mfr-5{list-style-type:none}ul.lst-kix_rr72dbc52mfr-6{list-style-type:none}.lst-kix_fzi2fyc6kicg-3>li:before{content:"\0025cf  "}ul.lst-kix_rr72dbc52mfr-3{list-style-type:none}ul.lst-kix_rr72dbc52mfr-4{list-style-type:none}.lst-kix_ueeclh7havvb-2>li:before{content:"\0025a0  "}ul.lst-kix_rr72dbc52mfr-1{list-style-type:none}ul.lst-kix_rr72dbc52mfr-2{list-style-type:none}.lst-kix_lvbalc9n2puu-3>li:before{content:"\0025cf  "}.lst-kix_9l7bob7jy42l-4>li:before{content:"\0025c6  "}ul.lst-kix_rr72dbc52mfr-0{list-style-type:none}.lst-kix_kmxc1gxplzqf-8>li:before{content:"\0025cf  "}.lst-kix_lvbalc9n2puu-4>li:before{content:"\0025cb  "}.lst-kix_26ysmokylgmh-2>li:before{content:"\0025a0  "}.lst-kix_s770phrpuorz-1>li:before{content:"\0025c6  "}.lst-kix_qx2879sjrnaj-5>li:before{content:"\0025a0  "}.lst-kix_pybtkz7ijq57-4>li:before{content:"\0025cb  "}.lst-kix_88zhhulpx2mj-0>li:before{content:"\0025cf  "}.lst-kix_5rvk9typeixi-2>li:before{content:"\0025a0  "}.lst-kix_phimkl267z48-4>li:before{content:"\0025cb  "}.lst-kix_k2fvcf9utpyv-0>li:before{content:"\0025cf  "}.lst-kix_fzi2fyc6kicg-6>li:before{content:"\0025cf  "}.lst-kix_uvcg8m1p6m4l-0>li:before{content:"\0025cf  "}.lst-kix_k5eyv96yzmb1-7>li:before{content:"\0025cb  "}.lst-kix_uqj9jpbvf02w-5>li:before{content:"\0025cf  "}.lst-kix_67j48hi636wv-7>li:before{content:"\0025cb  "}.lst-kix_438f8zvxynha-5>li:before{content:"\0025a0  "}.lst-kix_k6m2fush27ta-0>li:before{content:"\0025cf  "}.lst-kix_phimkl267z48-2>li:before{content:"\0025a0  "}.lst-kix_kyspjcvmpscx-1>li:before{content:"\0025cb  "}.lst-kix_tx5h7vmpv05d-6>li:before{content:"\0025cb  "}.lst-kix_6ew8evsstjna-7>li:before{content:"\0025cb  "}.lst-kix_5rvk9typeixi-1>li:before{content:"\0025cb  "}.lst-kix_lf4yh4qagrta-3>li:before{content:"\0025cf  "}.lst-kix_fw801o12j8pc-2>li:before{content:"\0025a0  "}ul.lst-kix_4sg14qrznwha-1{list-style-type:none}ul.lst-kix_4sg14qrznwha-2{list-style-type:none}ul.lst-kix_4sg14qrznwha-3{list-style-type:none}ul.lst-kix_4sg14qrznwha-4{list-style-type:none}.lst-kix_ftdnfp64sn83-7>li:before{content:"\0025cb  "}ul.lst-kix_4sg14qrznwha-5{list-style-type:none}ul.lst-kix_4sg14qrznwha-6{list-style-type:none}ul.lst-kix_orylvtq80p7f-7{list-style-type:none}ul.lst-kix_4sg14qrznwha-7{list-style-type:none}ul.lst-kix_orylvtq80p7f-8{list-style-type:none}ul.lst-kix_4sg14qrznwha-8{list-style-type:none}ul.lst-kix_uuheyt7f1guj-2{list-style-type:none}ul.lst-kix_orylvtq80p7f-6{list-style-type:none}ul.lst-kix_uuheyt7f1guj-1{list-style-type:none}.lst-kix_szvnggo6wxn7-7>li:before{content:"\0025cb  "}ul.lst-kix_orylvtq80p7f-5{list-style-type:none}ul.lst-kix_uuheyt7f1guj-0{list-style-type:none}ul.lst-kix_orylvtq80p7f-4{list-style-type:none}ul.lst-kix_orylvtq80p7f-3{list-style-type:none}.lst-kix_517nsqdw77bj-2>li:before{content:"\0025a0  "}ul.lst-kix_uuheyt7f1guj-6{list-style-type:none}ul.lst-kix_orylvtq80p7f-2{list-style-type:none}.lst-kix_fw801o12j8pc-8>li:before{content:"\0025a0  "}ul.lst-kix_uuheyt7f1guj-5{list-style-type:none}ul.lst-kix_orylvtq80p7f-1{list-style-type:none}ul.lst-kix_uuheyt7f1guj-4{list-style-type:none}ul.lst-kix_orylvtq80p7f-0{list-style-type:none}ul.lst-kix_4sg14qrznwha-0{list-style-type:none}ul.lst-kix_uuheyt7f1guj-3{list-style-type:none}ul.lst-kix_uuheyt7f1guj-8{list-style-type:none}ul.lst-kix_uuheyt7f1guj-7{list-style-type:none}.lst-kix_uvcg8m1p6m4l-1>li:before{content:"\0025cb  "}.lst-kix_5sqcbiptdqn7-2>li:before{content:"\0025a0  "}.lst-kix_i7rj1rz28ohe-0>li:before{content:"\0025cf  "}.lst-kix_myv3yc282a94-2>li:before{content:"\0025a0  "}.lst-kix_7ghsuvm9wtud-4>li:before{content:"\0025cb  "}.lst-kix_9l7bob7jy42l-3>li:before{content:"\0025cb  "}.lst-kix_26ysmokylgmh-1>li:before{content:"\0025cb  "}.lst-kix_gxavlumdtb4m-5>li:before{content:"\0025cf  "}.lst-kix_oe7a2y97vt6f-7>li:before{content:"\0025cb  "}.lst-kix_gpvw6on59bj7-3>li:before{content:"\0025cf  "}.lst-kix_lmcct8x25krx-8>li:before{content:"\0025a0  "}.lst-kix_438f8zvxynha-2>li:before{content:"\0025a0  "}.lst-kix_88zhhulpx2mj-8>li:before{content:"\0025a0  "}.lst-kix_5jk7gjoib57i-1>li:before{content:"\0025cb  "}.lst-kix_5rvk9typeixi-8>li:before{content:"\0025a0  "}.lst-kix_4388m8uzp8ef-1>li:before{content:"\0025cb  "}.lst-kix_qdqfzihooe6h-1>li:before{content:"\0025cb  "}.lst-kix_cbdffzxl4qg-3>li:before{content:"\0025cf  "}.lst-kix_vi4c4bepb9nj-1>li:before{content:"\0025cb  "}.lst-kix_tx5h7vmpv05d-5>li:before{content:"\0025cf  "}ul.lst-kix_tiyqr2z460zf-8{list-style-type:none}ul.lst-kix_tiyqr2z460zf-4{list-style-type:none}ul.lst-kix_tiyqr2z460zf-5{list-style-type:none}.lst-kix_ux4yyj3830u0-6>li:before{content:"\0025cf  "}ul.lst-kix_tiyqr2z460zf-6{list-style-type:none}ul.lst-kix_tiyqr2z460zf-7{list-style-type:none}ul.lst-kix_tiyqr2z460zf-1{list-style-type:none}ul.lst-kix_tiyqr2z460zf-0{list-style-type:none}ul.lst-kix_tiyqr2z460zf-3{list-style-type:none}.lst-kix_4sg14qrznwha-8>li:before{content:"\0025a0  "}ul.lst-kix_tiyqr2z460zf-2{list-style-type:none}.lst-kix_kyspjcvmpscx-4>li:before{content:"\0025cb  "}.lst-kix_tpctte2r7m1s-3>li:before{content:"\0025cf  "}.lst-kix_uqj9jpbvf02w-6>li:before{content:"\0025cb  "}.lst-kix_qdqfzihooe6h-2>li:before{content:"\0025a0  "}.lst-kix_15jbqmax1zlg-5>li:before{content:"\0025a0  "}.lst-kix_15jbqmax1zlg-6>li:before{content:"\0025cf  "}.lst-kix_lmcct8x25krx-5>li:before{content:"\0025a0  "}.lst-kix_88zhhulpx2mj-2>li:before{content:"\0025a0  "}.lst-kix_ftdnfp64sn83-5>li:before{content:"\0025a0  "}.lst-kix_735cwea6feyk-4>li:before{content:"\0025cb  "}ul.lst-kix_fzi2fyc6kicg-1{list-style-type:none}.lst-kix_io5aoygbg06t-0>li:before{content:"\0025cf  "}ul.lst-kix_szvnggo6wxn7-0{list-style-type:none}ul.lst-kix_fzi2fyc6kicg-0{list-style-type:none}ul.lst-kix_mtjq9ikkwgkg-8{list-style-type:none}ul.lst-kix_fzi2fyc6kicg-3{list-style-type:none}ul.lst-kix_mtjq9ikkwgkg-7{list-style-type:none}ul.lst-kix_fzi2fyc6kicg-2{list-style-type:none}ul.lst-kix_fzi2fyc6kicg-5{list-style-type:none}ul.lst-kix_fzi2fyc6kicg-4{list-style-type:none}ul.lst-kix_fzi2fyc6kicg-7{list-style-type:none}.lst-kix_uvcg8m1p6m4l-3>li:before{content:"\0025cf  "}ul.lst-kix_fzi2fyc6kicg-6{list-style-type:none}ul.lst-kix_fzi2fyc6kicg-8{list-style-type:none}.lst-kix_plqzfux17aui-2>li:before{content:"\0025a0  "}.lst-kix_iiw8cia8yc4j-7>li:before{content:"\0025cb  "}.lst-kix_phimkl267z48-0>li:before{content:"\0025cf  "}.lst-kix_cy93osahw99c-0>li:before{content:"\0025cf  "}.lst-kix_5sqcbiptdqn7-0>li:before{content:"\0025cf  "}ul.lst-kix_szvnggo6wxn7-4{list-style-type:none}.lst-kix_ojkq7i32xqsc-7>li:before{content:"\0025cb  "}ul.lst-kix_mtjq9ikkwgkg-5{list-style-type:none}ul.lst-kix_szvnggo6wxn7-3{list-style-type:none}ul.lst-kix_mtjq9ikkwgkg-6{list-style-type:none}.lst-kix_67j48hi636wv-5>li:before{content:"\0025a0  "}ul.lst-kix_szvnggo6wxn7-2{list-style-type:none}ul.lst-kix_mtjq9ikkwgkg-3{list-style-type:none}ul.lst-kix_szvnggo6wxn7-1{list-style-type:none}ul.lst-kix_mtjq9ikkwgkg-4{list-style-type:none}ul.lst-kix_szvnggo6wxn7-8{list-style-type:none}ul.lst-kix_mtjq9ikkwgkg-1{list-style-type:none}ul.lst-kix_szvnggo6wxn7-7{list-style-type:none}ul.lst-kix_mtjq9ikkwgkg-2{list-style-type:none}.lst-kix_kyspjcvmpscx-7>li:before{content:"\0025cb  "}.lst-kix_5sqcbiptdqn7-7>li:before{content:"\0025cb  "}ul.lst-kix_szvnggo6wxn7-6{list-style-type:none}.lst-kix_cy93osahw99c-6>li:before{content:"\0025cf  "}ul.lst-kix_szvnggo6wxn7-5{list-style-type:none}ul.lst-kix_mtjq9ikkwgkg-0{list-style-type:none}.lst-kix_rr72dbc52mfr-0>li:before{content:"\0025cf  "}.lst-kix_c8b3326ntei0-4>li:before{content:"\0025cb  "}.lst-kix_plqzfux17aui-6>li:before{content:"\0025cf  "}.lst-kix_67j48hi636wv-1>li:before{content:"\0025cb  "}.lst-kix_isz5lhca51pb-6>li:before{content:"\0025cf  "}.lst-kix_2i8dul3p1urb-4>li:before{content:"\0025cb  "}.lst-kix_2i8dul3p1urb-6>li:before{content:"\0025cf  "}.lst-kix_kmxc1gxplzqf-1>li:before{content:"\0025c6  "}.lst-kix_vi4c4bepb9nj-4>li:before{content:"\0025cb  "}.lst-kix_k2fvcf9utpyv-2>li:before{content:"\0025a0  "}.lst-kix_3c8w77imty2-3>li:before{content:"\0025cf  "}.lst-kix_muvo9icko027-0>li:before{content:"\0025cf  "}.lst-kix_9l7bob7jy42l-7>li:before{content:"\0025c6  "}.lst-kix_894weqd38n83-5>li:before{content:"\0025a0  "}.lst-kix_szvnggo6wxn7-5>li:before{content:"\0025a0  "}.lst-kix_894weqd38n83-1>li:before{content:"\0025cb  "}.lst-kix_4388m8uzp8ef-2>li:before{content:"\0025a0  "}.lst-kix_uvcg8m1p6m4l-7>li:before{content:"\0025cb  "}.lst-kix_tpctte2r7m1s-5>li:before{content:"\0025a0  "}.lst-kix_k6m2fush27ta-5>li:before{content:"\0025a0  "}.lst-kix_pybtkz7ijq57-8>li:before{content:"\0025a0  "}.lst-kix_cbdffzxl4qg-8>li:before{content:"\0025a0  "}.lst-kix_iiw8cia8yc4j-0>li:before{content:"\0025cf  "}.lst-kix_fzi2fyc6kicg-2>li:before{content:"\0025a0  "}.lst-kix_oe7a2y97vt6f-8>li:before{content:"\0025a0  "}.lst-kix_4sg14qrznwha-1>li:before{content:"\0025cb  "}.lst-kix_9lacosnr1i9j-1>li:before{content:"\0025cb  "}ul.lst-kix_ux4yyj3830u0-8{list-style-type:none}ul.lst-kix_ux4yyj3830u0-7{list-style-type:none}.lst-kix_tx5h7vmpv05d-0>li:before{content:"\002794  "}ul.lst-kix_ux4yyj3830u0-6{list-style-type:none}ul.lst-kix_ux4yyj3830u0-5{list-style-type:none}ul.lst-kix_ux4yyj3830u0-4{list-style-type:none}ul.lst-kix_ux4yyj3830u0-3{list-style-type:none}ul.lst-kix_ux4yyj3830u0-2{list-style-type:none}ul.lst-kix_ux4yyj3830u0-1{list-style-type:none}.lst-kix_gxavlumdtb4m-7>li:before{content:"\0025c6  "}ul.lst-kix_ux4yyj3830u0-0{list-style-type:none}.lst-kix_88zhhulpx2mj-6>li:before{content:"\0025cf  "}.lst-kix_5jk7gjoib57i-3>li:before{content:"\0025cf  "}.lst-kix_ux4yyj3830u0-0>li:before{content:"\0025cf  "}.lst-kix_ux4yyj3830u0-3>li:before{content:"\0025cf  "}.lst-kix_qx2879sjrnaj-2>li:before{content:"\0025a0  "}.lst-kix_cy93osahw99c-3>li:before{content:"\0025cf  "}.lst-kix_jovurqn7sb5d-2>li:before{content:"\0025cf  "}.lst-kix_eao6gb4vsoue-5>li:before{content:"\0025a0  "}.lst-kix_k2fvcf9utpyv-6>li:before{content:"\0025cf  "}.lst-kix_uqj9jpbvf02w-7>li:before{content:"\0025c6  "}.lst-kix_mg9e1w3u35k7-6>li:before{content:"\0025cf  "}.lst-kix_4sg14qrznwha-3>li:before{content:"\0025cf  "}ul.lst-kix_mg9e1w3u35k7-2{list-style-type:none}ul.lst-kix_mg9e1w3u35k7-1{list-style-type:none}ul.lst-kix_mg9e1w3u35k7-4{list-style-type:none}ul.lst-kix_mg9e1w3u35k7-3{list-style-type:none}.lst-kix_c8b3326ntei0-0>li:before{content:"\0025cf  "}ul.lst-kix_mg9e1w3u35k7-0{list-style-type:none}.lst-kix_gpvw6on59bj7-5>li:before{content:"\0025a0  "}.lst-kix_438f8zvxynha-8>li:before{content:"\0025a0  "}ul.lst-kix_ojkq7i32xqsc-0{list-style-type:none}ul.lst-kix_gpy5gjdtksic-8{list-style-type:none}ul.lst-kix_ojkq7i32xqsc-1{list-style-type:none}ul.lst-kix_gpy5gjdtksic-7{list-style-type:none}ul.lst-kix_ojkq7i32xqsc-2{list-style-type:none}ul.lst-kix_ojkq7i32xqsc-3{list-style-type:none}.lst-kix_y9p72vfeb2dg-5>li:before{content:"\0025a0  "}ul.lst-kix_ojkq7i32xqsc-4{list-style-type:none}ul.lst-kix_ojkq7i32xqsc-5{list-style-type:none}.lst-kix_894weqd38n83-8>li:before{content:"\0025a0  "}ul.lst-kix_ueeclh7havvb-1{list-style-type:none}ul.lst-kix_kyspjcvmpscx-8{list-style-type:none}ul.lst-kix_ueeclh7havvb-2{list-style-type:none}.lst-kix_pybtkz7ijq57-0>li:before{content:"\0025cf  "}.lst-kix_uyezhlf50xkc-6>li:before{content:"\0025cf  "}ul.lst-kix_ueeclh7havvb-3{list-style-type:none}ul.lst-kix_kyspjcvmpscx-6{list-style-type:none}ul.lst-kix_ueeclh7havvb-4{list-style-type:none}ul.lst-kix_kyspjcvmpscx-7{list-style-type:none}.lst-kix_gpy5gjdtksic-6>li:before{content:"\0025cf  "}ul.lst-kix_ueeclh7havvb-0{list-style-type:none}ul.lst-kix_kyspjcvmpscx-0{list-style-type:none}ul.lst-kix_ojkq7i32xqsc-8{list-style-type:none}ul.lst-kix_kyspjcvmpscx-1{list-style-type:none}ul.lst-kix_gpy5gjdtksic-0{list-style-type:none}.lst-kix_uvcg8m1p6m4l-5>li:before{content:"\0025a0  "}ul.lst-kix_ojkq7i32xqsc-7{list-style-type:none}ul.lst-kix_gpy5gjdtksic-1{list-style-type:none}ul.lst-kix_ojkq7i32xqsc-6{list-style-type:none}ul.lst-kix_gpy5gjdtksic-2{list-style-type:none}.lst-kix_lvbalc9n2puu-6>li:before{content:"\0025cf  "}ul.lst-kix_kyspjcvmpscx-4{list-style-type:none}ul.lst-kix_gpy5gjdtksic-3{list-style-type:none}ul.lst-kix_kyspjcvmpscx-5{list-style-type:none}ul.lst-kix_gpy5gjdtksic-4{list-style-type:none}ul.lst-kix_kyspjcvmpscx-2{list-style-type:none}ul.lst-kix_gpy5gjdtksic-5{list-style-type:none}ul.lst-kix_kyspjcvmpscx-3{list-style-type:none}ul.lst-kix_gpy5gjdtksic-6{list-style-type:none}.lst-kix_88zhhulpx2mj-5>li:before{content:"\0025a0  "}.lst-kix_dygqqhlzftqm-6>li:before{content:"\0025cf  "}.lst-kix_isz5lhca51pb-2>li:before{content:"\0025a0  "}.lst-kix_fw801o12j8pc-1>li:before{content:"\0025cb  "}.lst-kix_szvnggo6wxn7-3>li:before{content:"\0025cf  "}ul.lst-kix_mg9e1w3u35k7-7{list-style-type:none}ul.lst-kix_mg9e1w3u35k7-8{list-style-type:none}ul.lst-kix_mg9e1w3u35k7-5{list-style-type:none}.lst-kix_3c8w77imty2-5>li:before{content:"\0025a0  "}ul.lst-kix_mg9e1w3u35k7-6{list-style-type:none}.lst-kix_jvsv2xnnd1u1-3>li:before{content:"\0025cf  "}.lst-kix_muvo9icko027-6>li:before{content:"\0025cf  "}.lst-kix_15jbqmax1zlg-0>li:before{content:"\0025cf  "}.lst-kix_qdqfzihooe6h-4>li:before{content:"\0025cb  "}.lst-kix_mtjq9ikkwgkg-3>li:before{content:"\0025cf  "}.lst-kix_lmcct8x25krx-6>li:before{content:"\0025cf  "}.lst-kix_4sg14qrznwha-6>li:before{content:"\0025cf  "}ul.lst-kix_isz5lhca51pb-0{list-style-type:none}ul.lst-kix_isz5lhca51pb-1{list-style-type:none}ul.lst-kix_isz5lhca51pb-2{list-style-type:none}.lst-kix_ak0bl34nqjju-6>li:before{content:"\0025cf  "}ul.lst-kix_isz5lhca51pb-3{list-style-type:none}.lst-kix_26ysmokylgmh-6>li:before{content:"\0025cf  "}.lst-kix_k6kg1hoy3czh-3>li:before{content:"\0025cf  "}.lst-kix_myv3yc282a94-5>li:before{content:"\0025a0  "}.lst-kix_mg9e1w3u35k7-7>li:before{content:"\0025cb  "}ul.lst-kix_15jbqmax1zlg-6{list-style-type:none}ul.lst-kix_15jbqmax1zlg-7{list-style-type:none}.lst-kix_gpy5gjdtksic-1>li:before{content:"\0025cb  "}ul.lst-kix_15jbqmax1zlg-8{list-style-type:none}.lst-kix_gpvw6on59bj7-0>li:before{content:"\0025cf  "}.lst-kix_m19xsrwwovg7-3>li:before{content:"\0025cf  "}ul.lst-kix_ueeclh7havvb-8{list-style-type:none}.lst-kix_n437135nrx86-3>li:before{content:"\0025cf  "}ul.lst-kix_ueeclh7havvb-7{list-style-type:none}ul.lst-kix_isz5lhca51pb-8{list-style-type:none}ul.lst-kix_ueeclh7havvb-6{list-style-type:none}.lst-kix_u4ps4nrrh7jp-2>li:before{content:"\0025a0  "}ul.lst-kix_15jbqmax1zlg-0{list-style-type:none}ul.lst-kix_ueeclh7havvb-5{list-style-type:none}.lst-kix_4388m8uzp8ef-3>li:before{content:"\0025cf  "}ul.lst-kix_15jbqmax1zlg-1{list-style-type:none}ul.lst-kix_15jbqmax1zlg-2{list-style-type:none}ul.lst-kix_isz5lhca51pb-5{list-style-type:none}ul.lst-kix_15jbqmax1zlg-3{list-style-type:none}ul.lst-kix_isz5lhca51pb-4{list-style-type:none}ul.lst-kix_15jbqmax1zlg-4{list-style-type:none}ul.lst-kix_isz5lhca51pb-7{list-style-type:none}ul.lst-kix_15jbqmax1zlg-5{list-style-type:none}ul.lst-kix_isz5lhca51pb-6{list-style-type:none}.lst-kix_y9p72vfeb2dg-2>li:before{content:"\0025a0  "}.lst-kix_67j48hi636wv-0>li:before{content:"\0025cf  "}ul.lst-kix_io5aoygbg06t-0{list-style-type:none}.lst-kix_k2fvcf9utpyv-4>li:before{content:"\0025cb  "}ul.lst-kix_io5aoygbg06t-2{list-style-type:none}ul.lst-kix_io5aoygbg06t-1{list-style-type:none}.lst-kix_4388m8uzp8ef-8>li:before{content:"\0025a0  "}.lst-kix_jovurqn7sb5d-7>li:before{content:"\0025c6  "}.lst-kix_v3euetjabtir-6>li:before{content:"\0025cf  "}.lst-kix_4sg14qrznwha-4>li:before{content:"\0025cb  "}.lst-kix_gpvw6on59bj7-8>li:before{content:"\0025a0  "}.lst-kix_r93hjw9ovjrk-4>li:before{content:"\0025cb  "}.lst-kix_5gbbkyi6eio8-3>li:before{content:"\0025cf  "}.lst-kix_cbdffzxl4qg-2>li:before{content:"\0025a0  "}.lst-kix_k6m2fush27ta-1>li:before{content:"\0025cb  "}.lst-kix_m19xsrwwovg7-8>li:before{content:"\0025a0  "}.lst-kix_c8b3326ntei0-3>li:before{content:"\0025cf  "}ul.lst-kix_qx2879sjrnaj-4{list-style-type:none}ul.lst-kix_qx2879sjrnaj-5{list-style-type:none}ul.lst-kix_qx2879sjrnaj-2{list-style-type:none}.lst-kix_gpy5gjdtksic-4>li:before{content:"\0025cb  "}ul.lst-kix_qx2879sjrnaj-3{list-style-type:none}ul.lst-kix_qx2879sjrnaj-0{list-style-type:none}.lst-kix_pybtkz7ijq57-6>li:before{content:"\0025cf  "}ul.lst-kix_qx2879sjrnaj-1{list-style-type:none}.lst-kix_szvnggo6wxn7-6>li:before{content:"\0025cf  "}.lst-kix_szvnggo6wxn7-0>li:before{content:"\0025cf  "}ul.lst-kix_735cwea6feyk-0{list-style-type:none}ul.lst-kix_735cwea6feyk-1{list-style-type:none}ul.lst-kix_735cwea6feyk-2{list-style-type:none}.lst-kix_5sqcbiptdqn7-5>li:before{content:"\0025a0  "}.lst-kix_uvcg8m1p6m4l-4>li:before{content:"\0025cb  "}ul.lst-kix_pybtkz7ijq57-4{list-style-type:none}.lst-kix_r93hjw9ovjrk-7>li:before{content:"\0025cb  "}ul.lst-kix_pybtkz7ijq57-5{list-style-type:none}.lst-kix_oe7a2y97vt6f-5>li:before{content:"\0025a0  "}ul.lst-kix_pybtkz7ijq57-6{list-style-type:none}ul.lst-kix_jvsv2xnnd1u1-7{list-style-type:none}ul.lst-kix_pybtkz7ijq57-7{list-style-type:none}.lst-kix_517nsqdw77bj-5>li:before{content:"\0025a0  "}ul.lst-kix_jvsv2xnnd1u1-8{list-style-type:none}ul.lst-kix_pybtkz7ijq57-8{list-style-type:none}ul.lst-kix_jvsv2xnnd1u1-5{list-style-type:none}ul.lst-kix_jvsv2xnnd1u1-6{list-style-type:none}.lst-kix_ueeclh7havvb-6>li:before{content:"\0025cf  "}ul.lst-kix_jvsv2xnnd1u1-3{list-style-type:none}ul.lst-kix_jvsv2xnnd1u1-4{list-style-type:none}.lst-kix_dygqqhlzftqm-1>li:before{content:"\0025cb  "}.lst-kix_y9p72vfeb2dg-7>li:before{content:"\0025cb  "}.lst-kix_ak0bl34nqjju-1>li:before{content:"\0025cb  "}ul.lst-kix_pybtkz7ijq57-0{list-style-type:none}ul.lst-kix_qx2879sjrnaj-8{list-style-type:none}ul.lst-kix_pybtkz7ijq57-1{list-style-type:none}.lst-kix_eao6gb4vsoue-2>li:before{content:"\0025a0  "}ul.lst-kix_qx2879sjrnaj-7{list-style-type:none}ul.lst-kix_pybtkz7ijq57-2{list-style-type:none}ul.lst-kix_qx2879sjrnaj-6{list-style-type:none}ul.lst-kix_pybtkz7ijq57-3{list-style-type:none}.lst-kix_fzi2fyc6kicg-4>li:before{content:"\0025cb  "}.lst-kix_2i8dul3p1urb-1>li:before{content:"\0025cb  "}.lst-kix_tiyqr2z460zf-2>li:before{content:"\0025a0  "}ul.lst-kix_5rvk9typeixi-8{list-style-type:none}.lst-kix_bgpsvx6ulyvm-1>li:before{content:"\0025cb  "}.lst-kix_yn0l7ue14v4k-2>li:before{content:"\0025a0  "}.lst-kix_lmcct8x25krx-2>li:before{content:"\0025a0  "}.lst-kix_k5eyv96yzmb1-8>li:before{content:"\0025a0  "}.lst-kix_tiyqr2z460zf-8>li:before{content:"\0025a0  "}ul.lst-kix_ftdnfp64sn83-2{list-style-type:none}ul.lst-kix_ftdnfp64sn83-1{list-style-type:none}ul.lst-kix_735cwea6feyk-8{list-style-type:none}ul.lst-kix_ftdnfp64sn83-0{list-style-type:none}ul.lst-kix_735cwea6feyk-7{list-style-type:none}ul.lst-kix_qdqfzihooe6h-2{list-style-type:none}ul.lst-kix_735cwea6feyk-6{list-style-type:none}.lst-kix_rr72dbc52mfr-4>li:before{content:"\0025cb  "}ul.lst-kix_qdqfzihooe6h-1{list-style-type:none}ul.lst-kix_735cwea6feyk-5{list-style-type:none}.lst-kix_vi4c4bepb9nj-6>li:before{content:"\0025cf  "}ul.lst-kix_qdqfzihooe6h-0{list-style-type:none}ul.lst-kix_735cwea6feyk-4{list-style-type:none}ul.lst-kix_735cwea6feyk-3{list-style-type:none}ul.lst-kix_qdqfzihooe6h-6{list-style-type:none}ul.lst-kix_qdqfzihooe6h-5{list-style-type:none}ul.lst-kix_qdqfzihooe6h-4{list-style-type:none}ul.lst-kix_ftdnfp64sn83-8{list-style-type:none}.lst-kix_y9p72vfeb2dg-4>li:before{content:"\0025cb  "}ul.lst-kix_qdqfzihooe6h-3{list-style-type:none}ul.lst-kix_ftdnfp64sn83-7{list-style-type:none}ul.lst-kix_ftdnfp64sn83-6{list-style-type:none}ul.lst-kix_ftdnfp64sn83-5{list-style-type:none}.lst-kix_vtze6t2zaf6v-0>li:before{content:"\0025cf  "}ul.lst-kix_qdqfzihooe6h-8{list-style-type:none}ul.lst-kix_ftdnfp64sn83-4{list-style-type:none}ul.lst-kix_qdqfzihooe6h-7{list-style-type:none}ul.lst-kix_ftdnfp64sn83-3{list-style-type:none}.lst-kix_9lacosnr1i9j-7>li:before{content:"\0025cb  "}.lst-kix_ux4yyj3830u0-1>li:before{content:"\0025cb  "}.lst-kix_m19xsrwwovg7-5>li:before{content:"\0025a0  "}.lst-kix_15jbqmax1zlg-3>li:before{content:"\0025cf  "}.lst-kix_vtze6t2zaf6v-4>li:before{content:"\0025cb  "}.lst-kix_mg9e1w3u35k7-8>li:before{content:"\0025a0  "}.lst-kix_s770phrpuorz-4>li:before{content:"\0025c6  "}ul.lst-kix_muvo9icko027-0{list-style-type:none}ul.lst-kix_5rvk9typeixi-7{list-style-type:none}ul.lst-kix_muvo9icko027-1{list-style-type:none}ul.lst-kix_5rvk9typeixi-6{list-style-type:none}ul.lst-kix_5rvk9typeixi-5{list-style-type:none}ul.lst-kix_5rvk9typeixi-4{list-style-type:none}ul.lst-kix_5rvk9typeixi-3{list-style-type:none}ul.lst-kix_5rvk9typeixi-2{list-style-type:none}ul.lst-kix_5rvk9typeixi-1{list-style-type:none}.lst-kix_4388m8uzp8ef-5>li:before{content:"\0025a0  "}ul.lst-kix_5rvk9typeixi-0{list-style-type:none}.lst-kix_k5eyv96yzmb1-4>li:before{content:"\0025cb  "}.lst-kix_kmxc1gxplzqf-2>li:before{content:"\0025cf  "}.lst-kix_ueeclh7havvb-5>li:before{content:"\0025a0  "}.lst-kix_phimkl267z48-7>li:before{content:"\0025cb  "}.lst-kix_i7rj1rz28ohe-8>li:before{content:"\0025a0  "}ul.lst-kix_muvo9icko027-7{list-style-type:none}.lst-kix_sdl0hitb0cmu-0>li:before{content:"\0025cf  "}ul.lst-kix_muvo9icko027-6{list-style-type:none}ul.lst-kix_muvo9icko027-8{list-style-type:none}ul.lst-kix_muvo9icko027-3{list-style-type:none}ul.lst-kix_jvsv2xnnd1u1-0{list-style-type:none}ul.lst-kix_muvo9icko027-2{list-style-type:none}ul.lst-kix_muvo9icko027-5{list-style-type:none}ul.lst-kix_jvsv2xnnd1u1-2{list-style-type:none}ul.lst-kix_muvo9icko027-4{list-style-type:none}ul.lst-kix_jvsv2xnnd1u1-1{list-style-type:none}.lst-kix_735cwea6feyk-7>li:before{content:"\0025cb  "}.lst-kix_26ysmokylgmh-0>li:before{content:"\0025cf  "}ul.lst-kix_9lacosnr1i9j-2{list-style-type:none}ul.lst-kix_9lacosnr1i9j-1{list-style-type:none}.lst-kix_15jbqmax1zlg-8>li:before{content:"\0025a0  "}ul.lst-kix_9lacosnr1i9j-0{list-style-type:none}.lst-kix_yn0l7ue14v4k-8>li:before{content:"\0025a0  "}ul.lst-kix_9lacosnr1i9j-6{list-style-type:none}ul.lst-kix_9lacosnr1i9j-5{list-style-type:none}ul.lst-kix_9lacosnr1i9j-4{list-style-type:none}ul.lst-kix_9lacosnr1i9j-3{list-style-type:none}.lst-kix_tpctte2r7m1s-6>li:before{content:"\0025cf  "}ul.lst-kix_9lacosnr1i9j-8{list-style-type:none}ul.lst-kix_9lacosnr1i9j-7{list-style-type:none}.lst-kix_sdl0hitb0cmu-8>li:before{content:"\0025a0  "}.lst-kix_lmcct8x25krx-4>li:before{content:"\0025cb  "}ul.lst-kix_k6kg1hoy3czh-2{list-style-type:none}ul.lst-kix_k6kg1hoy3czh-1{list-style-type:none}ul.lst-kix_k6kg1hoy3czh-0{list-style-type:none}.lst-kix_isz5lhca51pb-8>li:before{content:"\0025a0  "}ul.lst-kix_k6kg1hoy3czh-6{list-style-type:none}ul.lst-kix_k6kg1hoy3czh-5{list-style-type:none}.lst-kix_k6m2fush27ta-7>li:before{content:"\0025cb  "}ul.lst-kix_2i8dul3p1urb-0{list-style-type:none}ul.lst-kix_k6kg1hoy3czh-4{list-style-type:none}ul.lst-kix_2i8dul3p1urb-1{list-style-type:none}ul.lst-kix_k6kg1hoy3czh-3{list-style-type:none}.lst-kix_sdl0hitb0cmu-4>li:before{content:"\0025cb  "}ul.lst-kix_2i8dul3p1urb-2{list-style-type:none}ul.lst-kix_2i8dul3p1urb-3{list-style-type:none}.lst-kix_vi4c4bepb9nj-2>li:before{content:"\0025a0  "}ul.lst-kix_k6kg1hoy3czh-8{list-style-type:none}ul.lst-kix_2i8dul3p1urb-4{list-style-type:none}ul.lst-kix_k6kg1hoy3czh-7{list-style-type:none}ul.lst-kix_2i8dul3p1urb-5{list-style-type:none}ul.lst-kix_2i8dul3p1urb-7{list-style-type:none}ul.lst-kix_gpvw6on59bj7-5{list-style-type:none}ul.lst-kix_2i8dul3p1urb-6{list-style-type:none}.lst-kix_5gbbkyi6eio8-1>li:before{content:"\0025cb  "}.lst-kix_bgpsvx6ulyvm-6>li:before{content:"\0025cf  "}ul.lst-kix_gpvw6on59bj7-6{list-style-type:none}ul.lst-kix_gpvw6on59bj7-7{list-style-type:none}.lst-kix_r93hjw9ovjrk-2>li:before{content:"\0025a0  "}ul.lst-kix_2i8dul3p1urb-8{list-style-type:none}ul.lst-kix_gpvw6on59bj7-8{list-style-type:none}ul.lst-kix_gpvw6on59bj7-1{list-style-type:none}.lst-kix_fw801o12j8pc-5>li:before{content:"\0025a0  "}ul.lst-kix_gpvw6on59bj7-2{list-style-type:none}.lst-kix_yn0l7ue14v4k-7>li:before{content:"\0025cb  "}.lst-kix_y9p72vfeb2dg-8>li:before{content:"\0025a0  "}ul.lst-kix_gpvw6on59bj7-3{list-style-type:none}ul.lst-kix_gpvw6on59bj7-4{list-style-type:none}.lst-kix_lf4yh4qagrta-6>li:before{content:"\0025cf  "}.lst-kix_szvnggo6wxn7-8>li:before{content:"\0025a0  "}.lst-kix_n437135nrx86-8>li:before{content:"\0025a0  "}.lst-kix_uuheyt7f1guj-1>li:before{content:"\0025cb  "}.lst-kix_ojkq7i32xqsc-5>li:before{content:"\0025a0  "}.lst-kix_5gbbkyi6eio8-0>li:before{content:"\0025cf  "}ul.lst-kix_fw801o12j8pc-4{list-style-type:none}ul.lst-kix_gpvw6on59bj7-0{list-style-type:none}.lst-kix_r93hjw9ovjrk-8>li:before{content:"\0025a0  "}ul.lst-kix_fw801o12j8pc-5{list-style-type:none}ul.lst-kix_fw801o12j8pc-6{list-style-type:none}ul.lst-kix_fw801o12j8pc-7{list-style-type:none}ul.lst-kix_fw801o12j8pc-0{list-style-type:none}ul.lst-kix_fw801o12j8pc-1{list-style-type:none}ul.lst-kix_fw801o12j8pc-2{list-style-type:none}ul.lst-kix_fw801o12j8pc-3{list-style-type:none}ul.lst-kix_s770phrpuorz-8{list-style-type:none}.lst-kix_vi4c4bepb9nj-0>li:before{content:"\0025cf  "}ul.lst-kix_s770phrpuorz-6{list-style-type:none}ul.lst-kix_lvbalc9n2puu-7{list-style-type:none}ul.lst-kix_s770phrpuorz-7{list-style-type:none}ul.lst-kix_lvbalc9n2puu-6{list-style-type:none}ul.lst-kix_fw801o12j8pc-8{list-style-type:none}ul.lst-kix_s770phrpuorz-4{list-style-type:none}ul.lst-kix_s770phrpuorz-5{list-style-type:none}ul.lst-kix_lvbalc9n2puu-8{list-style-type:none}ul.lst-kix_s770phrpuorz-2{list-style-type:none}ul.lst-kix_lvbalc9n2puu-3{list-style-type:none}ul.lst-kix_s770phrpuorz-3{list-style-type:none}ul.lst-kix_lvbalc9n2puu-2{list-style-type:none}ul.lst-kix_s770phrpuorz-0{list-style-type:none}ul.lst-kix_lvbalc9n2puu-5{list-style-type:none}ul.lst-kix_s770phrpuorz-1{list-style-type:none}ul.lst-kix_lvbalc9n2puu-4{list-style-type:none}ul.lst-kix_lvbalc9n2puu-1{list-style-type:none}ul.lst-kix_lvbalc9n2puu-0{list-style-type:none}.lst-kix_iiw8cia8yc4j-4>li:before{content:"\0025cb  "}.lst-kix_kyspjcvmpscx-3>li:before{content:"\0025cf  "}.lst-kix_plqzfux17aui-1>li:before{content:"\0025cb  "}.lst-kix_vi4c4bepb9nj-8>li:before{content:"\0025a0  "}.lst-kix_tx5h7vmpv05d-2>li:before{content:"\0025cf  "}.lst-kix_735cwea6feyk-6>li:before{content:"\0025cf  "}.lst-kix_3c8w77imty2-1>li:before{content:"\0025cb  "}.lst-kix_gpy5gjdtksic-0>li:before{content:"\0025cf  "}.lst-kix_tpctte2r7m1s-1>li:before{content:"\0025cb  "}.lst-kix_fzi2fyc6kicg-8>li:before{content:"\0025a0  "}.lst-kix_894weqd38n83-6>li:before{content:"\0025cf  "}.lst-kix_gpvw6on59bj7-6>li:before{content:"\0025cf  "}.lst-kix_plqzfux17aui-3>li:before{content:"\0025cf  "}.lst-kix_tx5h7vmpv05d-7>li:before{content:"\0025c6  "}.lst-kix_oe7a2y97vt6f-0>li:before{content:"\0025cf  "}.lst-kix_4388m8uzp8ef-0>li:before{content:"\0025cf  "}.lst-kix_lf4yh4qagrta-2>li:before{content:"\0025a0  "}.lst-kix_rr72dbc52mfr-5>li:before{content:"\0025a0  "}.lst-kix_pybtkz7ijq57-2>li:before{content:"\0025a0  "}.lst-kix_k6kg1hoy3czh-7>li:before{content:"\0025cb  "}.lst-kix_iiw8cia8yc4j-8>li:before{content:"\0025a0  "}.lst-kix_q6dd9vwzm62v-0>li:before{content:"\0025cf  "}.lst-kix_r93hjw9ovjrk-1>li:before{content:"\0025cb  "}.lst-kix_qdqfzihooe6h-3>li:before{content:"\0025cf  "}.lst-kix_bgpsvx6ulyvm-7>li:before{content:"\0025cb  "}.lst-kix_pq2bm5pgk3f8-1>li:before{content:"\0025cb  "}.lst-kix_plqzfux17aui-8>li:before{content:"\0025a0  "}.lst-kix_bgpsvx6ulyvm-5>li:before{content:"\0025a0  "}.lst-kix_sdl0hitb0cmu-7>li:before{content:"\0025cb  "}ul.lst-kix_myv3yc282a94-5{list-style-type:none}ul.lst-kix_myv3yc282a94-4{list-style-type:none}ul.lst-kix_myv3yc282a94-3{list-style-type:none}ul.lst-kix_myv3yc282a94-2{list-style-type:none}ul.lst-kix_myv3yc282a94-1{list-style-type:none}ul.lst-kix_myv3yc282a94-0{list-style-type:none}.lst-kix_v3euetjabtir-8>li:before{content:"\0025a0  "}ul.lst-kix_myv3yc282a94-8{list-style-type:none}.lst-kix_mg9e1w3u35k7-1>li:before{content:"\0025cb  "}ul.lst-kix_myv3yc282a94-7{list-style-type:none}ul.lst-kix_myv3yc282a94-6{list-style-type:none}.lst-kix_orylvtq80p7f-2>li:before{content:"\0025a0  "}.lst-kix_mtjq9ikkwgkg-2>li:before{content:"\0025a0  "}.lst-kix_lvbalc9n2puu-1>li:before{content:"\0025cb  "}.lst-kix_eao6gb4vsoue-8>li:before{content:"\0025a0  "}.lst-kix_k6kg1hoy3czh-6>li:before{content:"\0025cf  "}.lst-kix_6ew8evsstjna-6>li:before{content:"\0025cf  "}.lst-kix_jvsv2xnnd1u1-2>li:before{content:"\0025a0  "}.lst-kix_vtze6t2zaf6v-3>li:before{content:"\0025cf  "}ul.lst-kix_vi4c4bepb9nj-4{list-style-type:none}ul.lst-kix_vi4c4bepb9nj-3{list-style-type:none}ul.lst-kix_vi4c4bepb9nj-6{list-style-type:none}ul.lst-kix_vi4c4bepb9nj-5{list-style-type:none}ul.lst-kix_vi4c4bepb9nj-8{list-style-type:none}.lst-kix_cy93osahw99c-1>li:before{content:"\0025cb  "}ul.lst-kix_vi4c4bepb9nj-7{list-style-type:none}.lst-kix_uvcg8m1p6m4l-8>li:before{content:"\0025a0  "}.lst-kix_5sqcbiptdqn7-6>li:before{content:"\0025cf  "}ul.lst-kix_vtze6t2zaf6v-0{list-style-type:none}.lst-kix_io5aoygbg06t-7>li:before{content:"\0025cb  "}ul.lst-kix_vtze6t2zaf6v-4{list-style-type:none}ul.lst-kix_k6m2fush27ta-0{list-style-type:none}ul.lst-kix_vtze6t2zaf6v-3{list-style-type:none}ul.lst-kix_vi4c4bepb9nj-0{list-style-type:none}ul.lst-kix_vtze6t2zaf6v-2{list-style-type:none}ul.lst-kix_vi4c4bepb9nj-1{list-style-type:none}ul.lst-kix_k6m2fush27ta-2{list-style-type:none}ul.lst-kix_cy93osahw99c-1{list-style-type:none}ul.lst-kix_vtze6t2zaf6v-1{list-style-type:none}ul.lst-kix_vi4c4bepb9nj-2{list-style-type:none}ul.lst-kix_k6m2fush27ta-1{list-style-type:none}ul.lst-kix_cy93osahw99c-0{list-style-type:none}.lst-kix_gxavlumdtb4m-2>li:before{content:"\0025cf  "}ul.lst-kix_vtze6t2zaf6v-8{list-style-type:none}ul.lst-kix_k6m2fush27ta-4{list-style-type:none}.lst-kix_67j48hi636wv-2>li:before{content:"\0025a0  "}ul.lst-kix_cy93osahw99c-3{list-style-type:none}ul.lst-kix_vtze6t2zaf6v-7{list-style-type:none}ul.lst-kix_k6m2fush27ta-3{list-style-type:none}ul.lst-kix_cy93osahw99c-2{list-style-type:none}ul.lst-kix_vtze6t2zaf6v-6{list-style-type:none}ul.lst-kix_k6m2fush27ta-6{list-style-type:none}ul.lst-kix_cy93osahw99c-5{list-style-type:none}ul.lst-kix_vtze6t2zaf6v-5{list-style-type:none}.lst-kix_k6m2fush27ta-8>li:before{content:"\0025a0  "}ul.lst-kix_k6m2fush27ta-5{list-style-type:none}ul.lst-kix_cy93osahw99c-4{list-style-type:none}.lst-kix_mtjq9ikkwgkg-6>li:before{content:"\0025cf  "}.lst-kix_kyspjcvmpscx-2>li:before{content:"\0025a0  "}ul.lst-kix_k6m2fush27ta-8{list-style-type:none}ul.lst-kix_cy93osahw99c-7{list-style-type:none}ul.lst-kix_k6m2fush27ta-7{list-style-type:none}ul.lst-kix_cy93osahw99c-6{list-style-type:none}.lst-kix_3c8w77imty2-0>li:before{content:"\0025cf  "}ul.lst-kix_cy93osahw99c-8{list-style-type:none}.lst-kix_vtze6t2zaf6v-2>li:before{content:"\0025a0  "}.lst-kix_438f8zvxynha-1>li:before{content:"\0025cb  "}.lst-kix_pq2bm5pgk3f8-5>li:before{content:"\0025a0  "}.lst-kix_2i8dul3p1urb-0>li:before{content:"\0025cf  "}.lst-kix_gpvw6on59bj7-1>li:before{content:"\0025cb  "}.lst-kix_7ghsuvm9wtud-0>li:before{content:"\0025cf  "}.lst-kix_c8b3326ntei0-7>li:before{content:"\0025cb  "}.lst-kix_u4ps4nrrh7jp-6>li:before{content:"\0025cf  "}.lst-kix_tpctte2r7m1s-7>li:before{content:"\0025cb  "}.lst-kix_vi4c4bepb9nj-5>li:before{content:"\0025a0  "}.lst-kix_m19xsrwwovg7-0>li:before{content:"\0025cf  "}.lst-kix_iiw8cia8yc4j-3>li:before{content:"\0025cf  "}.lst-kix_4388m8uzp8ef-4>li:before{content:"\0025cb  "}.lst-kix_s770phrpuorz-7>li:before{content:"\0025c6  "}.lst-kix_phimkl267z48-3>li:before{content:"\0025cf  "}.lst-kix_6ew8evsstjna-3>li:before{content:"\0025cf  "}ul.lst-kix_ak0bl34nqjju-1{list-style-type:none}ul.lst-kix_ak0bl34nqjju-0{list-style-type:none}ul.lst-kix_ak0bl34nqjju-3{list-style-type:none}ul.lst-kix_ak0bl34nqjju-2{list-style-type:none}ul.lst-kix_ak0bl34nqjju-5{list-style-type:none}.lst-kix_qdqfzihooe6h-8>li:before{content:"\0025a0  "}ul.lst-kix_ak0bl34nqjju-4{list-style-type:none}.lst-kix_plqzfux17aui-5>li:before{content:"\0025a0  "}.lst-kix_m19xsrwwovg7-2>li:before{content:"\0025a0  "}ul.lst-kix_ak0bl34nqjju-7{list-style-type:none}ul.lst-kix_ak0bl34nqjju-6{list-style-type:none}ul.lst-kix_ak0bl34nqjju-8{list-style-type:none}.lst-kix_15jbqmax1zlg-1>li:before{content:"\0025cb  "}.lst-kix_jvsv2xnnd1u1-4>li:before{content:"\0025cb  "}.lst-kix_7ghsuvm9wtud-1>li:before{content:"\0025cb  "}.lst-kix_7ghsuvm9wtud-7>li:before{content:"\0025cb  "}.lst-kix_myv3yc282a94-8>li:before{content:"\0025a0  "}.lst-kix_k6kg1hoy3czh-2>li:before{content:"\0025a0  "}.lst-kix_gxavlumdtb4m-1>li:before{content:"\0025c6  "}.lst-kix_fzi2fyc6kicg-5>li:before{content:"\0025a0  "}.lst-kix_ueeclh7havvb-4>li:before{content:"\0025cb  "}.lst-kix_pybtkz7ijq57-5>li:before{content:"\0025a0  "}.lst-kix_mg9e1w3u35k7-4>li:before{content:"\0025cb  "}ul.lst-kix_y9p72vfeb2dg-3{list-style-type:none}ul.lst-kix_y9p72vfeb2dg-2{list-style-type:none}ul.lst-kix_y9p72vfeb2dg-1{list-style-type:none}ul.lst-kix_y9p72vfeb2dg-0{list-style-type:none}ul.lst-kix_y9p72vfeb2dg-4{list-style-type:none}ul.lst-kix_uqj9jpbvf02w-4{list-style-type:none}.lst-kix_7ghsuvm9wtud-2>li:before{content:"\0025a0  "}ul.lst-kix_y9p72vfeb2dg-5{list-style-type:none}ul.lst-kix_uqj9jpbvf02w-3{list-style-type:none}.lst-kix_iiw8cia8yc4j-2>li:before{content:"\0025a0  "}ul.lst-kix_y9p72vfeb2dg-6{list-style-type:none}ul.lst-kix_uqj9jpbvf02w-2{list-style-type:none}ul.lst-kix_y9p72vfeb2dg-7{list-style-type:none}ul.lst-kix_uqj9jpbvf02w-1{list-style-type:none}ul.lst-kix_y9p72vfeb2dg-8{list-style-type:none}ul.lst-kix_uqj9jpbvf02w-0{list-style-type:none}ul.lst-kix_uqj9jpbvf02w-8{list-style-type:none}ul.lst-kix_uqj9jpbvf02w-7{list-style-type:none}ul.lst-kix_uqj9jpbvf02w-6{list-style-type:none}ul.lst-kix_uqj9jpbvf02w-5{list-style-type:none}ul.lst-kix_iiw8cia8yc4j-0{list-style-type:none}.lst-kix_72psm7aw3mgv-6>li:before{content:"\0025cb  "}ul.lst-kix_iiw8cia8yc4j-2{list-style-type:none}.lst-kix_isz5lhca51pb-4>li:before{content:"\0025cb  "}ul.lst-kix_iiw8cia8yc4j-1{list-style-type:none}.lst-kix_894weqd38n83-4>li:before{content:"\0025cb  "}.lst-kix_ux4yyj3830u0-2>li:before{content:"\0025a0  "}.lst-kix_5rvk9typeixi-6>li:before{content:"\0025cf  "}ul.lst-kix_kmxc1gxplzqf-1{list-style-type:none}ul.lst-kix_kmxc1gxplzqf-2{list-style-type:none}ul.lst-kix_iiw8cia8yc4j-7{list-style-type:none}ul.lst-kix_kmxc1gxplzqf-0{list-style-type:none}ul.lst-kix_iiw8cia8yc4j-8{list-style-type:none}.lst-kix_735cwea6feyk-0>li:before{content:"\0025cf  "}ul.lst-kix_iiw8cia8yc4j-5{list-style-type:none}ul.lst-kix_iiw8cia8yc4j-6{list-style-type:none}ul.lst-kix_iiw8cia8yc4j-3{list-style-type:none}.lst-kix_4sg14qrznwha-5>li:before{content:"\0025a0  "}ul.lst-kix_iiw8cia8yc4j-4{list-style-type:none}.lst-kix_pq2bm5pgk3f8-0>li:before{content:"\0025cf  "}.lst-kix_tx5h7vmpv05d-1>li:before{content:"\0025c6  "}.lst-kix_io5aoygbg06t-6>li:before{content:"\0025cf  "}.lst-kix_qx2879sjrnaj-3>li:before{content:"\0025cf  "}.lst-kix_muvo9icko027-7>li:before{content:"\0025cb  "}.lst-kix_jovurqn7sb5d-1>li:before{content:"\0025c6  "}.lst-kix_15jbqmax1zlg-4>li:before{content:"\0025cb  "}.lst-kix_k5eyv96yzmb1-0>li:before{content:"\0025cf  "}.lst-kix_lf4yh4qagrta-1>li:before{content:"\0025cb  "}ul.lst-kix_k2fvcf9utpyv-0{list-style-type:none}.lst-kix_n437135nrx86-5>li:before{content:"\0025a0  "}ul.lst-kix_k2fvcf9utpyv-1{list-style-type:none}.lst-kix_c8b3326ntei0-1>li:before{content:"\0025cb  "}.lst-kix_oe7a2y97vt6f-3>li:before{content:"\0025cf  "}.lst-kix_q6dd9vwzm62v-5>li:before{content:"\0025a0  "}.lst-kix_ftdnfp64sn83-8>li:before{content:"\0025a0  "}ul.lst-kix_kmxc1gxplzqf-8{list-style-type:none}ul.lst-kix_3c8w77imty2-0{list-style-type:none}.lst-kix_io5aoygbg06t-2>li:before{content:"\0025a0  "}.lst-kix_rr72dbc52mfr-3>li:before{content:"\0025cf  "}.lst-kix_r93hjw9ovjrk-6>li:before{content:"\0025cf  "}ul.lst-kix_kmxc1gxplzqf-7{list-style-type:none}.lst-kix_894weqd38n83-3>li:before{content:"\0025cf  "}ul.lst-kix_3c8w77imty2-2{list-style-type:none}ul.lst-kix_3c8w77imty2-1{list-style-type:none}ul.lst-kix_kmxc1gxplzqf-4{list-style-type:none}ul.lst-kix_3c8w77imty2-4{list-style-type:none}ul.lst-kix_kmxc1gxplzqf-3{list-style-type:none}ul.lst-kix_3c8w77imty2-3{list-style-type:none}ul.lst-kix_kmxc1gxplzqf-6{list-style-type:none}ul.lst-kix_3c8w77imty2-6{list-style-type:none}ul.lst-kix_kmxc1gxplzqf-5{list-style-type:none}ul.lst-kix_3c8w77imty2-5{list-style-type:none}ul.lst-kix_3c8w77imty2-8{list-style-type:none}ul.lst-kix_3c8w77imty2-7{list-style-type:none}ul.lst-kix_k2fvcf9utpyv-8{list-style-type:none}ul.lst-kix_k2fvcf9utpyv-7{list-style-type:none}.lst-kix_bgpsvx6ulyvm-2>li:before{content:"\0025a0  "}ul.lst-kix_k2fvcf9utpyv-6{list-style-type:none}.lst-kix_jvsv2xnnd1u1-1>li:before{content:"\0025cb  "}ul.lst-kix_k2fvcf9utpyv-5{list-style-type:none}ul.lst-kix_k2fvcf9utpyv-4{list-style-type:none}ul.lst-kix_k2fvcf9utpyv-3{list-style-type:none}.lst-kix_438f8zvxynha-7>li:before{content:"\0025cb  "}.lst-kix_5gbbkyi6eio8-8>li:before{content:"\0025a0  "}ul.lst-kix_k2fvcf9utpyv-2{list-style-type:none}.lst-kix_szvnggo6wxn7-4>li:before{content:"\0025cb  "}.lst-kix_jvsv2xnnd1u1-6>li:before{content:"\0025cf  "}.lst-kix_15jbqmax1zlg-7>li:before{content:"\0025cb  "}.lst-kix_n437135nrx86-6>li:before{content:"\0025cf  "}.lst-kix_dygqqhlzftqm-0>li:before{content:"\0025cf  "}.lst-kix_2i8dul3p1urb-5>li:before{content:"\0025a0  "}.lst-kix_cbdffzxl4qg-0>li:before{content:"\0025cf  "}.lst-kix_ueeclh7havvb-7>li:before{content:"\0025cb  "}.lst-kix_5sqcbiptdqn7-8>li:before{content:"\0025a0  "}.lst-kix_9l7bob7jy42l-0>li:before{content:"\002794  "}.lst-kix_oe7a2y97vt6f-2>li:before{content:"\0025a0  "}.lst-kix_ak0bl34nqjju-5>li:before{content:"\0025a0  "}.lst-kix_jovurqn7sb5d-5>li:before{content:"\0025cf  "}ul.lst-kix_lmcct8x25krx-4{list-style-type:none}ul.lst-kix_lmcct8x25krx-5{list-style-type:none}.lst-kix_72psm7aw3mgv-0>li:before{content:"\002794  "}ul.lst-kix_lmcct8x25krx-2{list-style-type:none}ul.lst-kix_lmcct8x25krx-3{list-style-type:none}ul.lst-kix_lmcct8x25krx-0{list-style-type:none}.lst-kix_myv3yc282a94-1>li:before{content:"\0025cb  "}ul.lst-kix_lmcct8x25krx-1{list-style-type:none}.lst-kix_eao6gb4vsoue-0>li:before{content:"\0025cf  "}.lst-kix_mg9e1w3u35k7-5>li:before{content:"\0025a0  "}.lst-kix_uqj9jpbvf02w-2>li:before{content:"\0025cf  "}.lst-kix_sdl0hitb0cmu-5>li:before{content:"\0025a0  "}.lst-kix_i7rj1rz28ohe-2>li:before{content:"\0025a0  "}.lst-kix_kmxc1gxplzqf-4>li:before{content:"\0025c6  "}.lst-kix_k2fvcf9utpyv-1>li:before{content:"\0025cb  "}ul.lst-kix_lmcct8x25krx-7{list-style-type:none}.lst-kix_9l7bob7jy42l-6>li:before{content:"\0025cb  "}ul.lst-kix_lmcct8x25krx-6{list-style-type:none}ul.lst-kix_lmcct8x25krx-8{list-style-type:none}.lst-kix_tiyqr2z460zf-0>li:before{content:"\0025cf  "}.lst-kix_oe7a2y97vt6f-6>li:before{content:"\0025cf  "}.lst-kix_tpctte2r7m1s-0>li:before{content:"\0025cf  "}.lst-kix_io5aoygbg06t-5>li:before{content:"\0025a0  "}.lst-kix_mtjq9ikkwgkg-7>li:before{content:"\0025cb  "}.lst-kix_jvsv2xnnd1u1-8>li:before{content:"\0025a0  "}.lst-kix_uyezhlf50xkc-8>li:before{content:"\0025a0  "}.lst-kix_orylvtq80p7f-8>li:before{content:"\0025a0  "}.lst-kix_mtjq9ikkwgkg-5>li:before{content:"\0025a0  "}.lst-kix_4388m8uzp8ef-6>li:before{content:"\0025cf  "}.lst-kix_26ysmokylgmh-7>li:before{content:"\0025cb  "}.lst-kix_u4ps4nrrh7jp-1>li:before{content:"\0025cb  "}.lst-kix_ak0bl34nqjju-4>li:before{content:"\0025cb  "}.lst-kix_lvbalc9n2puu-5>li:before{content:"\0025a0  "}ul.lst-kix_u4ps4nrrh7jp-0{list-style-type:none}ul.lst-kix_u4ps4nrrh7jp-1{list-style-type:none}.lst-kix_mg9e1w3u35k7-3>li:before{content:"\0025cf  "}ul.lst-kix_u4ps4nrrh7jp-2{list-style-type:none}.lst-kix_gxavlumdtb4m-8>li:before{content:"\0025cf  "}ul.lst-kix_u4ps4nrrh7jp-3{list-style-type:none}ul.lst-kix_u4ps4nrrh7jp-4{list-style-type:none}ul.lst-kix_u4ps4nrrh7jp-5{list-style-type:none}ul.lst-kix_u4ps4nrrh7jp-6{list-style-type:none}.lst-kix_kyspjcvmpscx-5>li:before{content:"\0025a0  "}ul.lst-kix_u4ps4nrrh7jp-7{list-style-type:none}ul.lst-kix_u4ps4nrrh7jp-8{list-style-type:none}.lst-kix_5sqcbiptdqn7-1>li:before{content:"\0025cb  "}.lst-kix_phimkl267z48-8>li:before{content:"\0025a0  "}.lst-kix_q6dd9vwzm62v-8>li:before{content:"\0025a0  "}.lst-kix_3c8w77imty2-2>li:before{content:"\0025a0  "}.lst-kix_plqzfux17aui-0>li:before{content:"\0025cf  "}.lst-kix_2i8dul3p1urb-2>li:before{content:"\0025a0  "}.lst-kix_yn0l7ue14v4k-4>li:before{content:"\0025cb  "}.lst-kix_735cwea6feyk-1>li:before{content:"\0025cb  "}.lst-kix_uyezhlf50xkc-7>li:before{content:"\0025cb  "}.lst-kix_gpvw6on59bj7-2>li:before{content:"\0025a0  "}.lst-kix_muvo9icko027-1>li:before{content:"\0025cb  "}.lst-kix_orylvtq80p7f-5>li:before{content:"\0025a0  "}.lst-kix_uyezhlf50xkc-3>li:before{content:"\0025cf  "}.lst-kix_fw801o12j8pc-0>li:before{content:"\0025cf  "}.lst-kix_io5aoygbg06t-3>li:before{content:"\0025cf  "}.lst-kix_ftdnfp64sn83-4>li:before{content:"\0025cb  "}.lst-kix_ojkq7i32xqsc-1>li:before{content:"\0025cb  "}.lst-kix_k6m2fush27ta-6>li:before{content:"\0025cf  "}ul.lst-kix_bgpsvx6ulyvm-5{list-style-type:none}ul.lst-kix_bgpsvx6ulyvm-4{list-style-type:none}ul.lst-kix_bgpsvx6ulyvm-7{list-style-type:none}ul.lst-kix_bgpsvx6ulyvm-6{list-style-type:none}.lst-kix_lmcct8x25krx-3>li:before{content:"\0025cf  "}ul.lst-kix_bgpsvx6ulyvm-8{list-style-type:none}ul.lst-kix_m19xsrwwovg7-1{list-style-type:none}ul.lst-kix_m19xsrwwovg7-0{list-style-type:none}ul.lst-kix_m19xsrwwovg7-3{list-style-type:none}ul.lst-kix_m19xsrwwovg7-2{list-style-type:none}.lst-kix_k5eyv96yzmb1-3>li:before{content:"\0025cf  "}ul.lst-kix_m19xsrwwovg7-5{list-style-type:none}ul.lst-kix_m19xsrwwovg7-4{list-style-type:none}.lst-kix_v3euetjabtir-3>li:before{content:"\0025cf  "}ul.lst-kix_m19xsrwwovg7-7{list-style-type:none}ul.lst-kix_m19xsrwwovg7-6{list-style-type:none}.lst-kix_iiw8cia8yc4j-5>li:before{content:"\0025a0  "}.lst-kix_5jk7gjoib57i-0>li:before{content:"\0025cf  "}.lst-kix_gpy5gjdtksic-5>li:before{content:"\0025a0  "}.lst-kix_mtjq9ikkwgkg-4>li:before{content:"\0025cb  "}ul.lst-kix_bgpsvx6ulyvm-0{list-style-type:none}.lst-kix_gxavlumdtb4m-3>li:before{content:"\0025cb  "}ul.lst-kix_bgpsvx6ulyvm-1{list-style-type:none}.lst-kix_72psm7aw3mgv-2>li:before{content:"\0025cf  "}ul.lst-kix_bgpsvx6ulyvm-2{list-style-type:none}ul.lst-kix_bgpsvx6ulyvm-3{list-style-type:none}.lst-kix_gxavlumdtb4m-6>li:before{content:"\0025cb  "}.lst-kix_ak0bl34nqjju-8>li:before{content:"\0025a0  "}.lst-kix_n437135nrx86-1>li:before{content:"\0025cb  "}.lst-kix_orylvtq80p7f-7>li:before{content:"\0025cb  "}.lst-kix_tiyqr2z460zf-7>li:before{content:"\0025cb  "}.lst-kix_26ysmokylgmh-8>li:before{content:"\0025a0  "}.lst-kix_ftdnfp64sn83-3>li:before{content:"\0025cf  "}.lst-kix_orylvtq80p7f-4>li:before{content:"\0025cb  "}.lst-kix_eao6gb4vsoue-1>li:before{content:"\0025cb  "}ul.lst-kix_uyezhlf50xkc-0{list-style-type:none}.lst-kix_rr72dbc52mfr-1>li:before{content:"\0025cb  "}ul.lst-kix_uyezhlf50xkc-3{list-style-type:none}ul.lst-kix_uyezhlf50xkc-4{list-style-type:none}.lst-kix_isz5lhca51pb-0>li:before{content:"\0025cf  "}ul.lst-kix_uyezhlf50xkc-1{list-style-type:none}ul.lst-kix_uyezhlf50xkc-2{list-style-type:none}.lst-kix_7ghsuvm9wtud-8>li:before{content:"\0025a0  "}.lst-kix_5jk7gjoib57i-7>li:before{content:"\0025cb  "}ul.lst-kix_5sqcbiptdqn7-3{list-style-type:none}.lst-kix_k5eyv96yzmb1-5>li:before{content:"\0025a0  "}ul.lst-kix_5sqcbiptdqn7-2{list-style-type:none}ul.lst-kix_5sqcbiptdqn7-1{list-style-type:none}.lst-kix_io5aoygbg06t-8>li:before{content:"\0025a0  "}ul.lst-kix_5sqcbiptdqn7-0{list-style-type:none}ul.lst-kix_5sqcbiptdqn7-7{list-style-type:none}ul.lst-kix_26ysmokylgmh-7{list-style-type:none}ul.lst-kix_5sqcbiptdqn7-6{list-style-type:none}ul.lst-kix_26ysmokylgmh-8{list-style-type:none}ul.lst-kix_5sqcbiptdqn7-5{list-style-type:none}ul.lst-kix_26ysmokylgmh-5{list-style-type:none}.lst-kix_72psm7aw3mgv-3>li:before{content:"\0025cb  "}ul.lst-kix_5sqcbiptdqn7-4{list-style-type:none}ul.lst-kix_26ysmokylgmh-6{list-style-type:none}ul.lst-kix_uyezhlf50xkc-8{list-style-type:none}ul.lst-kix_26ysmokylgmh-3{list-style-type:none}ul.lst-kix_uyezhlf50xkc-7{list-style-type:none}ul.lst-kix_26ysmokylgmh-4{list-style-type:none}ul.lst-kix_uyezhlf50xkc-6{list-style-type:none}.lst-kix_ak0bl34nqjju-2>li:before{content:"\0025a0  "}ul.lst-kix_26ysmokylgmh-1{list-style-type:none}ul.lst-kix_uyezhlf50xkc-5{list-style-type:none}ul.lst-kix_5sqcbiptdqn7-8{list-style-type:none}ul.lst-kix_26ysmokylgmh-2{list-style-type:none}.lst-kix_5rvk9typeixi-5>li:before{content:"\0025a0  "}.lst-kix_oe7a2y97vt6f-4>li:before{content:"\0025cb  "}.lst-kix_io5aoygbg06t-1>li:before{content:"\0025cb  "}ul.lst-kix_26ysmokylgmh-0{list-style-type:none}ul.lst-kix_cbdffzxl4qg-2{list-style-type:none}.lst-kix_vtze6t2zaf6v-5>li:before{content:"\0025a0  "}ul.lst-kix_cbdffzxl4qg-3{list-style-type:none}ul.lst-kix_cbdffzxl4qg-0{list-style-type:none}.lst-kix_i7rj1rz28ohe-7>li:before{content:"\0025cb  "}ul.lst-kix_cbdffzxl4qg-1{list-style-type:none}.lst-kix_cy93osahw99c-5>li:before{content:"\0025a0  "}.lst-kix_u4ps4nrrh7jp-7>li:before{content:"\0025cb  "}ul.lst-kix_cbdffzxl4qg-6{list-style-type:none}ul.lst-kix_cbdffzxl4qg-7{list-style-type:none}.lst-kix_mtjq9ikkwgkg-0>li:before{content:"\0025cf  "}ul.lst-kix_cbdffzxl4qg-4{list-style-type:none}ul.lst-kix_cbdffzxl4qg-5{list-style-type:none}.lst-kix_jvsv2xnnd1u1-0>li:before{content:"\0025cf  "}ul.lst-kix_r93hjw9ovjrk-0{list-style-type:none}.lst-kix_517nsqdw77bj-4>li:before{content:"\0025cb  "}.lst-kix_uqj9jpbvf02w-8>li:before{content:"\0025cf  "}ul.lst-kix_r93hjw9ovjrk-4{list-style-type:none}.lst-kix_26ysmokylgmh-5>li:before{content:"\0025a0  "}ul.lst-kix_r93hjw9ovjrk-3{list-style-type:none}ul.lst-kix_r93hjw9ovjrk-2{list-style-type:none}.lst-kix_5jk7gjoib57i-6>li:before{content:"\0025cf  "}ul.lst-kix_r93hjw9ovjrk-1{list-style-type:none}ul.lst-kix_r93hjw9ovjrk-7{list-style-type:none}ul.lst-kix_4388m8uzp8ef-2{list-style-type:none}ul.lst-kix_r93hjw9ovjrk-8{list-style-type:none}.lst-kix_ojkq7i32xqsc-4>li:before{content:"\0025cb  "}ul.lst-kix_4388m8uzp8ef-1{list-style-type:none}ul.lst-kix_r93hjw9ovjrk-5{list-style-type:none}ul.lst-kix_4388m8uzp8ef-4{list-style-type:none}ul.lst-kix_r93hjw9ovjrk-6{list-style-type:none}.lst-kix_n437135nrx86-0>li:before{content:"\0025cf  "}ul.lst-kix_4388m8uzp8ef-3{list-style-type:none}ul.lst-kix_4388m8uzp8ef-6{list-style-type:none}.lst-kix_k5eyv96yzmb1-6>li:before{content:"\0025cf  "}ul.lst-kix_4388m8uzp8ef-5{list-style-type:none}ul.lst-kix_m19xsrwwovg7-8{list-style-type:none}ul.lst-kix_4388m8uzp8ef-8{list-style-type:none}ul.lst-kix_4388m8uzp8ef-7{list-style-type:none}ul.lst-kix_cbdffzxl4qg-8{list-style-type:none}.lst-kix_q6dd9vwzm62v-1>li:before{content:"\0025cb  "}ul.lst-kix_4388m8uzp8ef-0{list-style-type:none}.lst-kix_72psm7aw3mgv-5>li:before{content:"\0025cf  "}.lst-kix_k6kg1hoy3czh-4>li:before{content:"\0025cb  "}.lst-kix_s770phrpuorz-6>li:before{content:"\0025cb  "}.lst-kix_tiyqr2z460zf-4>li:before{content:"\0025cb  "}.lst-kix_jovurqn7sb5d-6>li:before{content:"\0025cb  "}.lst-kix_phimkl267z48-1>li:before{content:"\0025cb  "}ul.lst-kix_9l7bob7jy42l-7{list-style-type:none}.lst-kix_s770phrpuorz-8>li:before{content:"\0025cf  "}ul.lst-kix_9l7bob7jy42l-6{list-style-type:none}.lst-kix_k5eyv96yzmb1-1>li:before{content:"\0025cb  "}ul.lst-kix_9l7bob7jy42l-5{list-style-type:none}ul.lst-kix_9l7bob7jy42l-4{list-style-type:none}.lst-kix_rr72dbc52mfr-2>li:before{content:"\0025a0  "}ul.lst-kix_9l7bob7jy42l-3{list-style-type:none}ul.lst-kix_9l7bob7jy42l-2{list-style-type:none}ul.lst-kix_9l7bob7jy42l-1{list-style-type:none}ul.lst-kix_9l7bob7jy42l-0{list-style-type:none}.lst-kix_rr72dbc52mfr-6>li:before{content:"\0025cf  "}.lst-kix_517nsqdw77bj-3>li:before{content:"\0025cf  "}.lst-kix_rr72dbc52mfr-7>li:before{content:"\0025cb  "}.lst-kix_gpy5gjdtksic-3>li:before{content:"\0025cf  "}.lst-kix_tiyqr2z460zf-6>li:before{content:"\0025cf  "}ul.lst-kix_tpctte2r7m1s-7{list-style-type:none}ul.lst-kix_i7rj1rz28ohe-6{list-style-type:none}ul.lst-kix_tpctte2r7m1s-8{list-style-type:none}ul.lst-kix_i7rj1rz28ohe-7{list-style-type:none}ul.lst-kix_i7rj1rz28ohe-8{list-style-type:none}ul.lst-kix_tpctte2r7m1s-3{list-style-type:none}ul.lst-kix_tpctte2r7m1s-4{list-style-type:none}ul.lst-kix_tpctte2r7m1s-5{list-style-type:none}ul.lst-kix_tpctte2r7m1s-6{list-style-type:none}ul.lst-kix_tpctte2r7m1s-0{list-style-type:none}ul.lst-kix_tpctte2r7m1s-1{list-style-type:none}ul.lst-kix_i7rj1rz28ohe-0{list-style-type:none}ul.lst-kix_tpctte2r7m1s-2{list-style-type:none}ul.lst-kix_i7rj1rz28ohe-1{list-style-type:none}ul.lst-kix_i7rj1rz28ohe-2{list-style-type:none}.lst-kix_kmxc1gxplzqf-7>li:before{content:"\0025c6  "}ul.lst-kix_i7rj1rz28ohe-3{list-style-type:none}ul.lst-kix_i7rj1rz28ohe-4{list-style-type:none}ul.lst-kix_i7rj1rz28ohe-5{list-style-type:none}.lst-kix_fw801o12j8pc-6>li:before{content:"\0025cf  "}.lst-kix_muvo9icko027-3>li:before{content:"\0025cf  "}.lst-kix_438f8zvxynha-4>li:before{content:"\0025cb  "}.lst-kix_i7rj1rz28ohe-4>li:before{content:"\0025cb  "}.lst-kix_sdl0hitb0cmu-1>li:before{content:"\0025cb  "}.lst-kix_ueeclh7havvb-1>li:before{content:"\0025cb  "}ul.lst-kix_lf4yh4qagrta-7{list-style-type:none}.lst-kix_kyspjcvmpscx-0>li:before{content:"\0025cf  "}ul.lst-kix_7ghsuvm9wtud-4{list-style-type:none}.lst-kix_qx2879sjrnaj-8>li:before{content:"\0025a0  "}ul.lst-kix_lf4yh4qagrta-6{list-style-type:none}ul.lst-kix_7ghsuvm9wtud-3{list-style-type:none}ul.lst-kix_7ghsuvm9wtud-2{list-style-type:none}.lst-kix_y9p72vfeb2dg-1>li:before{content:"\0025cb  "}.lst-kix_s770phrpuorz-5>li:before{content:"\0025cf  "}ul.lst-kix_lf4yh4qagrta-8{list-style-type:none}ul.lst-kix_7ghsuvm9wtud-1{list-style-type:none}ul.lst-kix_7ghsuvm9wtud-0{list-style-type:none}.lst-kix_jovurqn7sb5d-3>li:before{content:"\0025cb  "}ul.lst-kix_517nsqdw77bj-6{list-style-type:none}.lst-kix_jovurqn7sb5d-4>li:before{content:"\0025c6  "}ul.lst-kix_517nsqdw77bj-5{list-style-type:none}ul.lst-kix_lf4yh4qagrta-1{list-style-type:none}ul.lst-kix_517nsqdw77bj-8{list-style-type:none}ul.lst-kix_lf4yh4qagrta-0{list-style-type:none}ul.lst-kix_517nsqdw77bj-7{list-style-type:none}ul.lst-kix_lf4yh4qagrta-3{list-style-type:none}ul.lst-kix_7ghsuvm9wtud-8{list-style-type:none}ul.lst-kix_lf4yh4qagrta-2{list-style-type:none}ul.lst-kix_7ghsuvm9wtud-7{list-style-type:none}ul.lst-kix_lf4yh4qagrta-5{list-style-type:none}ul.lst-kix_7ghsuvm9wtud-6{list-style-type:none}ul.lst-kix_lf4yh4qagrta-4{list-style-type:none}ul.lst-kix_7ghsuvm9wtud-5{list-style-type:none}ul.lst-kix_yn0l7ue14v4k-0{list-style-type:none}ul.lst-kix_517nsqdw77bj-0{list-style-type:none}.lst-kix_eao6gb4vsoue-4>li:before{content:"\0025cb  "}ul.lst-kix_yn0l7ue14v4k-4{list-style-type:none}ul.lst-kix_517nsqdw77bj-1{list-style-type:none}ul.lst-kix_yn0l7ue14v4k-3{list-style-type:none}ul.lst-kix_517nsqdw77bj-2{list-style-type:none}.lst-kix_c8b3326ntei0-2>li:before{content:"\0025a0  "}.lst-kix_k2fvcf9utpyv-8>li:before{content:"\0025a0  "}ul.lst-kix_yn0l7ue14v4k-2{list-style-type:none}ul.lst-kix_517nsqdw77bj-3{list-style-type:none}ul.lst-kix_yn0l7ue14v4k-1{list-style-type:none}ul.lst-kix_517nsqdw77bj-4{list-style-type:none}ul.lst-kix_yn0l7ue14v4k-8{list-style-type:none}.lst-kix_kmxc1gxplzqf-6>li:before{content:"\0025cb  "}ul.lst-kix_yn0l7ue14v4k-7{list-style-type:none}.lst-kix_c8b3326ntei0-8>li:before{content:"\0025a0  "}ul.lst-kix_yn0l7ue14v4k-6{list-style-type:none}ul.lst-kix_yn0l7ue14v4k-5{list-style-type:none}.lst-kix_s770phrpuorz-2>li:before{content:"\0025cf  "}ul.lst-kix_q6dd9vwzm62v-6{list-style-type:none}ul.lst-kix_q6dd9vwzm62v-5{list-style-type:none}ul.lst-kix_q6dd9vwzm62v-4{list-style-type:none}ul.lst-kix_q6dd9vwzm62v-3{list-style-type:none}ul.lst-kix_q6dd9vwzm62v-2{list-style-type:none}.lst-kix_jovurqn7sb5d-8>li:before{content:"\0025cf  "}ul.lst-kix_q6dd9vwzm62v-1{list-style-type:none}.lst-kix_n437135nrx86-2>li:before{content:"\0025a0  "}ul.lst-kix_q6dd9vwzm62v-0{list-style-type:none}.lst-kix_gpy5gjdtksic-2>li:before{content:"\0025a0  "}ul.lst-kix_eao6gb4vsoue-8{list-style-type:none}.lst-kix_ak0bl34nqjju-3>li:before{content:"\0025cf  "}ul.lst-kix_eao6gb4vsoue-7{list-style-type:none}ul.lst-kix_eao6gb4vsoue-6{list-style-type:none}.lst-kix_jvsv2xnnd1u1-5>li:before{content:"\0025a0  "}ul.lst-kix_eao6gb4vsoue-5{list-style-type:none}ul.lst-kix_q6dd9vwzm62v-8{list-style-type:none}ul.lst-kix_q6dd9vwzm62v-7{list-style-type:none}.lst-kix_pq2bm5pgk3f8-7>li:before{content:"\0025cb  "}.lst-kix_7ghsuvm9wtud-6>li:before{content:"\0025cf  "}ul.lst-kix_eao6gb4vsoue-0{list-style-type:none}.lst-kix_uqj9jpbvf02w-4>li:before{content:"\0025c6  "}.lst-kix_26ysmokylgmh-3>li:before{content:"\0025cf  "}ul.lst-kix_eao6gb4vsoue-3{list-style-type:none}ul.lst-kix_eao6gb4vsoue-4{list-style-type:none}.lst-kix_88zhhulpx2mj-4>li:before{content:"\0025cb  "}.lst-kix_dygqqhlzftqm-8>li:before{content:"\0025a0  "}ul.lst-kix_eao6gb4vsoue-1{list-style-type:none}.lst-kix_k6kg1hoy3czh-1>li:before{content:"\0025cb  "}ul.lst-kix_eao6gb4vsoue-2{list-style-type:none}.lst-kix_5gbbkyi6eio8-7>li:before{content:"\0025cb  "}.lst-kix_6ew8evsstjna-8>li:before{content:"\0025a0  "}.lst-kix_6ew8evsstjna-5>li:before{content:"\0025a0  "}.lst-kix_sdl0hitb0cmu-2>li:before{content:"\0025a0  "}.lst-kix_lmcct8x25krx-0>li:before{content:"\0025cf  "}.lst-kix_4sg14qrznwha-0>li:before{content:"\0025cf  "}.lst-kix_mg9e1w3u35k7-0>li:before{content:"\0025cf  "}.lst-kix_myv3yc282a94-4>li:before{content:"\0025cb  "}.lst-kix_n437135nrx86-7>li:before{content:"\0025cb  "}.lst-kix_4388m8uzp8ef-7>li:before{content:"\0025cb  "}.lst-kix_k5eyv96yzmb1-2>li:before{content:"\0025a0  "}.lst-kix_9lacosnr1i9j-0>li:before{content:"\0025cf  "}.lst-kix_pq2bm5pgk3f8-4>li:before{content:"\0025cb  "}.lst-kix_myv3yc282a94-0>li:before{content:"\0025cf  "}ul.lst-kix_plqzfux17aui-8{list-style-type:none}.lst-kix_9l7bob7jy42l-8>li:before{content:"\0025cf  "}.lst-kix_uyezhlf50xkc-5>li:before{content:"\0025a0  "}ul.lst-kix_plqzfux17aui-6{list-style-type:none}ul.lst-kix_plqzfux17aui-7{list-style-type:none}.lst-kix_dygqqhlzftqm-3>li:before{content:"\0025cf  "}ul.lst-kix_plqzfux17aui-5{list-style-type:none}ul.lst-kix_plqzfux17aui-4{list-style-type:none}.lst-kix_szvnggo6wxn7-2>li:before{content:"\0025a0  "}ul.lst-kix_plqzfux17aui-3{list-style-type:none}.lst-kix_uuheyt7f1guj-0>li:before{content:"\0025cf  "}ul.lst-kix_plqzfux17aui-2{list-style-type:none}ul.lst-kix_plqzfux17aui-1{list-style-type:none}ul.lst-kix_plqzfux17aui-0{list-style-type:none}.lst-kix_yn0l7ue14v4k-6>li:before{content:"\0025cf  "}.lst-kix_orylvtq80p7f-3>li:before{content:"\0025cf  "}.lst-kix_myv3yc282a94-6>li:before{content:"\0025cf  "}.lst-kix_uvcg8m1p6m4l-6>li:before{content:"\0025cf  "}.lst-kix_muvo9icko027-4>li:before{content:"\0025cb  "}.lst-kix_q6dd9vwzm62v-2>li:before{content:"\0025a0  "}ul.lst-kix_438f8zvxynha-0{list-style-type:none}ul.lst-kix_438f8zvxynha-1{list-style-type:none}.lst-kix_v3euetjabtir-4>li:before{content:"\0025cb  "}.lst-kix_tpctte2r7m1s-8>li:before{content:"\0025a0  "}.lst-kix_cbdffzxl4qg-5>li:before{content:"\0025a0  "}.lst-kix_dygqqhlzftqm-2>li:before{content:"\0025a0  "}.lst-kix_uyezhlf50xkc-0>li:before{content:"\0025cf  "}.lst-kix_uuheyt7f1guj-3>li:before{content:"\0025cf  "}.lst-kix_3c8w77imty2-7>li:before{content:"\0025cb  "}.lst-kix_isz5lhca51pb-1>li:before{content:"\0025cb  "}.lst-kix_6ew8evsstjna-1>li:before{content:"\0025cb  "}.lst-kix_cbdffzxl4qg-1>li:before{content:"\0025cb  "}.lst-kix_n437135nrx86-4>li:before{content:"\0025cb  "}.lst-kix_iiw8cia8yc4j-6>li:before{content:"\0025cf  "}.lst-kix_3c8w77imty2-8>li:before{content:"\0025a0  "}.lst-kix_kmxc1gxplzqf-3>li:before{content:"\0025cb  "}.lst-kix_uqj9jpbvf02w-3>li:before{content:"\0025cb  "}.lst-kix_tx5h7vmpv05d-4>li:before{content:"\0025c6  "}.lst-kix_s770phrpuorz-0>li:before{content:"\002794  "}.lst-kix_r93hjw9ovjrk-0>li:before{content:"\0025cf  "}.lst-kix_ftdnfp64sn83-6>li:before{content:"\0025cf  "}.lst-kix_ux4yyj3830u0-4>li:before{content:"\0025cb  "}.lst-kix_uuheyt7f1guj-6>li:before{content:"\0025cf  "}ul.lst-kix_438f8zvxynha-3{list-style-type:none}.lst-kix_9lacosnr1i9j-6>li:before{content:"\0025cf  "}ul.lst-kix_438f8zvxynha-2{list-style-type:none}ul.lst-kix_438f8zvxynha-5{list-style-type:none}ul.lst-kix_438f8zvxynha-4{list-style-type:none}.lst-kix_3c8w77imty2-6>li:before{content:"\0025cf  "}ul.lst-kix_438f8zvxynha-7{list-style-type:none}ul.lst-kix_438f8zvxynha-6{list-style-type:none}ul.lst-kix_438f8zvxynha-8{list-style-type:none}ul.lst-kix_72psm7aw3mgv-8{list-style-type:none}ul.lst-kix_72psm7aw3mgv-6{list-style-type:none}ul.lst-kix_k5eyv96yzmb1-7{list-style-type:none}ul.lst-kix_72psm7aw3mgv-7{list-style-type:none}ul.lst-kix_k5eyv96yzmb1-8{list-style-type:none}ul.lst-kix_72psm7aw3mgv-4{list-style-type:none}ul.lst-kix_k5eyv96yzmb1-5{list-style-type:none}ul.lst-kix_72psm7aw3mgv-5{list-style-type:none}.lst-kix_517nsqdw77bj-1>li:before{content:"\0025cb  "}ul.lst-kix_k5eyv96yzmb1-6{list-style-type:none}ul.lst-kix_72psm7aw3mgv-2{list-style-type:none}ul.lst-kix_k5eyv96yzmb1-3{list-style-type:none}.lst-kix_pq2bm5pgk3f8-3>li:before{content:"\0025cf  "}.lst-kix_894weqd38n83-7>li:before{content:"\0025cb  "}ul.lst-kix_72psm7aw3mgv-3{list-style-type:none}ul.lst-kix_k5eyv96yzmb1-4{list-style-type:none}ul.lst-kix_72psm7aw3mgv-0{list-style-type:none}ul.lst-kix_k5eyv96yzmb1-1{list-style-type:none}ul.lst-kix_72psm7aw3mgv-1{list-style-type:none}ul.lst-kix_k5eyv96yzmb1-2{list-style-type:none}.lst-kix_v3euetjabtir-1>li:before{content:"\0025cb  "}ul.lst-kix_k5eyv96yzmb1-0{list-style-type:none}.lst-kix_m19xsrwwovg7-4>li:before{content:"\0025cb  "}.lst-kix_9lacosnr1i9j-2>li:before{content:"\0025a0  "}.lst-kix_uuheyt7f1guj-8>li:before{content:"\0025a0  "}.lst-kix_3c8w77imty2-4>li:before{content:"\0025cb  "}.lst-kix_15jbqmax1zlg-2>li:before{content:"\0025a0  "}.lst-kix_k2fvcf9utpyv-5>li:before{content:"\0025a0  "}.lst-kix_ftdnfp64sn83-0>li:before{content:"\0025cf  "}.lst-kix_kyspjcvmpscx-6>li:before{content:"\0025cf  "}.lst-kix_y9p72vfeb2dg-0>li:before{content:"\0025cf  "}.lst-kix_5jk7gjoib57i-2>li:before{content:"\0025a0  "}.lst-kix_ftdnfp64sn83-1>li:before{content:"\0025cb  "}.lst-kix_qdqfzihooe6h-5>li:before{content:"\0025a0  "}.lst-kix_4sg14qrznwha-7>li:before{content:"\0025cb  "}.lst-kix_qdqfzihooe6h-6>li:before{content:"\0025cf  "}ul.lst-kix_6ew8evsstjna-8{list-style-type:none}ul.lst-kix_6ew8evsstjna-7{list-style-type:none}.lst-kix_q6dd9vwzm62v-7>li:before{content:"\0025cb  "}.lst-kix_lvbalc9n2puu-7>li:before{content:"\0025cb  "}.lst-kix_6ew8evsstjna-4>li:before{content:"\0025cb  "}ul.lst-kix_6ew8evsstjna-1{list-style-type:none}ul.lst-kix_6ew8evsstjna-2{list-style-type:none}.lst-kix_phimkl267z48-6>li:before{content:"\0025cf  "}ul.lst-kix_6ew8evsstjna-0{list-style-type:none}.lst-kix_tiyqr2z460zf-1>li:before{content:"\0025cb  "}ul.lst-kix_6ew8evsstjna-5{list-style-type:none}.lst-kix_67j48hi636wv-3>li:before{content:"\0025cf  "}ul.lst-kix_6ew8evsstjna-6{list-style-type:none}ul.lst-kix_6ew8evsstjna-3{list-style-type:none}ul.lst-kix_6ew8evsstjna-4{list-style-type:none}.lst-kix_uuheyt7f1guj-7>li:before{content:"\0025cb  "}.lst-kix_72psm7aw3mgv-8>li:before{content:"\0025cf  "}.lst-kix_gxavlumdtb4m-4>li:before{content:"\0025c6  "}.lst-kix_2i8dul3p1urb-8>li:before{content:"\0025a0  "}.lst-kix_gpvw6on59bj7-7>li:before{content:"\0025cb  "}.lst-kix_lmcct8x25krx-7>li:before{content:"\0025cb  "}.lst-kix_ueeclh7havvb-3>li:before{content:"\0025cf  "}.lst-kix_bgpsvx6ulyvm-8>li:before{content:"\0025a0  "}.lst-kix_u4ps4nrrh7jp-0>li:before{content:"\0025cf  "}.lst-kix_88zhhulpx2mj-7>li:before{content:"\0025cb  "}.lst-kix_7ghsuvm9wtud-3>li:before{content:"\0025cf  "}.lst-kix_ftdnfp64sn83-2>li:before{content:"\0025a0  "}.lst-kix_orylvtq80p7f-6>li:before{content:"\0025cf  "}.lst-kix_5jk7gjoib57i-4>li:before{content:"\0025cb  "}.lst-kix_yn0l7ue14v4k-0>li:before{content:"\0025cf  "}.lst-kix_y9p72vfeb2dg-6>li:before{content:"\0025cf  "}.lst-kix_qdqfzihooe6h-7>li:before{content:"\0025cb  "}ul.lst-kix_gxavlumdtb4m-1{list-style-type:none}ul.lst-kix_gxavlumdtb4m-0{list-style-type:none}ul.lst-kix_gxavlumdtb4m-3{list-style-type:none}ul.lst-kix_gxavlumdtb4m-2{list-style-type:none}ul.lst-kix_894weqd38n83-8{list-style-type:none}ul.lst-kix_67j48hi636wv-6{list-style-type:none}ul.lst-kix_894weqd38n83-7{list-style-type:none}ul.lst-kix_67j48hi636wv-5{list-style-type:none}ul.lst-kix_894weqd38n83-6{list-style-type:none}ul.lst-kix_67j48hi636wv-4{list-style-type:none}ul.lst-kix_894weqd38n83-5{list-style-type:none}ul.lst-kix_67j48hi636wv-3{list-style-type:none}ul.lst-kix_894weqd38n83-4{list-style-type:none}ul.lst-kix_67j48hi636wv-2{list-style-type:none}ul.lst-kix_894weqd38n83-3{list-style-type:none}ul.lst-kix_67j48hi636wv-1{list-style-type:none}.lst-kix_yn0l7ue14v4k-5>li:before{content:"\0025a0  "}ul.lst-kix_894weqd38n83-2{list-style-type:none}ul.lst-kix_67j48hi636wv-0{list-style-type:none}ul.lst-kix_894weqd38n83-1{list-style-type:none}ul.lst-kix_894weqd38n83-0{list-style-type:none}.lst-kix_k6m2fush27ta-3>li:before{content:"\0025cf  "}.lst-kix_uqj9jpbvf02w-1>li:before{content:"\0025c6  "}ul.lst-kix_67j48hi636wv-7{list-style-type:none}ul.lst-kix_67j48hi636wv-8{list-style-type:none}.lst-kix_735cwea6feyk-5>li:before{content:"\0025a0  "}ul.lst-kix_gxavlumdtb4m-8{list-style-type:none}.lst-kix_72psm7aw3mgv-7>li:before{content:"\0025c6  "}.lst-kix_9l7bob7jy42l-1>li:before{content:"\0025c6  "}.lst-kix_88zhhulpx2mj-3>li:before{content:"\0025cf  "}.lst-kix_m19xsrwwovg7-6>li:before{content:"\0025cf  "}ul.lst-kix_gxavlumdtb4m-4{list-style-type:none}ul.lst-kix_gxavlumdtb4m-5{list-style-type:none}.lst-kix_fw801o12j8pc-4>li:before{content:"\0025cb  "}ul.lst-kix_gxavlumdtb4m-6{list-style-type:none}ul.lst-kix_gxavlumdtb4m-7{list-style-type:none}.lst-kix_uuheyt7f1guj-4>li:before{content:"\0025cb  "}.lst-kix_6ew8evsstjna-0>li:before{content:"\0025cf  "}.lst-kix_5rvk9typeixi-3>li:before{content:"\0025cf  "}ul.lst-kix_c8b3326ntei0-1{list-style-type:none}.lst-kix_cy93osahw99c-7>li:before{content:"\0025cb  "}ul.lst-kix_c8b3326ntei0-0{list-style-type:none}.lst-kix_mtjq9ikkwgkg-1>li:before{content:"\0025cb  "}.lst-kix_438f8zvxynha-0>li:before{content:"\0025cf  "}ul.lst-kix_c8b3326ntei0-3{list-style-type:none}ul.lst-kix_c8b3326ntei0-2{list-style-type:none}.lst-kix_jvsv2xnnd1u1-7>li:before{content:"\0025cb  "}.lst-kix_88zhhulpx2mj-1>li:before{content:"\0025cb  "}ul.lst-kix_c8b3326ntei0-5{list-style-type:none}ul.lst-kix_c8b3326ntei0-4{list-style-type:none}.lst-kix_eao6gb4vsoue-6>li:before{content:"\0025cf  "}ul.lst-kix_pq2bm5pgk3f8-8{list-style-type:none}ul.lst-kix_c8b3326ntei0-7{list-style-type:none}ul.lst-kix_pq2bm5pgk3f8-7{list-style-type:none}ul.lst-kix_c8b3326ntei0-6{list-style-type:none}ul.lst-kix_c8b3326ntei0-8{list-style-type:none}ul.lst-kix_pq2bm5pgk3f8-1{list-style-type:none}.lst-kix_qx2879sjrnaj-7>li:before{content:"\0025cb  "}ul.lst-kix_pq2bm5pgk3f8-2{list-style-type:none}.lst-kix_fzi2fyc6kicg-1>li:before{content:"\0025cb  "}ul.lst-kix_pq2bm5pgk3f8-0{list-style-type:none}ul.lst-kix_pq2bm5pgk3f8-5{list-style-type:none}ul.lst-kix_pq2bm5pgk3f8-6{list-style-type:none}ul.lst-kix_pq2bm5pgk3f8-3{list-style-type:none}.lst-kix_lmcct8x25krx-1>li:before{content:"\0025cb  "}ul.lst-kix_pq2bm5pgk3f8-4{list-style-type:none}.lst-kix_lvbalc9n2puu-2>li:before{content:"\0025a0  "}.lst-kix_uvcg8m1p6m4l-2>li:before{content:"\0025a0  "}ul.lst-kix_phimkl267z48-2{list-style-type:none}.lst-kix_oe7a2y97vt6f-1>li:before{content:"\0025cb  "}.lst-kix_muvo9icko027-2>li:before{content:"\0025a0  "}ul.lst-kix_phimkl267z48-1{list-style-type:none}ul.lst-kix_phimkl267z48-4{list-style-type:none}.lst-kix_ak0bl34nqjju-7>li:before{content:"\0025cb  "}ul.lst-kix_phimkl267z48-3{list-style-type:none}.lst-kix_ux4yyj3830u0-7>li:before{content:"\0025cb  "}ul.lst-kix_phimkl267z48-6{list-style-type:none}.lst-kix_ojkq7i32xqsc-6>li:before{content:"\0025cf  "}ul.lst-kix_phimkl267z48-5{list-style-type:none}.lst-kix_v3euetjabtir-2>li:before{content:"\0025a0  "}ul.lst-kix_phimkl267z48-8{list-style-type:none}.lst-kix_qdqfzihooe6h-0>li:before{content:"\0025cf  "}ul.lst-kix_phimkl267z48-7{list-style-type:none}.lst-kix_gpy5gjdtksic-8>li:before{content:"\0025a0  "}ul.lst-kix_phimkl267z48-0{list-style-type:none}.lst-kix_v3euetjabtir-5>li:before{content:"\0025a0  "}.lst-kix_i7rj1rz28ohe-3>li:before{content:"\0025cf  "}.lst-kix_67j48hi636wv-4>li:before{content:"\0025cb  "}ul.lst-kix_9l7bob7jy42l-8{list-style-type:none}.lst-kix_jovurqn7sb5d-0>li:before{content:"\002794  "}.lst-kix_5gbbkyi6eio8-2>li:before{content:"\0025a0  "}.lst-kix_v3euetjabtir-7>li:before{content:"\0025cb  "}.lst-kix_mtjq9ikkwgkg-8>li:before{content:"\0025a0  "}.lst-kix_5gbbkyi6eio8-5>li:before{content:"\0025a0  "}.lst-kix_k6kg1hoy3czh-0>li:before{content:"\0025cf  "}.lst-kix_r93hjw9ovjrk-3>li:before{content:"\0025cf  "}.lst-kix_bgpsvx6ulyvm-3>li:before{content:"\0025cf  "}.lst-kix_5gbbkyi6eio8-4>li:before{content:"\0025cb  "}.lst-kix_cbdffzxl4qg-6>li:before{content:"\0025cf  "}.lst-kix_dygqqhlzftqm-5>li:before{content:"\0025a0  "}.lst-kix_ueeclh7havvb-8>li:before{content:"\0025a0  "}.lst-kix_9l7bob7jy42l-5>li:before{content:"\0025cf  "}.lst-kix_tiyqr2z460zf-3>li:before{content:"\0025cf  "}.lst-kix_plqzfux17aui-4>li:before{content:"\0025cb  "}.lst-kix_438f8zvxynha-3>li:before{content:"\0025cf  "}.lst-kix_phimkl267z48-5>li:before{content:"\0025a0  "}.lst-kix_m19xsrwwovg7-7>li:before{content:"\0025cb  "}.lst-kix_uyezhlf50xkc-2>li:before{content:"\0025a0  "}.lst-kix_q6dd9vwzm62v-3>li:before{content:"\0025cf  "}.lst-kix_735cwea6feyk-3>li:before{content:"\0025cf  "}.lst-kix_q6dd9vwzm62v-6>li:before{content:"\0025cf  "}.lst-kix_myv3yc282a94-7>li:before{content:"\0025cb  "}.lst-kix_k6kg1hoy3czh-8>li:before{content:"\0025a0  "}.lst-kix_lf4yh4qagrta-0>li:before{content:"\0025cf  "}.lst-kix_4sg14qrznwha-2>li:before{content:"\0025a0  "}.lst-kix_orylvtq80p7f-0>li:before{content:"\0025cf  "}.lst-kix_k2fvcf9utpyv-3>li:before{content:"\0025cf  "}.lst-kix_9lacosnr1i9j-5>li:before{content:"\0025a0  "}.lst-kix_orylvtq80p7f-1>li:before{content:"\0025cb  "}.lst-kix_ak0bl34nqjju-0>li:before{content:"\0025cf  "}.lst-kix_yn0l7ue14v4k-1>li:before{content:"\0025cb  "}.lst-kix_yn0l7ue14v4k-3>li:before{content:"\0025cf  "}.lst-kix_qx2879sjrnaj-0>li:before{content:"\0025cf  "}.lst-kix_isz5lhca51pb-3>li:before{content:"\0025cf  "}.lst-kix_u4ps4nrrh7jp-8>li:before{content:"\0025a0  "}.lst-kix_vtze6t2zaf6v-8>li:before{content:"\0025a0  "}.lst-kix_plqzfux17aui-7>li:before{content:"\0025cb  "}.lst-kix_myv3yc282a94-3>li:before{content:"\0025cf  "}ul.lst-kix_uvcg8m1p6m4l-8{list-style-type:none}ul.lst-kix_jovurqn7sb5d-7{list-style-type:none}ul.lst-kix_uvcg8m1p6m4l-7{list-style-type:none}ul.lst-kix_jovurqn7sb5d-8{list-style-type:none}ul.lst-kix_uvcg8m1p6m4l-6{list-style-type:none}ul.lst-kix_uvcg8m1p6m4l-5{list-style-type:none}.lst-kix_ojkq7i32xqsc-0>li:before{content:"\0025cf  "}.lst-kix_72psm7aw3mgv-1>li:before{content:"\0025c6  "}ul.lst-kix_uvcg8m1p6m4l-4{list-style-type:none}.lst-kix_uyezhlf50xkc-1>li:before{content:"\0025cb  "}ul.lst-kix_uvcg8m1p6m4l-3{list-style-type:none}ul.lst-kix_uvcg8m1p6m4l-2{list-style-type:none}ul.lst-kix_uvcg8m1p6m4l-1{list-style-type:none}ul.lst-kix_uvcg8m1p6m4l-0{list-style-type:none}.lst-kix_uuheyt7f1guj-2>li:before{content:"\0025a0  "}.lst-kix_dygqqhlzftqm-4>li:before{content:"\0025cb  "}.lst-kix_vi4c4bepb9nj-7>li:before{content:"\0025cb  "}.lst-kix_lvbalc9n2puu-8>li:before{content:"\0025a0  "}.lst-kix_tiyqr2z460zf-5>li:before{content:"\0025a0  "}.lst-kix_kmxc1gxplzqf-0>li:before{content:"\002794  "}ul.lst-kix_5gbbkyi6eio8-0{list-style-type:none}.lst-kix_eao6gb4vsoue-3>li:before{content:"\0025cf  "}ul.lst-kix_jovurqn7sb5d-0{list-style-type:none}ul.lst-kix_5gbbkyi6eio8-2{list-style-type:none}ul.lst-kix_jovurqn7sb5d-2{list-style-type:none}ul.lst-kix_5gbbkyi6eio8-1{list-style-type:none}ul.lst-kix_jovurqn7sb5d-1{list-style-type:none}ul.lst-kix_5gbbkyi6eio8-4{list-style-type:none}ul.lst-kix_jovurqn7sb5d-4{list-style-type:none}ul.lst-kix_5gbbkyi6eio8-3{list-style-type:none}ul.lst-kix_jovurqn7sb5d-3{list-style-type:none}ul.lst-kix_5gbbkyi6eio8-6{list-style-type:none}.lst-kix_isz5lhca51pb-7>li:before{content:"\0025cb  "}ul.lst-kix_jovurqn7sb5d-6{list-style-type:none}ul.lst-kix_5gbbkyi6eio8-5{list-style-type:none}ul.lst-kix_jovurqn7sb5d-5{list-style-type:none}.lst-kix_ojkq7i32xqsc-2>li:before{content:"\0025a0  "}ul.lst-kix_n437135nrx86-0{list-style-type:none}ul.lst-kix_n437135nrx86-1{list-style-type:none}.lst-kix_26ysmokylgmh-4>li:before{content:"\0025cb  "}.lst-kix_i7rj1rz28ohe-1>li:before{content:"\0025cb  "}ul.lst-kix_n437135nrx86-2{list-style-type:none}ul.lst-kix_5gbbkyi6eio8-7{list-style-type:none}ul.lst-kix_n437135nrx86-3{list-style-type:none}ul.lst-kix_5gbbkyi6eio8-8{list-style-type:none}ul.lst-kix_n437135nrx86-4{list-style-type:none}.lst-kix_2i8dul3p1urb-7>li:before{content:"\0025cb  "}ul.lst-kix_n437135nrx86-5{list-style-type:none}ul.lst-kix_n437135nrx86-6{list-style-type:none}ul.lst-kix_n437135nrx86-7{list-style-type:none}.lst-kix_cbdffzxl4qg-4>li:before{content:"\0025cb  "}.lst-kix_72psm7aw3mgv-4>li:before{content:"\0025c6  "}.lst-kix_q6dd9vwzm62v-4>li:before{content:"\0025cb  "}.lst-kix_isz5lhca51pb-5>li:before{content:"\0025a0  "}.lst-kix_bgpsvx6ulyvm-4>li:before{content:"\0025cb  "}.lst-kix_cy93osahw99c-2>li:before{content:"\0025a0  "}.lst-kix_cy93osahw99c-4>li:before{content:"\0025cb  "}.lst-kix_gpvw6on59bj7-4>li:before{content:"\0025cb  "}ul.lst-kix_n437135nrx86-8{list-style-type:none}.lst-kix_517nsqdw77bj-7>li:before{content:"\0025cb  "}.lst-kix_5jk7gjoib57i-8>li:before{content:"\0025a0  "}.lst-kix_5rvk9typeixi-0>li:before{content:"\0025cf  "}.lst-kix_fw801o12j8pc-7>li:before{content:"\0025cb  "}.lst-kix_ojkq7i32xqsc-8>li:before{content:"\0025a0  "}.lst-kix_iiw8cia8yc4j-1>li:before{content:"\0025cb  "}.lst-kix_ueeclh7havvb-0>li:before{content:"\0025cf  "}ul.lst-kix_dygqqhlzftqm-4{list-style-type:none}ul.lst-kix_dygqqhlzftqm-3{list-style-type:none}ul.lst-kix_dygqqhlzftqm-6{list-style-type:none}.lst-kix_ojkq7i32xqsc-3>li:before{content:"\0025cf  "}ul.lst-kix_dygqqhlzftqm-5{list-style-type:none}ul.lst-kix_dygqqhlzftqm-8{list-style-type:none}.lst-kix_67j48hi636wv-6>li:before{content:"\0025cf  "}ul.lst-kix_dygqqhlzftqm-7{list-style-type:none}.lst-kix_fzi2fyc6kicg-7>li:before{content:"\0025cb  "}.lst-kix_qx2879sjrnaj-6>li:before{content:"\0025cf  "}.lst-kix_pybtkz7ijq57-3>li:before{content:"\0025cf  "}.lst-kix_i7rj1rz28ohe-6>li:before{content:"\0025cf  "}ul.lst-kix_dygqqhlzftqm-0{list-style-type:none}ul.lst-kix_dygqqhlzftqm-1{list-style-type:none}ul.lst-kix_dygqqhlzftqm-2{list-style-type:none}.lst-kix_sdl0hitb0cmu-6>li:before{content:"\0025cf  "}.lst-kix_894weqd38n83-2>li:before{content:"\0025a0  "}ul.lst-kix_sdl0hitb0cmu-6{list-style-type:none}ul.lst-kix_88zhhulpx2mj-4{list-style-type:none}ul.lst-kix_sdl0hitb0cmu-7{list-style-type:none}ul.lst-kix_88zhhulpx2mj-3{list-style-type:none}.lst-kix_vtze6t2zaf6v-1>li:before{content:"\0025cb  "}ul.lst-kix_sdl0hitb0cmu-8{list-style-type:none}ul.lst-kix_88zhhulpx2mj-6{list-style-type:none}ul.lst-kix_88zhhulpx2mj-5{list-style-type:none}ul.lst-kix_sdl0hitb0cmu-2{list-style-type:none}ul.lst-kix_88zhhulpx2mj-8{list-style-type:none}ul.lst-kix_sdl0hitb0cmu-3{list-style-type:none}ul.lst-kix_88zhhulpx2mj-7{list-style-type:none}ul.lst-kix_sdl0hitb0cmu-4{list-style-type:none}ul.lst-kix_sdl0hitb0cmu-5{list-style-type:none}ul.lst-kix_88zhhulpx2mj-0{list-style-type:none}ul.lst-kix_88zhhulpx2mj-2{list-style-type:none}ul.lst-kix_88zhhulpx2mj-1{list-style-type:none}.lst-kix_dygqqhlzftqm-7>li:before{content:"\0025cb  "}.lst-kix_kmxc1gxplzqf-5>li:before{content:"\0025cf  "}.lst-kix_rr72dbc52mfr-8>li:before{content:"\0025a0  "}.lst-kix_y9p72vfeb2dg-3>li:before{content:"\0025cf  "}.lst-kix_9lacosnr1i9j-4>li:before{content:"\0025cb  "}.lst-kix_io5aoygbg06t-4>li:before{content:"\0025cb  "}.lst-kix_muvo9icko027-8>li:before{content:"\0025a0  "}.lst-kix_k6m2fush27ta-4>li:before{content:"\0025cb  "}.lst-kix_lf4yh4qagrta-7>li:before{content:"\0025cb  "}.lst-kix_cy93osahw99c-8>li:before{content:"\0025a0  "}.lst-kix_735cwea6feyk-8>li:before{content:"\0025a0  "}.lst-kix_uqj9jpbvf02w-0>li:before{content:"\002794  "}.lst-kix_5sqcbiptdqn7-4>li:before{content:"\0025cb  "}.lst-kix_s770phrpuorz-3>li:before{content:"\0025cb  "}.lst-kix_mg9e1w3u35k7-2>li:before{content:"\0025a0  "}.lst-kix_szvnggo6wxn7-1>li:before{content:"\0025cb  "}ul.lst-kix_sdl0hitb0cmu-1{list-style-type:none}ul.lst-kix_sdl0hitb0cmu-0{list-style-type:none}.lst-kix_c8b3326ntei0-6>li:before{content:"\0025cf  "}.lst-kix_r93hjw9ovjrk-5>li:before{content:"\0025a0  "}.lst-kix_k2fvcf9utpyv-7>li:before{content:"\0025cb  "}.lst-kix_517nsqdw77bj-8>li:before{content:"\0025a0  "}.lst-kix_517nsqdw77bj-6>li:before{content:"\0025cf  "}.lst-kix_eao6gb4vsoue-7>li:before{content:"\0025cb  "}.lst-kix_gpy5gjdtksic-7>li:before{content:"\0025cb  "}ul.lst-kix_v3euetjabtir-8{list-style-type:none}ul.lst-kix_v3euetjabtir-7{list-style-type:none}ul.lst-kix_v3euetjabtir-6{list-style-type:none}ul.lst-kix_v3euetjabtir-5{list-style-type:none}ul.lst-kix_v3euetjabtir-4{list-style-type:none}ul.lst-kix_v3euetjabtir-3{list-style-type:none}ul.lst-kix_v3euetjabtir-1{list-style-type:none}ul.lst-kix_v3euetjabtir-2{list-style-type:none}ul.lst-kix_v3euetjabtir-0{list-style-type:none}.lst-kix_lf4yh4qagrta-8>li:before{content:"\0025a0  "}.lst-kix_cbdffzxl4qg-7>li:before{content:"\0025cb  "}.lst-kix_5gbbkyi6eio8-6>li:before{content:"\0025cf  "}.lst-kix_u4ps4nrrh7jp-3>li:before{content:"\0025cf  "}.lst-kix_gxavlumdtb4m-0>li:before{content:"\002794  "}.lst-kix_k6kg1hoy3czh-5>li:before{content:"\0025a0  "}.lst-kix_517nsqdw77bj-0>li:before{content:"\0025cf  "}ol{margin:0;padding:0}.c75{border-bottom-width:1pt;border-top-style:solid;width:469.5pt;border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-bottom-style:solid;vertical-align:top;border-top-color:#000000;border-left-color:#000000;border-right-color:#000000;border-left-style:solid;border-right-width:1pt;border-left-width:1pt}.c30{border-bottom-width:1pt;border-top-style:solid;width:468pt;border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-bottom-style:solid;vertical-align:top;border-top-color:#000000;border-left-color:#000000;border-right-color:#000000;border-left-style:solid;border-right-width:1pt;border-left-width:1pt}.c62{border-bottom-width:0pt;border-top-style:solid;width:234pt;border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-bottom-style:solid;vertical-align:top;border-top-color:#000000;border-left-color:#000000;border-right-color:#000000;border-left-style:solid;border-right-width:0pt;border-left-width:0pt}.c34{padding-left:0pt;line-height:1.15;padding-top:0pt;text-align:left;margin-left:36pt;padding-bottom:10pt}.c41{padding-top:15pt;widows:2;margin-right:2pt;orphans:2;padding-bottom:9pt}.c0{line-height:1.15;padding-top:0pt;text-align:left;direction:ltr;padding-bottom:0pt}.c11{color:#0d1993;font-size:10pt;font-family:"Ubuntu";text-decoration:underline}.c5{vertical-align:baseline;font-style:normal;text-decoration:none;font-weight:normal}.c16{vertical-align:baseline;font-style:italic;text-decoration:none;font-weight:normal}.c20{line-height:1.0;padding-top:0pt;text-align:left;padding-bottom:0pt}.c53{line-height:1.15;padding-top:0pt;text-align:justify;padding-bottom:0pt}.c19{color:#313131;font-size:10pt;font-family:"Ubuntu"}.c73{margin-right:auto;border-collapse:collapse;margin-left:-1.5pt}.c1{color:#660066;font-size:9pt;font-family:"Consolas"}.c2{color:#000000;font-size:9pt;font-family:"Consolas"}.c10{color:#008800;font-size:9pt;font-family:"Consolas"}.c28{color:#880000;font-size:9pt;font-family:"Consolas"}.c4{color:#006666;font-size:9pt;font-family:"Consolas"}.c15{color:#000088;font-size:9pt;font-family:"Consolas"}.c3{color:#666600;font-size:9pt;font-family:"Consolas"}.c43{font-size:8pt;background-color:#ffffff;font-weight:normal}.c35{color:#1155cc;font-size:10pt;text-decoration:underline}.c58{vertical-align:baseline;font-style:normal;text-decoration:none}.c18{margin-right:auto;border-collapse:collapse}.c21{color:inherit;text-decoration:inherit}.c6{font-size:8pt;font-family:"Ubuntu"}.c50{font-size:8pt;background-color:#ffffff}.c25{margin:0;padding:0}.c26{font-size:12pt;font-family:"Ubuntu"}.c7{height:11pt;direction:ltr}.c36{font-size:9pt;font-family:"Consolas"}.c57{color:#98181d;font-family:"Arial"}.c49{font-size:21pt;font-family:"Trebuchet MS"}.c14{padding-left:0pt;margin-left:72pt}.c31{font-size:11pt;font-family:"Arial"}.c46{color:#1155cc;text-decoration:underline}.c54{widows:2;orphans:2}.c79{max-width:468pt;padding:72pt 72pt 72pt 72pt}.c55{color:#666666;font-size:13pt}.c38{padding-left:0pt;margin-left:36pt}.c27{margin:5px;border:1px solid black}.c71{color:#0433ff}.c80{color:#7a4779}.c12{page-break-after:avoid}.c66{text-decoration:line-through}.c69{text-indent:36pt}.c78{color:#009193}.c17{height:0pt}.c60{margin-left:36pt}.c63{color:#008f00}.c59{color:#999999}.c13{color:#011993}.c48{color:#302ce3}.c33{font-family:"Ubuntu"}.c77{color:#cc0000}.c37{text-align:left}.c64{background-color:#ffffff}.c56{color:#cccccc}.c74{color:#6aa84f}.c51{text-decoration:underline}.c67{color:#313131}.c65{font-size:18pt}.c72{font-size:6pt}.c76{color:#0d1993}.c22{color:#000000}.c8{height:11pt}.c45{font-size:7pt}.c61{text-align:right}.c9{direction:ltr}.c42{padding-top:10pt}.c44{font-size:9pt}.c32{text-align:center}.c70{color:#222222}.c52{font-size:14pt}.c68{color:#0b5394}.c23{font-style:italic}.c39{color:#941100}.c24{font-weight:bold}.c40{font-size:10pt}.c47{padding-bottom:5pt}.c29{color:#424242}.title{widows:2;padding-top:0pt;line-height:1.15;orphans:2;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}.subtitle{widows:2;padding-top:0pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt;page-break-after:avoid}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{widows:2;padding-top:10pt;line-height:1.15;orphans:2;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}h2{widows:2;padding-top:10pt;line-height:1.15;orphans:2;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt;page-break-after:avoid}h3{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt;page-break-after:avoid}h4{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}h5{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}h6{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}</style></head><body class="c64 c79"><p class="c9 c32"><span class="c33 c56">Livre</span><span class="c33 c56">&nbsp;blanc<br>#HTML5 #CANVAS</span></p><p class="c7 c32"><span class="c33 c56"></span></p><p class="c7 c32"><span class="c33 c56"></span></p><p class="c9 c32"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 304.00px; height: 399.00px;"><img alt="" src="images/image01.png" style="width: 304.00px; height: 399.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c9 c32"><span class="c26 c56 c23">.</span></p><p class="c9 c32"><span class="c33 c65 c68 c24">COMMENT CREER</span></p><p class="c9 c32"><span class="c33 c65 c24 c74">UN MOTEUR D&rsquo;AFFICHAGE 2D</span></p><p class="c9 c32"><span class="c33 c65 c24 c77">EN HTML5</span></p><p class="c7 c37"><span class="c26 c24"></span></p><p class="c7 c32"><span class="c26 c24"></span></p><p class="c7 c32"><span class="c26 c24"></span></p><p class="c7 c37"><span class="c26 c24"></span></p><p class="c9 c32"><span class="c26 c24">Nicolas LEGRAND</span><span class="c26">, formateur </span><span class="c26 c46"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Fwww.mediabox.fr%2Fformations-html-css.html&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFfjyj2cN7q34tf2APG-FFAqhFphA">MEDIABOX</a></span><span class="c26">.</span></p><p class="c7 c32"><span class="c33 c40 c51"></span></p><p class="c9 c32"><span class="c33 c35"><a class="c21" href="https://docs.google.com/document/d/1Ye1Ow72rHtskR3Lf_FdOPl4MsqWAl-rEsnt0K3QO05M/edit">Publication collaborative sur Google+</a></span></p><p class="c7 c32"><span class="c6"></span></p><p class="c7 c32"><span class="c6"></span></p><p class="c7 c32"><span class="c6"></span></p><p class="c7 c32"><span class="c6"></span></p><p class="c9 c32"><span class="c6 c59">Si vous souhaitez nous faire part d&rsquo;une am&eacute;lioration ou </span><span class="c6 c59">collaborer</span><span class="c6 c59">&nbsp;&agrave; la r&eacute;daction de cet openbook,<br>utilisez la fonction &ldquo;Comments&rdquo; disponible en haut &agrave; droite de cette fen&ecirc;tre.</span><hr style="page-break-before:always;display:none;"></p><p class="c9 c32"><span class="c33 c52 c24">SOMMAIRE</span></p><p class="c7"><span class="c33 c44 c24"></span></p><a href="#" name="dce523d2c356c605ae86c04527aa943c4776b923"></a><a href="#" name="0"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c62"><ul class="c25 lst-kix_kmxc1gxplzqf-0 start"><li class="c12 c9 c34 subtitle"><a name="h.tqgxabqodgs"></a><span class="c16 c55 c33">Petit rappel</span></li></ul><ul class="c25 lst-kix_kmxc1gxplzqf-1 start"><li class="c0 c14"><span class="c5 c6 c22">Javascript &amp; Ecmascript</span></li><li class="c0 c14"><span class="c5 c6 c22">HTML5 et canvas</span></li></ul><p class="c0 c8"><span class="c5 c6 c22"></span></p><ul class="c25 lst-kix_gxavlumdtb4m-0 start"><li class="c34 c12 c9 subtitle"><a name="h.dxiiu6llizf2"></a><span class="c16 c33 c55">Dessiner avec canvas </span></li></ul><ul class="c25 lst-kix_gxavlumdtb4m-1 start"><li class="c0 c14"><span class="c5 c6 c22">Fichier de base</span></li><li class="c0 c14"><span class="c5 c6 c22">Cr&eacute;er un canvas</span></li><li class="c0 c14"><span class="c5 c6 c22">Dessiner des primitives (lignes, cercles, carr&eacute;s)</span></li><li class="c0 c14"><span class="c5 c6 c22">Alpha, scale, rotation et translation</span></li><li class="c0 c14"><span class="c5 c6 c22">Cumul des transformations, sauvegarde et restauration du contexte.</span></li></ul><p class="c0 c8"><span class="c5 c6 c22"></span></p><ul class="c25 lst-kix_s770phrpuorz-0 start"><li class="c34 c12 c9 subtitle"><a name="h.2ozg9cemzuz5"></a><span class="c16 c55 c33">Dessiner une image</span></li></ul><ul class="c25 lst-kix_s770phrpuorz-1 start"><li class="c0 c14"><span class="c5 c6 c22">Charger une image (ou texture)</span></li><li class="c0 c14"><span class="c5 c6 c22">Dessiner une texture.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="c0 c14"><span class="c5 c6 c22">M&eacute;thodes de dessin avanc&eacute;es.</span></li><li class="c0 c14"><span class="c5 c6 c22">Dessiner &agrave; travers un masque.</span></li></ul><p class="c0 c8"><span class="c5 c6 c22"></span></p><ul class="c25 lst-kix_tx5h7vmpv05d-0 start"><li class="c34 c12 c9 subtitle"><a name="h.q2uaui22d1aj"></a><span class="c16 c55 c33">Structure de base du moteur 2D</span></li></ul><ul class="c25 lst-kix_tx5h7vmpv05d-1 start"><li class="c0 c14"><span class="c5 c6 c22">La POO en Javascript, le prototypage</span></li><li class="c0 c14"><span class="c5 c6 c22">H&eacute;ritage et ordre d&#39;inclusion</span></li><li class="c0 c14"><span class="c5 c6 c22">Namespace</span></li></ul><p class="c0 c8"><span class="c5 c6 c22"></span></p><ul class="c25 lst-kix_jovurqn7sb5d-0 start"><li class="c34 c12 c9 subtitle"><a name="h.ckx7dc1o8c1n"></a><span class="c16 c55 c33">Gestion des m&eacute;dias (ou assets)</span></li></ul><ul class="c25 lst-kix_jovurqn7sb5d-1 start"><li class="c0 c14"><span class="c5 c6 c22">Introduction aux spritesheets</span></li><li class="c0 c14"><span class="c5 c6 c22">Premi&egrave;re classe, la classe Texture</span></li><li class="c0 c14"><span class="c5 c6 c22">Gestion des Assets : AssetsLoader et AssetsManager</span></li><li class="c0 c14"><span class="c5 c6 c22">Regrouper toutes les textures en une seule, la classe TextureAtlas</span></li></ul><p class="c0 c8"><span class="c5 c6 c22"></span></p><ul class="c25 lst-kix_72psm7aw3mgv-0 start"><li class="c34 c12 c9 subtitle"><a name="h.79wul11wert5"></a><span class="c16 c55 c33">Les bases de l&#39;affichage</span></li></ul><ul class="c25 lst-kix_72psm7aw3mgv-1 start"><li class="c0 c14"><span class="c5 c6 c22">Structure arborescente et DisplayList</span></li><li class="c0 c14"><span class="c5 c6 c22">Le point de d&eacute;part : La classe DisplayObject</span></li><li class="c0 c14"><span class="c5 c6 c22">Enfin des textures : La classe Bitmap</span></li><li class="c0 c14"><span class="c5 c6 c22">Objets imbriqu&eacute;s : La classe DisplayObjectContainer</span></li><li class="c0 c14"><span class="c5 c6 c22">Racine de la DisplayList : classe Stage</span></li></ul><p class="c0 c8"><span class="c5 c6 c22"></span></p><p class="c20 c7"><span class="c33 c22 c44 c24 c58"></span></p></td><td class="c62"><ul class="c25 lst-kix_uqj9jpbvf02w-0 start"><li class="c34 c12 c9 subtitle"><a name="h.s5416y7hr6kb"></a><span class="c16 c55 c33">Manipuler les objets : transformations &amp; calculs matriciels</span></li></ul><ul class="c25 lst-kix_uqj9jpbvf02w-1 start"><li class="c0 c14"><span class="c5 c6 c22">Le probl&egrave;me des transformations imbriqu&eacute;es.</span></li><li class="c0 c14"><span class="c5 c6 c22">Les matrices, pourquoi faire ?</span></li><li class="c0 c14"><span class="c5 c6 c22">Comment utiliser les matrices ?</span></li><li class="c0 c14"><span class="c5 c6 c22">Combiner les transformations d&#39;un enfant avec celles de son parent.</span></li><li class="c0 c14"><span class="c6">Impl&eacute;mentation des matrices &nbsp;dans le moteur.</span></li></ul><p class="c0 c8"><span class="c5 c33 c22 c44"></span></p><ul class="c25 lst-kix_uqj9jpbvf02w-0"><li class="c34 c12 c9 subtitle"><a name="h.k926nuldmhy0"></a><span class="c16 c55 c33">Mod&egrave;le &eacute;v&eacute;nementiel &amp; design pattern</span></li></ul><ul class="c25 lst-kix_uqj9jpbvf02w-1"><li class="c0 c14"><span class="c5 c6 c22">Pourquoi utiliser des &eacute;v&eacute;nements ? </span></li><li class="c0 c14"><span class="c5 c6 c22">Comment g&eacute;rer un mod&egrave;le &eacute;v&eacute;nementiel, le design pattern observer </span></li><li class="c0 c14"><span class="c5 c6 c22">Impl&eacute;mentation sur les objets d&#39;affichage</span></li></ul><p class="c0 c8"><span class="c5 c6 c22"></span></p><ul class="c25 lst-kix_uqj9jpbvf02w-0"><li class="c34 c12 c9 subtitle"><a name="h.63g6xde19wh5"></a><span class="c16 c55 c33">Collisions et &eacute;v&eacute;nements utilisateurs</span></li></ul><ul class="c25 lst-kix_uqj9jpbvf02w-1"><li class="c0 c14"><span class="c5 c6 c22">Comment d&eacute;tecter les &eacute;v&eacute;nements souris ? </span></li><li class="c0 c14"><span class="c5 c6 c22">Th&eacute;orie des collisions, les formules</span></li><li class="c0 c14"><span class="c5 c6 c22">Impl&eacute;mentation d&#39;une m&eacute;thode hitTest sur un DisplayObject</span></li></ul><p class="c0 c8"><span class="c5 c6 c22"></span></p><ul class="c25 lst-kix_uqj9jpbvf02w-0"><li class="c34 c12 c9 subtitle"><a name="h.bdh5howblyuv"></a><span class="c16 c55 c33">Les animations</span></li></ul><ul class="c25 lst-kix_uqj9jpbvf02w-1"><li class="c0 c14"><span class="c5 c6 c22">Comment animer ? </span></li><li class="c0 c14"><span class="c5 c6 c22">Retour sur les spritesheets</span></li><li class="c0 c14"><span class="c5 c6 c22">D&eacute;finir un mod&egrave;le de donn&eacute;es pour les animations</span></li><li class="c0 c14"><span class="c5 c6 c22">Cr&eacute;er une classe MovieClip permettant de jouer une animation.</span></li></ul><p class="c0 c8"><span class="c5 c6 c22"></span></p><ul class="c25 lst-kix_9l7bob7jy42l-0 start"><li class="c34 c12 c9 subtitle"><a name="h.5uo3s73f8ei8"></a><span class="c16 c55 c33">Les filtres</span></li></ul><ul class="c25 lst-kix_9l7bob7jy42l-1 start"><li class="c0 c14"><span class="c5 c6 c22">Base des filtres avec la balise canvas</span></li><li class="c0 c14"><span class="c5 c6 c22">Impl&eacute;mentation de la classe ImageFilter</span></li><li class="c0 c14"><span class="c6">Lier un ou plusieurs filtres &agrave; un objet d&#39;affichage</span></li></ul></td></tr></tbody></table><p class="c7"><span class="c33 c44"></span></p><hr style="page-break-before:always;display:none;"><p class="c7 c37"><span class="c26"></span></p><p class="c12 c9 c32 title"><a name="h.d5s1bm856a40"></a><span class="c33">Rapide Historique</span></p><p class="c7"><span class="c26"></span></p><p class="c12 c9 subtitle"><a name="h.cl42pgcedsy0"></a><span class="c33">Javascript &amp; Ecmascript</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 103.59px; height: 85.00px;"><img alt="" src="images/image05.png" style="width: 103.59px; height: 85.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c9"><span class="c19 c24">JavaScript</span><span class="c19">&nbsp;(abr&eacute;g&eacute; JS) est un </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FLangage_de_programmation&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHf1RJLb-uVQ675a6LtbuHlAoU4xQ">langage de programmation</a></span><span class="c19">&nbsp;de </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FLangage_de_script&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGfDMd_HmbpryRMjiWerMhUegH-fg">scripts</a></span><span class="c19">&nbsp;principalement utilis&eacute; dans les </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FPages_web&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHjgq73HB2_LefRXEUF6guMq50PlQ">pages web</a></span><span class="c19">&nbsp;interactives mais aussi c&ocirc;t&eacute; serveur</span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FJavaScript%23cite_note-1&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHokWF8Gt_fzsRCL7WzXlHJoE6cNw">1</a></span><span class="c19">. C&#39;est un langage </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FProgrammation_orient%25E9e_objet&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNE5x3Ydm2RD8e9BmeHoCVwaMnwCgw">orient&eacute; objet</a></span><span class="c19">&nbsp;&agrave; </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FProgrammation_orient%25E9e_prototype&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGmjlfia71DZZ5EUUEEKontIW0eQg">prototype</a></span><span class="c19">, c&#39;est-&agrave;-dire que les bases du langage et ses principales interfaces sont fournies par des </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FObjet_(informatique)&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFRNE86bVhpwkzMryUO1wuQQwF5vQ">objets</a></span><span class="c19">&nbsp;qui ne sont pas des </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FInstance_(programmation)&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGhl16VhLKL4_pgpnVUf-vpZ-le0A">instances</a></span><span class="c19">&nbsp;de </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FClasse_(informatique)&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFJhp98QUFWstDfCB0hVb2C7goXcg">classes</a></span><span class="c19">, mais qui sont chacun &eacute;quip&eacute;s de </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FConstructeur_(programmation_informatique)&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHo895laoBBzO0QYMjkQTgu_pBbkw">constructeurs</a></span><span class="c19">&nbsp;permettant de cr&eacute;er leurs propri&eacute;t&eacute;s, et notamment une propri&eacute;t&eacute; de prototypage qui permet d&#39;en cr&eacute;er des objets </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FH%25E9ritage_(informatique)&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHLb82Cp6xtFZcI-4xN-3YIyrvrIw">h&eacute;ritiers</a></span><span class="c19">&nbsp;personnalis&eacute;s.</span><span class="c33 c40">&nbsp;</span></p><p class="c7"><span class="c33 c40"></span></p><p class="c9"><span class="c19">Le langage a &eacute;t&eacute; cr&eacute;&eacute; en 1995 par </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FBrendan_Eich&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGSLZC0DwdnF8i76mstUY5FwTONgg">Brendan Eich</a></span><span class="c19">&nbsp;(Brendan Eich &eacute;tant membre du conseil d&#39;administration de la fondation Mozilla) pour le compte de </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FNetscape_Communications_Corporation&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEzUTeC0wGWJh0RnvIlS4so51EiTA">Netscape Communications Corporation</a></span><span class="c19">. Le langage, actuellement &agrave; la version 1.8.2 est une impl&eacute;mentation de la </span><span class="c33 c40">3e</span><span class="c19">&nbsp;version de la norme </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FECMAScript&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNET8IauFIMX2_18Q3Ic8158S9DP4Q">ECMA-262</a></span><span class="c19">&nbsp;qui int&egrave;gre &eacute;galement des &eacute;l&eacute;ments inspir&eacute;s du </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FLangage_Python&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEBYd5dulROjRT479yOFLHuZO7KNA">langage Python</a></span><span class="c19">. La version 1.8.5 du langage est pr&eacute;vue pour int&eacute;grer la </span><span class="c33 c40">5e</span><span class="c19">&nbsp;version du standard ECMA</span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FJavaScript%23cite_note-2&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGwe7YrAR-hW8ul4FQDZ_Pvbjqnzw">2</a></span><span class="c19">.</span><span class="c33 c40">&nbsp;</span></p><p class="c7"><span class="c33 c40"></span></p><p class="c9"><span class="c19 c24">ECMAScript</span><span class="c19">&nbsp;est un </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FLangage_de_programmation&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHf1RJLb-uVQ675a6LtbuHlAoU4xQ">langage de programmation</a></span><span class="c19">&nbsp;de type </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FLangage_de_script&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGfDMd_HmbpryRMjiWerMhUegH-fg">script</a></span><span class="c19">&nbsp;standardis&eacute; par </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FEcma_International&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEht2lzdVcgkJA2xpoNKk57V6xAxA">Ecma International</a></span><span class="c19">&nbsp;dans le cadre de la sp&eacute;cification ECMA-262. Il s&#39;agit donc d&#39;un standard, dont les sp&eacute;cifications sont mises en &oelig;uvre dans diff&eacute;rents langages script, comme </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FJavaScript&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGeTPIXLt8nALUCsnN5_ewxNLxjCQ">JavaScript</a></span><span class="c19">&nbsp;ou </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FActionScript&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGyNMO6mHkqP4n2rJvo_eBYmDSr8g">ActionScript</a></span><span class="c19">, ainsi qu&#39;en </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FC%252B%252B&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEaFuwtrvg_41NeR_FwliNgP0NDiA">C++</a></span><span class="c19">&nbsp;(norme 2011). C&#39;est un </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FLangage_de_programmation&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHf1RJLb-uVQ675a6LtbuHlAoU4xQ">langage de programmation</a></span><span class="c19">&nbsp;</span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FProgrammation_orient%25E9e_objet&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNE5x3Ydm2RD8e9BmeHoCVwaMnwCgw">orient&eacute; objet</a></span><span class="c19">.</span><span class="c33 c40">&nbsp;</span></p><p class="c7"><span class="c33 c40"></span></p><p class="c9 c47"><span class="c19">En d&eacute;cembre 1995, </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FSun_Microsystems&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGUni9nF7doNrjexMq6hs25dbm8ZA">Sun</a></span><span class="c19">&nbsp;et </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FNetscape_Communications_Corporation&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEzUTeC0wGWJh0RnvIlS4so51EiTA">Netscape</a></span><span class="c19">&nbsp;</span><span class="c33 c51 c40 c80"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Fwp.netscape.com%2Fnewsref%2Fpr%2Fnewsrelease67.html%2F&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEcD4aGhmdHdaD2p_9lmonFT8ILbQ">annoncent (en)</a></span><span class="c19">&nbsp;la sortie de </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FJavaScript&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGeTPIXLt8nALUCsnN5_ewxNLxjCQ">JavaScript</a></span><span class="c19">. En mars 1996, Netscape impl&eacute;mente le moteur JavaScript dans son navigateur web </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FNetscape_Navigator&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFn1ntpbgPROwFRChusmLbfouU4zA">Netscape Navigator</a></span><span class="c19">&nbsp;2.0. Le succ&egrave;s de ce navigateur contribue &agrave; l&#39;adoption rapide de JavaScript dans le d&eacute;veloppement web orient&eacute; client. </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FMicrosoft&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFfluPRwA59bDJojWczwJaq_eW_fQ">Microsoft</a></span><span class="c19">&nbsp;r&eacute;agit alors en d&eacute;veloppant </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FJScript&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHZUzbb7tvktZosmP0Ny24z66bEpA">JScript</a></span><span class="c19">, qu&#39;il inclut ensuite dans </span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FInternet_Explorer&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFJZl_HGSo_hWD-R83yzOS1FMwvnw">Internet Explorer</a></span><span class="c19">&nbsp;3.0 en ao&ucirc;t 1996 pour la sortie de son navigateur.</span></p><p class="c9 c47"><span class="c19">Netscape soumet alors JavaScript &agrave; l&#39;</span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FEcma_International&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEht2lzdVcgkJA2xpoNKk57V6xAxA">ECMA</a></span><span class="c19">&nbsp;pour standardisation. Les travaux d&eacute;butent en novembre 1996, et se terminent en juin 1997 par l&#39;adoption du nouveau standard </span><span class="c19 c24">ECMAScript</span><span class="c19">. Les sp&eacute;cifications sont r&eacute;dig&eacute;es dans le document </span><span class="c19 c24">Standard ECMA-262</span><span class="c19">.</span></p><p class="c7"><span class="c33 c67 c45"></span></p><p class="c7"><span class="c33 c45 c67"></span></p><p class="c12 c9 subtitle"><a name="h.l9lol6hcelqm"></a><span class="c33">HTML5 et Canvas</span></p><p class="c9"><span class="c19 c24">HTML5 </span><span class="c19">(</span><span class="c19 c23 c24">HyperText Markup Language 5</span><span class="c19">) est la prochaine r&eacute;vision majeure d&#39;</span><span class="c33 c51 c40"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FHTML&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFoCpe7fU_n3tTWVLnrCnRIpw5A_w">HTM</a></span><span class="c33 c40 c76">L </span><span class="c19">(</span><span class="c11"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FFormat_de_donn%25E9es&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHMksKBfIN1Pd2x9o8ji942kFYoSg">format de donn&eacute;es</a></span><span class="c19">&nbsp;</span><span class="c33 c40">con&ccedil;u pour repr&eacute;senter les </span><span class="c33 c51 c40"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Ffr.wikipedia.org%2Fwiki%2FPages_web&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHjgq73HB2_LefRXEUF6guMq50PlQ">pages web</a></span><span class="c33 c40">). Cette version est en d&eacute;veloppement en 2013 et est appell&eacute;e &agrave; devenir le prochain standard du web en mati&egrave;re de d&eacute;veloppement d&#39;applications riches sur internet (RIA). Elle apporte certaines innovations qui manquaient au langage tout en se payant le luxe d&#39;&ecirc;tre int&eacute;gr&eacute;e au navigateur, offrant ainsi une alternative &agrave; certaines technologies propri&eacute;taires comme Flash ou Unity, tout en bas&eacute;es elles, sur des plugins. L&#39;une des grandes innovations de cette nouvelle mouture est la mise &agrave; disposition de la balise &quot;canvas&quot; et de toute une API de dessin permettant au programmeur de r&eacute;aliser du contenu interactif de type jeu vid&eacute;o, chat webcam, manipulation de vid&eacute;o, connexion &agrave; un serveur de sockets etc... Jusqu&#39;ici, d&eacute;velopper ce type de contenu avec les anciennes normes &eacute;tait extr&ecirc;ment difficile sinon impossible.</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 64.00px; height: 64.00px;"><img alt="" src="images/image03.png" style="width: 64.00px; height: 64.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c9"><span class="c33 c40">En suivant ce cours vous apprendrez &agrave; vous construire un moteur d&rsquo;affichage 2</span><span class="c33 c40">d que nous nommero</span><span class="c33 c40">ns &ldquo;Tomahawk&rdquo;. La version pr&eacute;sent&eacute;e ici est une version p&eacute;dagogique, par cons&eacute;quent quelques erreurs ont pu se glisser ici et l&agrave;, n&rsquo;h&eacute;sitez pas &agrave; le signaler dans les commentaires.</span></p><p class="c7"><span class="c33 c40"></span></p><p class="c9"><span class="c33 c40">Sachez cependant que le moteur Tomahawk existe et qu&#39;il est disponible sur internet, il a pour vocation &agrave; &ecirc;tre am&eacute;lior&eacute; par une communaut&eacute; de d&eacute;veloppeurs toujours plus grande et comp&eacute;tente, peut &ecirc;tre vous ? </span></p><p class="c7"><span class="c33 c40"></span></p><p class="c9"><span class="c33 c40">Vous pourrez retrouver la version d&eacute;di&eacute;e &agrave; la production du moteur Tomahawk en ligne sur le github du projet &agrave; l&rsquo;adresse suivante: </span><span class="c35 c33"><a class="c21" href="https://www.google.com/url?q=https%3A%2F%2Fgithub.com%2Fthetinyspark%2Ftomahawk&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNE5LPhtJ_i4JQ6Gfc6VTr6Uv0N5ng">https://github.com/thetinyspark/tomahawk</a></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c7"><span class="c33 c40"></span></p><p class="c12 c9 c32 title"><a name="h.5lga5sjsrrap"></a><span class="c33">Dessiner avec canvas </span></p><p class="c7 c32"><span class="c26 c56"></span></p><p class="c12 c9 subtitle"><a name="h.jg28v6r5h979"></a><span class="c33">Fichier de base</span></p><p class="c9"><span class="c6">Nous allons commencer par cr&eacute;er un fichier de base pour notre application sur la base du mod&egrave;le suivant :</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">Fichier index.html</span></p><a href="#" name="897eb4010dc669901e741fda63e8880274ecfeb5"></a><a href="#" name="1"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">&lt;!DOCTYPE html&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;html</span><span class="c2">&nbsp;</span><span class="c1">lang</span><span class="c3">=</span><span class="c10">&quot;en&quot;&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;head&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;meta</span><span class="c2">&nbsp;</span><span class="c1">charset</span><span class="c3">=</span><span class="c10">&quot;utf-8&quot;&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;title&gt;&lt;/title&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;script</span><span class="c2">&nbsp;</span><span class="c1">type</span><span class="c3">=</span><span class="c10">&quot;text/javascript&quot;</span><span class="c2">&nbsp;</span><span class="c1">src</span><span class="c3">=</span><span class="c10">&quot;sample.js&quot;</span><span class="c15">&gt;&lt;/script&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;style</span><span class="c2">&nbsp;</span><span class="c1">type</span><span class="c3">=</span><span class="c10">&quot;text/css&quot;&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c5 c2">canvas</span></p><p class="c0"><span class="c5 c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border</span><span class="c3">:</span><span class="c2">&nbsp;</span><span class="c4">2px</span><span class="c5 c2">&nbsp;solid black;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background</span><span class="c3">-</span><span class="c2">color</span><span class="c3">:</span><span class="c5 c2">&nbsp;black;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><sup><a href="#cmnt1" name="cmnt_ref1">[a]</a></sup><sup><a href="#cmnt2" name="cmnt_ref2">[b]</a></sup></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;/style&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;/head&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;body&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">&lt;!-- La balise canvas que nous utiliserons dans le fichier sample.js--&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;canvas</span><span class="c2">&nbsp;</span><span class="c1">id</span><span class="c3">=</span><span class="c10">&quot;tomahawk&quot; width=&rdquo;800&rdquo; height=&rdquo;600&rdquo;</span><span class="c15">&gt;</span><span class="c15">&lt;/canvas&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;/body&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;/html&gt;</span></p></td></tr></tbody></table><p class="c7"><span class="c6 c23"></span></p><p class="c7"><span class="c6 c71"></span></p><p class="c9"><span class="c6 c23">Fichier sample.js</span></p><a href="#" name="ee1745f6ae842a3458229e37f2c95524624ae52e"></a><a href="#" name="2"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/* Point d&#39;entr&eacute;e de l&#39;application */</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">function</span><span class="c2">&nbsp;init</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">//code de notre Application</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/* </span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Quand</span><span class="c2">&nbsp;toutes les donn</span><span class="c3">&eacute;</span><span class="c2">es </span><span class="c36">sont </span><span class="c2">charg</span><span class="c3">&eacute;</span><span class="c2">es </span><span class="c3">(</span><span class="c2">&nbsp;DOM</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c1">Images</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c1">Sons</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c1">Vid</span><span class="c3">&eacute;</span><span class="c2">os etc </span><span class="c3">...</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">On</span><span class="c2">&nbsp;d</span><span class="c3">&eacute;</span><span class="c2">marre l</span><span class="c10">&#39;application par la fonction init</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window</span><span class="c3">.</span><span class="c2">onload </span><span class="c3">=</span><span class="c5 c2">&nbsp;init;</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Le fichier index.html est un fichier html5 simple, les seuls &eacute;lements notables sont: </span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_pybtkz7ijq57-0 start"><li class="c38 c9"><span class="c6">L&#39;inclusion d&#39;un fichier javascript nomm&eacute; &quot;</span><span class="c6 c23 c24">sample.js</span><span class="c6">&quot;</span></li><li class="c38 c9"><span class="c6">La pr&eacute;sence d&#39;une balise canvas dont l&#39;id est &quot;</span><span class="c6 c23 c24">tomahawk</span><span class="c6">&quot; ( nom de notre moteur ). </span></li><li class="c38 c9"><span class="c6">Le style css donn&eacute; &agrave; la balise en question</span><span class="c6">&nbsp;( &agrave; changer &agrave; votre convenance</span><span class="c6">&nbsp;)</span></li></ul><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Sur une base de code simple, nous allons pouvoir passer &agrave; la suite, cr&eacute;er un canvas et l&#39;utiliser. </span></p><p class="c7 c12 subtitle"><a name="h.9ansnfz4fa3f"></a></p><p class="c12 c9 subtitle"><a name="h.3lgyd2h7v0ab"></a><span class="c33">Cr&eacute;er un canvas</span></p><p class="c9"><span class="c6">Cr&eacute;er un canvas peut se faire de deux fa&ccedil;ons: </span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_qdqfzihooe6h-0 start"><li class="c38 c9"><span class="c6">soit de la mani&egrave;re la plus simple qui soit &ccedil;&agrave;d en ajoutant une balise canvas au sein du DOM ( dans le code html ).</span></li><li class="c38 c9"><span class="c6">soit en la cr&eacute;ant &agrave; l</span><span class="c6">&rsquo;aide</span><span class="c6">&nbsp;la programmation et en l&#39;ajoutant manuellement au DOM de la fa&ccedil;on suivante: </span></li></ul><p class="c9"><span class="c6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><a href="#" name="de92776f728de2f353d8ee0d7c5b9f8ab4a81009"></a><a href="#" name="3"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0 c60"><span class="c15">var</span><span class="c2">&nbsp;canvas </span><span class="c3">=</span><span class="c2">&nbsp;document</span><span class="c3">.</span><span class="c2">createElement</span><span class="c3">(</span><span class="c10">&quot;canvas&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document</span><span class="c3">.</span><span class="c2">getElementsByTagName</span><span class="c3">(</span><span class="c10">&quot;body&quot;</span><span class="c3">)[</span><span class="c4">0</span><span class="c3">].</span><span class="c2">appendChild</span><span class="c3">(</span><span class="c2">canvas</span><span class="c3">);</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Dans notre exemple, nous choisirons la m&eacute;thode num&eacute;ro 1, &ccedil;&agrave;d ajouter une balise canvas au code html.</span></p><p class="c9"><span class="c6">Notre fichier index.html en contient d&eacute;j&agrave; une, nous allons donc cr&eacute;er</span><span class="c6">&nbsp;un</span><span class="c6">e fonction pour la retrouver.</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="e85357aa637cfb0c40159ff458f9bb98df5c35f0"></a><a href="#" name="4"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0 c60"><span class="c28">/*</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Retourne</span><span class="c2">&nbsp;une r</span><span class="c3">&eacute;</span><span class="c2">f</span><span class="c3">&eacute;</span><span class="c2">rence </span><span class="c3">&agrave;</span><span class="c2">&nbsp;l</span><span class="c10">&#39;objet canvas cr&eacute;e &agrave; l&#39;</span><span class="c5 c2">aide de la balise </span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;plac</span><span class="c3">&eacute;</span><span class="c5 c2">e dans le code html</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">function</span><span class="c2">&nbsp;getCanvas</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;document</span><span class="c3">.</span><span class="c2">getElementById</span><span class="c3">(</span><span class="c10">&quot;tomahawk&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">A l&#39;aide de cette m&eacute;thode, nous avons acc&egrave;s &agrave; l&#39;objet canvas, maintenant il nous faut pouvoir dessiner &agrave; l&#39;int&eacute;rieur. Pour ce faire nous allons d&#39;abord devoir r&eacute;cup&eacute;rer le contexte de l&#39;objet canvas, pour de plus amples informations sur ce qu&#39;est un contexte je vous invite &agrave; vous rendre sur le site du W3C.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Le contexte de l&#39;objet canvas se r&eacute;cup&egrave;re &agrave; l&#39;aide de la m&eacute;thode getContext de l&#39;objet Canvas de la fa&ccedil;on suivante :</span></p><p class="c7"><span class="c6"></span></p><p class="c69 c9"><span class="c6 c23">canvas.getContext(String contextMode);</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Ou canvas est une instance d&#39;un objet de type Canvas et contextMode est un param&egrave;tre de type string permettant de pr&eacute;ciser quel genre de contexte l&#39;on souhaite r&eacute;cup&eacute;rer (par exemple un contexte 2d ou un contexte webGL). </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Nous allons donc cr&eacute;er une m&eacute;thode nous permettant de r&eacute;cup&eacute;rer le contexte 2d de notre canvas.</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="c967601aeaee635d3ebbe3631bf1c118585dcaae"></a><a href="#" name="5"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0 c60"><span class="c28">/*</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Retourne</span><span class="c2">&nbsp;le contexte d</span><span class="c10">&#39;&eacute;x&eacute;cution 2d du canvas</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">function</span><span class="c2">&nbsp;getContext</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;getCanvas</span><span class="c3">().</span><span class="c2">getContext</span><span class="c3">(</span><span class="c10">&quot;2d&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Voil&agrave;, &agrave; pr&eacute;sent nous avons tout les outils n&eacute;c&eacute;ssaires pour pouvoir dessiner dans notre canvas. </span><hr style="page-break-before:always;display:none;"></p><p class="c12 c9 subtitle"><a name="h.2mmkhwi04u7c"></a><span class="c33">Dessiner des primitives ( lignes, cercles, carr&eacute;s... )</span></p><p class="c9"><span class="c6">HTML5 embarque toute une API d&eacute;di&eacute;e au dessin, ce qui permet aux d&eacute;veloppeurs de cr&eacute;er du </span></p><p class="c9"><span class="c6">contenu 2d sans avoir syst&eacute;matiquement recours &agrave; des images. A l&#39;aide cette API l&#39;on peut dessiner n&#39;importe quelle forme g&eacute;om&eacute;trique, voire m&ecirc;me des dessins plus complexes, la seule vraie limite est votre imagination. </span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_lmcct8x25krx-0 start"><li class="c38 c9"><span class="c24">Dessiner une ligne</span></li></ul><p class="c7"><span class="c6 c24"></span></p><p class="c9"><span class="c6">Commen&ccedil;ons par le plus simple, dessiner une ligne de couleur verte faisant 5px d&#39;&eacute;paisseur. </span></p><p class="c9"><span class="c6">En HTML5, toute op&eacute;ration de dessin se r&eacute;alise &agrave; l&#39;aide d&#39;un objet de type </span><span class="c6 c23">Context</span><span class="c6">, &ccedil;a tombe plut&ocirc;t bien, nous venons de cr&eacute;er une fonction nous permettant de r&eacute;cup&eacute;rer ce contexte !</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="89fb47a087eebd566658de18d896a58e2a692b46"></a><a href="#" name="6"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0 c60"><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;getContext</span><span class="c3">();</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">lineWidth </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">5;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">moveTo</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">lineTo</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">strokeStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&#39;#003300&#39;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">stroke</span><span class="c3">();</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Avant toute op&eacute;ration de dessin en HTML5, il nous faudra commencer par un &quot;</span><span class="c6 c23">beginPath</span><span class="c6">&quot; qui permet, comme son nom l&#39;indique, de commencer un &quot;</span><span class="c6 c23">chemin</span><span class="c6">&quot;, comprendre par l&agrave; que l&#39;on initialise un nouveau cycle de dessin, un peu comme si l&#39;on prenait une nouvelle feuille vierge pour dessiner.</span></p><p class="c9"><span class="c6">Faisons le point de ce que nous avons actuellement sur notre canvas.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Une ligne dont les propri&eacute;t&eacute;s sont :</span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_mtjq9ikkwgkg-0 start"><li class="c38 c9"><span class="c6">Une &eacute;paisseur de 5px d&eacute;finie par la propri&eacute;t&eacute; </span><span class="c6 c23">lineWidth</span><span class="c6">&nbsp;= 5</span></li><li class="c38 c9"><span class="c6">Une couleur d&eacute;finie par la propri&eacute;t&eacute; </span><span class="c6 c23">strokeStyle = &#39;#003300&#39;</span></li><li class="c38 c9"><span class="c6">Un point de d&eacute;part situ&eacute; &agrave; x = 0px et y = 0px que nous avons </span></li><li class="c38 c9"><span class="c6">d&eacute;fini avec l&#39;appel &agrave; la fonction moveTo( 0, 0 )</span></li><li class="c38 c9"><span class="c6">Un point d&#39;arriv&eacute;e situ&eacute; &agrave; x = 100px et y = 100px que nous avons reli&eacute; au point de d&eacute;part</span></li><li class="c38 c9"><span class="c6">en faisant appel &agrave; la fonction lineTo( 100, 100 ), qui relie le dernier point dessin&eacute; au point</span></li><li class="c38 c9"><span class="c6">dont les coordonn&eacute;es sont pass&eacute;es en param&egrave;tres.</span></li></ul><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Vous pouvez remarquer que la derni&egrave;re ligne de notre code se termine par &quot;</span><span class="c6 c23">context,stroke();</span><span class="c6">&quot;, cette m&eacute;thode permet de dessiner l&#39;ensemble du jeu d&#39;instructions d&eacute;finis entre l&#39;appel &agrave; &quot;</span><span class="c6 c23">context,beginPath()</span><span class="c6">&quot; et &quot;</span><span class="c6 c23">context.stroke()</span><span class="c6">&quot;, si vous commentez l&#39;appel &agrave; cette m&eacute;thode, rien ne sera dessin&eacute;. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Notez &eacute;galement que &quot;</span><span class="c6 c23">context.stroke()</span><span class="c6">&quot; n&#39;&eacute;x&eacute;cute que les jeux d&#39;instructions relatifs aux </span><span class="c6 c24">lignes </span><span class="c6">&nbsp;et pas aux formes pleines, ces derni&egrave;res sont g&eacute;r&eacute;es de mani&egrave;re diff&eacute;rente, ce qui nous am&egrave;ne &agrave; la suite, dessiner des primitives &quot;pleines&quot;, en commen&ccedil;ant par le cercle.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_438f8zvxynha-0 start"><li class="c54 c38 c9"><span class="c24">Dessiner un cercle :</span></li></ul><p class="c7"><span class="c6 c24"></span></p><p class="c9"><span class="c6">Si je souhaite dessiner un cercle, je peux utiliser la m&eacute;thode suivante:</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c33 c45">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c6 c23">context.arc(</span><span class="c6 c23 c29">x, y, radius, startAngle, endAngle, counterClockwis</span><span class="c6 c29">e</span><span class="c6">);</span></p><p class="c7"><span class="c33 c45"></span></p><p class="c9"><span class="c6">Ou &quot;</span><span class="c6 c23">x</span><span class="c6">&quot; et &quot;</span><span class="c6 c23">y&quot;</span><span class="c6">&nbsp;repr&eacute;sentent les coordonn&eacute;es du centre de mon arc, &quot;</span><span class="c6 c23">radius</span><span class="c6">&quot; le rayon ( en pixels ) de mon arc, &quot;</span><span class="c6 c23">startAngle</span><span class="c6">&quot; et &quot;</span><span class="c6 c23">endAngle</span><span class="c6">&quot; les angles de d&eacute;part et d&#39;arriv&eacute;e ( </span><span class="c6 c24">en radians</span><span class="c6">&nbsp;) et enfin, &quot;</span><span class="c6 c23">counterClockwise</span><span class="c6">&quot; est un bool&eacute;en qui sert &agrave; d&eacute;finir si l&#39;arc est d&eacute;fini dans le sens anti-horaire ou non. Etudions &agrave; pr&eacute;sent le code suivant :</span></p><p class="c9"><span class="c6 c63">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><a href="#" name="b8d41d66be6f0a9f1a996792debcf642c9521567"></a><a href="#" name="7"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;getContext</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;toRadians </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">PI </span><span class="c3">/</span><span class="c2">&nbsp;</span><span class="c4">180;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;startAngle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c5 c2">&nbsp;toRadians;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;endAngle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">360</span><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c5 c2">&nbsp;toRadians;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;green&quot;;</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;context</span><span class="c3">.</span><span class="c2">moveTo</span><span class="c3">(</span><span class="c4">100</span><span class="c3">,</span><span class="c4">100</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">arc</span><span class="c3">(</span><span class="c4">100</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">50</span><span class="c3">,</span><span class="c2">&nbsp;startAngle</span><span class="c3">,</span><span class="c2">&nbsp;endAngle</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">false</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;context</span><span class="c3">.</span><span class="c2">lineTo</span><span class="c3">(</span><span class="c4">100</span><span class="c3">,</span><span class="c4">100</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Comme pour la ligne, faisons le point de ce que nous avons actuellement sur notre canvas.</span></p><p class="c9"><span class="c6">Une cercle dont les propri&eacute;t&eacute;s sont :</span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_phimkl267z48-0 start"><li class="c38 c9"><span class="c6">Une couleur de remplissage d&eacute;finie par la propri&eacute;t&eacute; </span><span class="c6 c23">fillStyle = &#39;green&#39;</span></li><li class="c38 c9"><span class="c6">Le centre de d&eacute;part situ&eacute; &agrave; x = 100px et y = 100px repr&eacute;sent&eacute;s par les 2 premiers param&egrave;tres</span></li><li class="c38 c9"><span class="c6">Un rayon de 50px repr&eacute;sent&eacute; par le 3&egrave;me param&egrave;tre</span></li><li class="c38 c9"><span class="c6">Un angle de d&eacute;part situ&eacute; &agrave; </span><span class="c6 c24">0 degr&eacute;s</span><span class="c6">&nbsp;et converti </span><span class="c6 c24">en radians</span><span class="c6">&nbsp;repr&eacute;sent&eacute; par le 4&egrave;me param&egrave;tre</span></li><li class="c38 c9"><span class="c6">Un angle de d&eacute;part situ&eacute; &agrave; </span><span class="c6 c24">360 degr&eacute;s</span><span class="c6">&nbsp;et converti </span><span class="c6 c24">en radians</span><span class="c6">&nbsp;repr&eacute;sent&eacute; par le 5&egrave;me param&egrave;tre</span></li><li class="c38 c9"><span class="c6">Une direction dans le sens </span><span class="c6 c24">horaire </span><span class="c6">car le 6&egrave;me param&egrave;tre vaux </span><span class="c6 c23">false.</span></li></ul><p class="c7"><span class="c6 c23"></span></p><p class="c9"><span class="c6">Comme vous pouvez le constater, nous utilisons toujours la m&eacute;thode &quot;</span><span class="c6 c23">context.beginPath()</span><span class="c6">&quot; pour cr&eacute;er un nouveau dessin. Afin de pouvoir &eacute;x&eacute;cuter le nouveau jeu d&#39;instructions, relatif cette fois-ci &agrave; des </span><span class="c6 c24">formes pleins</span><span class="c6">, nous utilisons la m&eacute;thode &quot;</span><span class="c6 c23">context.fill()</span><span class="c6">&quot; qui agit de la m&ecirc;me fa&ccedil;on que la m&eacute;thode &quot;context.stroke()&quot;.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">En regardant un peu plus en avant l&#39;API de dessin l&#39;on peut s&#39;apercevoir qu&#39;il existe pas mal de m&eacute;thodes pour dessiner d&#39;autres primitives, ou d&#39;autres types de lignes, qu&#39;elles soient droites ou dessin&eacute;es &agrave; l&#39;aide de courbes de bezier etc.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">Exemple : </span></p><p class="c7"><span class="c6 c23"></span></p><p class="c9"><span class="c6 c23">Voici un exemple permettant de dessiner une ligne rouge puis un rectangle bleu pour enfin terminer par un cercle vert sur le m&ecirc;me canvas.</span></p><p class="c7"><span class="c6 c23"></span></p><a href="#" name="ecd0102eb034304ee25b0283d04764a033fe2104"></a><a href="#" name="8"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;getContext</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;toRadians </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">PI </span><span class="c3">/</span><span class="c2">&nbsp;</span><span class="c4">180;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;startAngle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c5 c2">&nbsp;toRadians;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;endAngle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">360</span><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c5 c2">&nbsp;toRadians;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">strokeStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;#FF0000&quot;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">lineWidth </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">5;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">moveTo</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">50</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">50</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">lineTo</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">150</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">200</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">stroke</span><span class="c3">();</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;blue&quot;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillRect</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">20</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">20</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c5 c10">&quot;green&quot;;</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;context</span><span class="c3">.</span><span class="c2">moveTo</span><span class="c3">(</span><span class="c4">100</span><span class="c3">,</span><span class="c4">100</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">arc</span><span class="c3">(</span><span class="c4">100</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">50</span><span class="c3">,</span><span class="c2">&nbsp;startAngle</span><span class="c3">,</span><span class="c2">&nbsp;endAngle</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">false</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;context</span><span class="c3">.</span><span class="c2">lineTo</span><span class="c3">(</span><span class="c4">100</span><span class="c3">,</span><span class="c4">100</span><span class="c5 c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Maintenant que nous savons comment dessiner des primitives, nous allons apprendre &agrave; les transformer, comprendre par l&agrave; que nous allons changer leur appliquer un changement d&#39;&eacute;chelle, de rotation, d&#39;alpha ou de translation.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c12 c9 subtitle"><a name="h.rsd311fvpzfi"></a><span>Alpha, Scale, Rotation et Translation</span></p><p class="c9"><span class="c6">Appliquer une transformation en HTML5 est facile, en effet l&#39;API met &agrave; notre disposition des m&eacute;thodes simples, la seule difficult&eacute; r&eacute;side dans le fait que </span><span class="c6 c24">ces m&eacute;thodes sont cumulatives </span><span class="c6">mais nous reviendrons plus tard l&agrave; dessus, pour l&#39;instant nous allons nous contenter d&#39;appliquer des transformations &agrave; un carr&eacute;. </span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_c8b3326ntei0-0 start"><li class="c38 c9"><span class="c33 c24">L&#39;alpha :</span></li></ul><p class="c7"><span class="c6 c24"></span></p><p class="c9"><span class="c6">Pour dessiner quelque chose en transparence en HTML5 on modifie la propri&eacute;t&eacute; :</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="9a8f75707eb6d83b5f053a478d0e9f1daf780297"></a><a href="#" name="9"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// pour d&eacute;finir la transparence &agrave; 50%</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2 c23">globalAlpha </span><span class="c3 c23">=</span><span class="c2 c23">&nbsp;</span><span class="c4">0.5;</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">La valeur de la propri&eacute;t&eacute; &quot;</span><span class="c6 c23">globalAlpha</span><span class="c6">&quot; du contexte se situe toujours entre 0 et 1, si, comme dans l&#39;exemple</span></p><p class="c9"><span class="c6">ci-dessus vous souhaitez obtenir un alpha de 50% il vous suffit de modifier la valeur de ce</span><span class="c6">tte propri&eacute;t&eacute; &agrave; 0.</span><span class="c6">5.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Facile n&#39;est-ce pas ? Par exemple si je veux dessiner un cercle avec un alpha de 50% par dessus un carr&eacute; mon code ressemblera &agrave; ceci : </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">Exemple:</span></p><a href="#" name="9eac3b06da920478598bb9b0c4c178af190ff122"></a><a href="#" name="10"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;getContext</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;toRadians </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">PI </span><span class="c3">/</span><span class="c2">&nbsp;</span><span class="c4">180;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;startAngle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c5 c2">&nbsp;toRadians;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;endAngle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">360</span><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c5 c2">&nbsp;toRadians;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;blue&quot;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillRect</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">25</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">25</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">globalAlpha </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0.5;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;green&quot;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">arc</span><span class="c3">(</span><span class="c4">100</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">50</span><span class="c3">,</span><span class="c2">&nbsp;startAngle</span><span class="c3">,</span><span class="c2">&nbsp;endAngle</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">false</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">On aper&ccedil;oit bien le carr&eacute; en transparence derri&egrave;re le cercle, essayez de jouer un peu avec les valeurs de l&#39;alpha, vous pouvez &eacute;galement changer la valeur de l&#39;alpha du carr&eacute; et remettre l&#39;alpha du cercle &agrave; 1 ( ou toute autre valeur ), c&#39;est vraiment facile !</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Vous avez sans doute remarqu&eacute; que jusqu&#39;ici nous avons d&eacute;fini les coordonn&eacute;es de nos primitives &agrave; l&#39;aide des param&egrave;tres fournis &agrave; cet effet, toutefois lors de vos futurs d&eacute;veloppements, vous verrez qu&#39;il n&#39;est pas forc&eacute;ment pratique de proc&eacute;der de la sorte. Le mieux encore serait de pouvoir dessiner nos objets aux coordonn&eacute;es 0, 0 et de les d&eacute;placer ensuite, &ccedil;a tombe plut&ocirc;t bien, la prochaine transformation que je compte vous montrer est la </span><span class="c6 c24">translation.</span></p><p class="c7"><span class="c6 c24"></span></p><p class="c7"><span class="c6 c24"></span></p><ul class="c25 lst-kix_fw801o12j8pc-0 start"><li class="c38 c9"><span class="c33 c24">La translation :</span></li></ul><p class="c7"><span class="c6 c24"></span></p><p class="c9"><span class="c6">Pour effectuer une translation en HTML5 on utilise la m&eacute;thode :</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.translate( translateX, translateY )</span><span class="c6 c23 c39">;</span></p><p class="c9"><span class="c6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c9"><span class="c6">Ou &quot;</span><span class="c6 c23">translateX</span><span class="c6">&quot; le d&eacute;placement sur l&#39;axe des x ( en pixels ) que vous souhaitez obtenir, et &quot;</span><span class="c6 c23">translateY</span><span class="c6">&quot; la m&ecirc;me chose mais sur l&#39;axe des y. Ainsi, pour dessiner un carr&eacute; rouge de 100 pixels de c&ocirc;t&eacute;s prenant son point d&#39;origine aux coordonn&eacute;es x = 47 et y = 72, j&#39;aurai &agrave; &eacute;crire le code suivant :</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">Exemple:</span></p><a href="#" name="379df0b10a299402329ae00e0c3ecf0d5cc08933"></a><a href="#" name="11"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;getContext</span><span class="c3">();</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">translate</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">47</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">72</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;red&quot;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillRect</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Notez que nous aurions tout aussi bien pu utiliser les deux premiers param&egrave;tres de la m&eacute;thode fillRect ( ce que nous faisions jusqu&#39;ici ), toutefois comme expliqu&eacute; plus haut, il vous sera plus utile d&#39;utiliser les m&eacute;thodes de transformations par la suite plut&ocirc;t que d&#39;utiliser ce type de param&egrave;tre.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Passons maintenant au changement d&#39;&eacute;chelle.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_lvbalc9n2puu-0 start"><li class="c38 c9"><span class="c33 c24">Le scale :</span></li></ul><p class="c7"><span class="c6 c24"></span></p><p class="c9"><span class="c6">Pour effectuer un changement d&#39;&eacute;chelle en HTML5 on utilise la m&eacute;thode :</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c6 c23">context.scale( scaleX, scaleY)</span><span class="c6 c23 c39">;</span></p><p class="c9"><span class="c6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c9"><span class="c6">Ou &quot;</span><span class="c6 c23">scaleX</span><span class="c6">&quot; est l&#39;&eacute;chelle sur l&#39;axe des x que vous souhaitez obtenir, et &quot;</span><span class="c6 c23">scaleY</span><span class="c6">&quot; la m&ecirc;me chose mais sur l&#39;axe des y. Ainsi, pour dessiner le m&ecirc;me carr&eacute; que dans l&#39;exemple pr&eacute;c&eacute;dent mais &agrave; une &eacute;chelle deux fois plus grande nous aurons le code suivant:</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">Exemple:</span></p><a href="#" name="d568f51625d20bcbcd5370d85e789ac113742e01"></a><a href="#" name="12"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;getContext</span><span class="c3">();</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">translate</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">47</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">72</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">scale</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">2</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">2</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;red&quot;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillRect</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Ainsi, nous obtenons </span><span class="c6 c24">un carr&eacute; de 100 pixels </span><span class="c6">de c&ocirc;t&eacute;s mais dont l</span><span class="c6 c24">&#39;&eacute;chelle est de 2</span><span class="c6">, ansi visuellement, j&#39;ai un carr&eacute; de 200 pixels de c&ocirc;t&eacute;s. Quel est l&#39;inter&ecirc;t de cette m&eacute;thode ? Pourquoi ne pas </span><span class="c6">directement dessiner un</span><span class="c6">&nbsp;carr&eacute; de 200 pixels de c&ocirc;t&eacute;s ? En plus on code moins ! </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Et bien l&#39;inter&ecirc;t principal est de ne </span><span class="c6 c24">pas avoir &agrave; recalculer la largeur et la hauteur d&#39;un objet d&#39;affichage</span><span class="c6">&nbsp;&agrave; chaque fois que l&#39;on souhaite changer son &eacute;chelle, de plus, ces calculs sont simples &agrave; r&eacute;aliser lorsque l&#39;objet en question n&#39;est pas en </span><span class="c6 c24">rotation</span><span class="c6">, mais d&egrave;s qu&#39;il s&#39;agit de calculer une largeur et une hauteur avec une rotation par dessus le march&eacute;, &ccedil;a devient plus compliqu&eacute; et </span><span class="c6 c24">plus co&ucirc;teux en ressources</span><span class="c6">. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Passons maintenant &agrave; la derni&egrave;re transformation, la rotation</span></p><p class="c7"><span class="c33 c72"></span></p><p class="c7"><span class="c33 c72"></span></p><ul class="c25 lst-kix_kyspjcvmpscx-0 start"><li class="c38 c9"><span class="c33 c24">La rotation :</span></li></ul><p class="c7"><span class="c6 c24"></span></p><p class="c9"><span class="c6">Avant de commencer, il me faut &eacute;claircir un point que nous avons omis de pr&eacute;ciser jusque l&agrave;, l&#39;unit&eacute; de mesure employ&eacute;e pour une rotation. En effet, alors que la plupart des gens comptent leurs angles en degr&eacute;s &nbsp;, en programmation graphique il est de coutume d&#39;employer le radian.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Vu que ce livre n&#39;a pas vocation &agrave; &ecirc;tre un cours de math&eacute;matiques je vais tout simplement vous donner la formule de conversion degr&eacute;s/radians et vous laisser approfondir ce point si vous le souhaitez ( internet fourmille de ressources sur la question ).</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">La formule de conversion degr&eacute;s/radians est la suivante :</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c6 c23">angle_radians = angle_degr&eacute; * ( </span><span class="c6 c23 c78">Math</span><span class="c6 c23">.PI / 180 );</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Nous l&#39;avons d&eacute;j&agrave; utilis&eacute; plus haut pour d&eacute;finir les angles de d&eacute;parts et de fin de notre arc.</span></p><p class="c9"><span class="c6">Maintenant nous savons que lorsqu&#39;on parlera d&#39;un angle, l&#39;on s&#39;exprimera par d&eacute;faut en radians</span></p><p class="c9"><span class="c6">et si l&#39;on change d&#39;unit&eacute; de mesure, je vous le pr&eacute;ciserai alors.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Bien, maintenant que tout le monde parle le m&ecirc;me langage, laissez-moi vous pr&eacute;senter la m&eacute;thode qui vous permettra d&#39;appliquer une rotation &agrave; vos objets: </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.rotate( angle_radian )</span><span class="c6 c23 c39">;</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Assez simple n&#39;est-ce pas ? Ainsi, pour continuer sur l&#39;exemple de notre carr&eacute; rouge, nous allons reprendre le code de tout &agrave; l&#39;heure et ajouter une rotation de 37&deg; &agrave; notre carr&eacute; :</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="e1fb998d24c317dc8d1b9e6eb52f4039a2bd8caa"></a><a href="#" name="13"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;getContext</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;toRadians </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">PI </span><span class="c3">/</span><span class="c2">&nbsp;</span><span class="c4">180;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">translate</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">47</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">72</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">scale</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">2</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">2</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">rotate</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">37</span><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;toRadians </span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;red&quot;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillRect</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Notez que toutes les rotations s&#39;effectuent dans le sens </span><span class="c6 c24">horaire</span><span class="c6">&nbsp;! Nous avons vu les transformations que nous voulions voir, nous y reviendrons plus tard. Il nous reste &agrave; voir le cumul des transformations, la sauvegarde et restauration du contexte et nous aurons termin&eacute; ce premier chapitre.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_uyezhlf50xkc-0 start"><li class="c38 c9"><span class="c33 c24">Cumul des transformations, sauvegarde et restauration du contexte :</span></li></ul><p class="c7"><span class="c6 c24"></span></p><p class="c9"><span class="c6">L&#39;objet </span><span class="c6 c23">context</span><span class="c6">&nbsp;utilise une </span><span class="c6 c24">matrice</span><span class="c6">&nbsp;pour r&eacute;presenter et stocker le r&eacute;sultat de toutes les transformations qu&#39;on lui applique. Nous ne nous &eacute;tendrons pas pour l&#39;instant sur ce qu&#39;est une matrice ni comment l&#39;utiliser, en revanche, sachez qu&#39;une des lois basiques des calculs matriciels est la </span><span class="c6 c24">commutativit&eacute;. </span></p><p class="c7"><span class="c6 c24"></span></p><p class="c9"><span class="c6">En clair, cela signifie que les transformations que l&#39;on applique &agrave; une matrice se cumulent et que l&#39;ordre dans lequel on les &eacute;x&eacute;cute influe sur le r&eacute;sultat obtenu.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Exemple:</span></p><a href="#" name="638c08780d4c769dbe777443de5c29d202d6af33"></a><a href="#" name="14"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;getContext</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// ici on applique une translation AVANT le scale</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">translate</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">47</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">72</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">scale</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">2</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">2</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;red&quot;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillRect</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;getContext</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// ici on applique une translation APRES le scale</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">scale</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">2</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">2</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">translate</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">47</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">72</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;red&quot;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillRect</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">On peut voir que le r&eacute;sultat obtenu &agrave; l&#39;&eacute;cran est diff&eacute;rent suivant si l&#39;on applique le scale </span><span class="c6 c24">avant</span><span class="c6">&nbsp;ou </span><span class="c6 c24">apr&egrave;s</span><span class="c6">&nbsp;la translation, tout cela est normal, la loi de commutativit&eacute; est en marche. Mais alors dans quel ordre appliquer mes transformations ? Et bien &ccedil;a c&#39;est &agrave; vous de le d&eacute;cider, bien qu&#39;en r&egrave;gle g&eacute;n&eacute;rale le r&eacute;sultat attendu n&eacute;c&eacute;ssite que l&#39;on applique dans l&#39;ordre une translation, une rotation et enfin l&#39;&eacute;chelle.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Et vous pensiez que c&#39;&eacute;tait fini ? Et bien non, en effet les transformations en html5 c&#39;est pas de la tarte ( enfin uniquement quand on y est pas habitu&eacute;, apr&egrave;s je vous rassure &ccedil;a roule tout seul ). </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Si je veux par exemple, d&eacute;finir une &eacute;chelle &agrave; 0,5 apr&egrave;s avoir l&#39;avoir d&eacute;finie &agrave; 2, &nbsp;le code suivant ne fonctionne pas:</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="f86670f9770f93535252d900cf2f529fc8212ad7"></a><a href="#" name="15"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;getContext</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">scale</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">2</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">2</span><span class="c2">&nbsp;</span><span class="c3">);</span><span class="c2">&nbsp;</span><span class="c28">// l&#39;&eacute;chelle est &agrave; 2</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">scale</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">0.5</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0.5</span><span class="c2">&nbsp;</span><span class="c3">); </span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// ici l&#39;&eacute;chelle ne vaut pas 0.5 MAIS 1 car j&#39;ai MULTIPLIE la valeur </span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// de l&#39;&eacute;chelle courante par 0.5, donc le r&eacute;sultat est 1, pour avoir une valeur d&#39;&eacute;chelle &agrave; 2, il aurait </span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// fallu que j&#39;applique un scale de 0,25</span></p></td></tr></tbody></table><p class="c7"><span class="c6 c63"></span></p><p class="c9"><span class="c6">Le probl&egrave;me de cette commutativit&eacute;, c&#39;est que je ne suis pas forc&eacute;ment au courant de l&#39;&eacute;tat actuel de ma matrice au moment ou je l&#39;utilise, donc cela peut me poser pas mal de probl&egrave;mes pour obtenir l&#39;&eacute;tat d&eacute;sir&eacute;. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Heureusement, il existe une parade &agrave; cela, la sauvegarde du contexte ! En effet, il est possible de stocker en m&eacute;moire l&#39;&eacute;tat du contexte et le restaurer par la suite. Cela fonctionne avec la paire de m&eacute;thodes suivantes:</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c6 c23">context.save()</span></p><p class="c9"><span class="c6 c23">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.restore()</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">La m&eacute;thode, &quot;</span><span class="c6 c23">context.save</span><span class="c6">&quot; permet de sauvegarder l&#39;&eacute;tat actuel du contexte, la m&eacute;thode &quot;</span><span class="c6 c23">context.restore</span><span class="c6">&quot; permet quand &agrave; elle de restituer l&#39;&eacute;tat du dernier contexte, c&#39;est-&agrave;-dire que les donn&eacute;es de transformations de la matrice ainsi que les donn&eacute;es de dessins etc... seront exactement les m&ecirc;mes que lors du dernier appel &agrave; &quot;</span><span class="c6 c23">context.save</span><span class="c6">&quot;</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Ces m&eacute;thodes fonctionnent un peu &agrave; la mani&egrave;re d&#39;une pile d&#39;assiettes, c&#39;est-&agrave;-dire que le dernier contexte sauvegard&eacute; ira &quot;</span><span class="c6 c23">au dessus</span><span class="c6">&quot; de la pile et donc, lors du prochain appel &agrave; &quot;</span><span class="c6 c23">context.restore()</span><span class="c6">&quot; ce sera cette derniere &quot;</span><span class="c6 c23">assiette&quot; </span><span class="c6">qui sera restitu&eacute;e.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Dans l&#39;exemple suivant, je dessine 4 carr&eacute;s, tous de la m&ecirc;me taille mais avec des transformations diff&eacute;rentes. L&#39;utilisation de &quot;</span><span class="c6 c23">context.save</span><span class="c6">&quot; et &quot;</span><span class="c6 c23">context.restore&quot;</span><span class="c6">&nbsp;est indispensable pour pouvoir r&eacute;cup&eacute;rer l&#39;&eacute;tat da la pr&eacute;c&eacute;dente matrice.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">Exemple :</span></p><a href="#" name="69cb00f694bfda34c95614654a286a7127653c75"></a><a href="#" name="16"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;getContext</span><span class="c3">();</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">save</span><span class="c3">();</span><span class="c2">&nbsp;</span><span class="c28">// sauvegarde 1</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">translate</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">50</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">50</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">scale</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">2</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">2</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;red&quot;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillRect</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">save</span><span class="c3">();</span><span class="c2">&nbsp;</span><span class="c28">// sauvegarde 2, ici les transformations et les param&egrave;tres de dessins sont sauv&eacute;s.</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">rotate</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">60</span><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">PI </span><span class="c3">/</span><span class="c2">&nbsp;</span><span class="c4">180</span><span class="c2">&nbsp;</span><span class="c3">)</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;green&quot;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillRect</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">restore</span><span class="c3">();</span><span class="c2">&nbsp;</span><span class="c28">// restaure la 2&egrave;me sauvegarde</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;blue&quot;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillRect</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">50</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">50</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">restore</span><span class="c3">();</span><span class="c2">&nbsp;</span><span class="c28">// restaure la 1&egrave;re sauvegarde</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;purple&quot;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.fillRect( 0, 0, 100, 100 );</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Voil&agrave;, les bases des transformations et du dessin avec canvas sont pos&eacute;es, nous venons de clot&ucirc;rer ce premier chapitre.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7 c12 c32 title"><a name="h.leqxfxgwqfl0"></a></p><hr style="page-break-before:always;display:none;"><p class="c12 c9 c32 title"><a name="h.5ipken8qim5t"></a><span>Dessiner une image</span></p><p class="c7 c32"><span class="c26"></span></p><p class="c9"><span class="c6">Nous allons maintenant passer au dessin d&#39;image en HTML5.</span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_pq2bm5pgk3f8-0 start"><li class="c38 c9"><span class="c33 c24">Charger une image ( ou texture )</span></li></ul><p class="c7"><span class="c33 c24 c44"></span></p><p class="c9"><span class="c6">En Javascript, il est tr&egrave;s simple de charger une image, aussi appel&eacute;e texture dans le domaine du jeu vid&eacute;o (d&#39;ailleurs nous utiliserons ce terme dor&eacute;navant). En effet, il y a de multiples fa&ccedil;ons de faire, pour le besoin de ce chapitre nous utiliserons la plus simple qui est d&#39;inclure les images directement dans la structure html. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Il nous suffira alors de d&eacute;marrer le script au chargement total de la page et pour &ccedil;a nous utiliserons l&#39;&eacute;venement natif javascript </span><span class="c6 c24">window.onload</span><span class="c6">.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">Exemple</span><span class="c6">:</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">index.html</span></p><a href="#" name="830c5a92e9236909369007b504b04d5fbc1e7df7"></a><a href="#" name="17"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c1">&lt;!DOCTYPE html&gt;</span></p><p class="c0"><span class="c15">&lt;html</span><span class="c2">&nbsp;</span><span class="c1">lang</span><span class="c3">=</span><span class="c10">&quot;en&quot;&gt;</span></p><p class="c0"><span class="c15">&lt;head&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;meta</span><span class="c2">&nbsp;</span><span class="c1">charset</span><span class="c3">=</span><span class="c10">&quot;utf-8&quot;&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;title&gt;&lt;/title&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;script</span><span class="c2">&nbsp;</span><span class="c1">type</span><span class="c3">=</span><span class="c10">&quot;text/javascript&quot;</span><span class="c2">&nbsp;</span><span class="c1">src</span><span class="c3">=</span><span class="c10">&quot;sample.js&quot;</span><span class="c15">&gt;&lt;/script&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;style</span><span class="c2">&nbsp;</span><span class="c1">type</span><span class="c3">=</span><span class="c10">&quot;text/css&quot;&gt;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canvas</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border</span><span class="c3">:</span><span class="c2">&nbsp;</span><span class="c4">2px</span><span class="c5 c2">&nbsp;solid black;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background</span><span class="c3">-</span><span class="c2">color</span><span class="c3">:</span><span class="c5 c2">&nbsp;black;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;/style&gt;</span></p><p class="c0"><span class="c15">&lt;/head&gt;</span></p><p class="c0"><span class="c15">&lt;body&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;canvas</span><span class="c2">&nbsp;</span><span class="c1">id</span><span class="c3">=</span><span class="c10">&quot;tomahawk&quot;</span><span class="c2">&nbsp;</span><span class="c1">width</span><span class="c3">=</span><span class="c10">&quot;800&quot;</span><span class="c2">&nbsp;</span><span class="c1">height</span><span class="c3">=</span><span class="c10">&quot;600&quot;</span><span class="c15">&gt;&lt;/canvas&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;img</span><span class="c2">&nbsp;</span><span class="c1">src</span><span class="c3">=</span><span class="c10">&quot;perso1.png&quot;</span><span class="c2">&nbsp;</span><span class="c1">id</span><span class="c3">=</span><span class="c10">&quot;perso1&quot;</span><span class="c15">/&gt;</span></p><p class="c0"><span class="c15">&lt;/body&gt;</span></p><p class="c0"><span class="c15">&lt;/html&gt;</span></p></td></tr></tbody></table><p class="c7"><span class="c6 c48"></span></p><p class="c7"><span class="c6 c48"></span></p><p class="c7"><span class="c6 c48"></span></p><p class="c7"><span class="c6 c48"></span></p><p class="c7"><span class="c6 c48"></span></p><p class="c7"><span class="c6 c48"></span></p><p class="c7"><span class="c6 c48"></span></p><p class="c9"><span class="c6">sample.js</span></p><a href="#" name="1fe70a752fb4344cca349a93226ba2cd5d0dfcff"></a><a href="#" name="18"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c5 c28">/*</span></p><p class="c0"><span class="c5 c28">* Retourne une r&eacute;f&eacute;rence &agrave; l&#39;objet canvas</span></p><p class="c0"><span class="c28">*/</span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;getCanvas</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;document</span><span class="c3">.</span><span class="c2">getElementById</span><span class="c3">(</span><span class="c10">&quot;tomahawk&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c3">}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c5 c28">/*</span></p><p class="c0"><span class="c5 c28">* Retourne le contexte d&#39;&eacute;x&eacute;cution 2d du canvas</span></p><p class="c0"><span class="c28">*/</span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;getContext</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;getCanvas</span><span class="c3">().</span><span class="c2">getContext</span><span class="c3">(</span><span class="c10">&quot;2d&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c3">}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c28">/* Point d&#39;entr&eacute;e de l&#39;application */</span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;init</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">//code de notre Application</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;canvas </span><span class="c3">=</span><span class="c2">&nbsp;getCanvas</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;getContext</span><span class="c3">();</span></p><p class="c0"><span class="c3">}</span></p><p class="c0"><span class="c5 c2">&nbsp;</span></p><p class="c0"><span class="c5 c28">/* Quand toutes les donn&eacute;es sont charg&eacute;es ( DOM, Images, Sons, Vid&eacute;os etc ... )</span></p><p class="c0"><span class="c5 c28">* On d&eacute;marre l&#39;application par la fonction init</span></p><p class="c0"><span class="c28">*/</span></p><p class="c0"><span class="c2">&nbsp;window</span><span class="c3">.</span><span class="c2">onload </span><span class="c3">=</span><span class="c5 c2">&nbsp;init;</span></p></td></tr></tbody></table><p class="c7"><span class="c2"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_ueeclh7havvb-0 start"><li class="c38 c9"><span class="c33 c24">Dessiner une texture.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li></ul><p class="c7"><span class="c33 c44 c24"></span></p><p class="c9"><span class="c6">Pour dessiner une texture l&#39;API HTML5 embarque une m&eacute;thode dont voici la </span><span class="c6 c24">premi&egrave;re</span><span class="c6">&nbsp;signature</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23 c24 c29">context.drawImage</span><span class="c6 c23 c29">(image,dx,dy)</span><span class="c6 c23">&nbsp;</span></p><p class="c7"><span class="c33 c45"></span></p><ul class="c25 lst-kix_tpctte2r7m1s-0 start"><li class="c38 c9"><span class="c6">Ici, le param&egrave;tre </span><span class="c6 c23">image</span><span class="c6">&nbsp;repr&eacute;sente la texture que l&#39;on souhaite dessiner.</span></li></ul><ul class="c25 lst-kix_eao6gb4vsoue-0 start"><li class="c38 c9"><span class="c6 c23">dx</span><span class="c6">&nbsp;et </span><span class="c6 c23">dy</span><span class="c6">&nbsp;r&eacute;presentent les coordonn&eacute;es auxquelles on souhaite dessiner l&#39;image.</span></li></ul><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Cette m&eacute;thode vous permettra de </span><span class="c6 c24">dessiner directement la texture sur le canvas, sans aucune transformation</span><span class="c6">.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">Exemple: </span></p><a href="#" name="ac93d4a1e93bf74a3f6bc21c4e1dc9cde57431e4"></a><a href="#" name="19"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">//code de notre Application</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;canvas </span><span class="c3">=</span><span class="c2">&nbsp;getCanvas</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;getContext</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;texture </span><span class="c3">=</span><span class="c2">&nbsp;document</span><span class="c3">.</span><span class="c2">getElementById</span><span class="c3">(</span><span class="c10">&#39;perso1&#39;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">save</span><span class="c3">();</span><span class="c2">&nbsp;</span><span class="c28">// sauvegarde 1</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">drawImage</span><span class="c3">(</span><span class="c2">texture</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c4">0</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">restore</span><span class="c3">();</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_26ysmokylgmh-0 start"><li class="c38 c9"><span class="c33 c24">M&eacute;thodes de dessin avanc&eacute;es</span></li></ul><p class="c7"><span class="c33 c44 c24"></span></p><p class="c9"><span class="c6">A l&#39;heure actuelle nous avons vu la m&eacute;thode </span><span class="c6 c24">classique</span><span class="c6">&nbsp;pour dessiner une texture, nous allons &agrave; pr&eacute;sent faire un tour du c&ocirc;t&eacute; des </span><span class="c6 c24">m&eacute;thodes</span><span class="c6">&nbsp;de dessins </span><span class="c6 c24">avanc&eacute;es</span><span class="c6">&nbsp;en commen&ccedil;ant par dessiner une texture &agrave; la taille qu&#39;on souhaite obtenir.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Pour ce faire, nous allons voir la deuxi&egrave;me signature de la m&eacute;thode context.drawImage</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23 c24 c29">context.drawImage</span><span class="c6 c23 c29">(image, dx, dy, dw, dh)</span><span class="c6 c23">&nbsp;</span></p><p class="c7"><span class="c33 c45"></span></p><ul class="c25 lst-kix_7ghsuvm9wtud-0 start"><li class="c38 c9"><span class="c6">ou </span><span class="c6 c23">image</span><span class="c6">&nbsp;r&eacute;presente la texture que l&#39;on souhaite dessiner,</span></li></ul><ul class="c25 lst-kix_uuheyt7f1guj-0 start"><li class="c38 c9"><span class="c6 c23">dx</span><span class="c6">,</span><span class="c6 c23">dy</span><span class="c6">,</span><span class="c6 c23">dw</span><span class="c6">,</span><span class="c6 c23">dh</span><span class="c6">&nbsp;repr&eacute;sentent le rectangle dans lequel on dessinera cette texture dans le canvas</span></li></ul><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">Exemple: </span></p><a href="#" name="25f88a323b45b55fb3f7cbccc814048ce50967f2"></a><a href="#" name="20"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c28">/* Point d&#39;entr&eacute;e de l&#39;application */</span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;init</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">//code de notre Application</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;canvas </span><span class="c3">=</span><span class="c2">&nbsp;getCanvas</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;getContext</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;texture </span><span class="c3">=</span><span class="c2">&nbsp;document</span><span class="c3">.</span><span class="c2">getElementById</span><span class="c3">(</span><span class="c10">&#39;perso1&#39;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">save</span><span class="c3">();</span><span class="c2">&nbsp;</span><span class="c28">// sauvegarde 1</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">drawImage</span><span class="c3">(</span><span class="c2">texture</span><span class="c3">,</span><span class="c4">10</span><span class="c3">,</span><span class="c4">10</span><span class="c3">,</span><span class="c4">100</span><span class="c3">,</span><span class="c4">100</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">restore</span><span class="c3">();</span></p><p class="c0"><span class="c2">}</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Ici, </span><span class="c6 c24">on dessine notre texture</span><span class="c6">&nbsp;sur aux coordonn&eacute;es x = 10, y = 10 et </span><span class="c6 c24">on applique une transformation &agrave; cette texture</span><span class="c6">&nbsp;de fa&ccedil;on &agrave; ce qu&#39;elle soit dessin&eacute;e avec 100 pixels de largeur et 100 pixels de hauteur ( width = 100, height = 100.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Nous allons maintenant voir comment dessiner une portion de notre texture et pour cela, nous allons &eacute;tudier la </span><span class="c6 c24">troisi&egrave;me</span><span class="c6">&nbsp;et derni&egrave;re signature possible de la m&eacute;thode context.drawImage.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23 c24 c29">context.drawImage</span><span class="c6 c23 c29">(image, sx, sy, sw, sh, dx, dy, dw, dh)</span><span class="c6 c23">&nbsp;</span></p><p class="c7"><span class="c33 c45"></span></p><ul class="c25 lst-kix_2i8dul3p1urb-0 start"><li class="c9 c38"><span class="c6">ou </span><span class="c6 c23">image</span><span class="c6">&nbsp;r&eacute;presente la texture que l&#39;on souhaite dessiner,</span></li></ul><ul class="c25 lst-kix_r93hjw9ovjrk-0 start"><li class="c38 c9"><span class="c6 c23">sx</span><span class="c6">, </span><span class="c6 c23">sy</span><span class="c6">, </span><span class="c6 c23">sw</span><span class="c6">, </span><span class="c6 c23">sh</span><span class="c6">&nbsp;r&eacute;pr&eacute;sentent la portion de texture que l&#39;on souhaite dessiner</span></li></ul><ul class="c25 lst-kix_io5aoygbg06t-0 start"><li class="c38 c9"><span class="c6 c23">dx</span><span class="c6">,</span><span class="c6 c23">dy</span><span class="c6">,</span><span class="c6 c23">dw</span><span class="c6">,</span><span class="c6 c23">dh</span><span class="c6">&nbsp;repr&eacute;sentent le rectangle dans lequel on dessinera cette fameuse portion de texture.</span></li></ul><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">Exemple: </span></p><a href="#" name="781a4aed52fa264cd976429bfc2dfd1c12ca4be1"></a><a href="#" name="21"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c28">/* Point d&#39;entr&eacute;e de l&#39;application */</span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;init</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">//code de notre Application</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;canvas </span><span class="c3">=</span><span class="c2">&nbsp;getCanvas</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;getContext</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;texture </span><span class="c3">=</span><span class="c2">&nbsp;document</span><span class="c3">.</span><span class="c2">getElementById</span><span class="c3">(</span><span class="c10">&#39;perso1&#39;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">save</span><span class="c3">();</span><span class="c2">&nbsp;</span><span class="c28">// sauvegarde 1</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">drawImage</span><span class="c3">(</span><span class="c2">texture</span><span class="c3">,</span><span class="c4">20</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c4">100</span><span class="c3">,</span><span class="c4">100</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c4">200</span><span class="c3">,</span><span class="c4">200</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">restore</span><span class="c3">();</span></p><p class="c0"><span class="c2">}</span></p></td></tr></tbody></table><p class="c9"><span class="c6">Ici, on dessine uniquement </span><span class="c6 c24">une portion</span><span class="c6">&nbsp;de l&#39;image, cette portion est comprise entre les coordonn&eacute;es x = 20, y = 20 avec une </span><span class="c6 c23">width</span><span class="c6">&nbsp;de 100 et une </span><span class="c6 c23">height</span><span class="c6">&nbsp;de 100, </span><span class="c6 c24">cette portion d&#39;image sera dessin&eacute;e sur le canvas</span><span class="c6">&nbsp;dans un rectangle compris entre les coordonn&eacute;es x = 0, y = 0 et x = 200, y = 200.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Maintenant, nous allons pouvoir passer </span><span class="c6 c24">au dessin avec des ombres, </span><span class="c6">nous allons donc nous int&eacute;r&eacute;sser aux propri&eacute;t&eacute;s : </span><span class="c6 c39">shadowColor, shadowBlur, shadowOffsetX et shadowOffsetY</span><span class="c6">&nbsp;de l&#39;objet context. Ces propri&eacute;t&eacute;s peuvent &ecirc;tre utilis&eacute;es avec les m&eacute;thodes de dessins classique, sans texture ou avec.</span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_ftdnfp64sn83-0 start"><li class="c38 c9"><span class="c6">La propri&eacute;t&eacute; context.shadowOffsetX sert &agrave; d&eacute;finir le d&eacute;calage en x que l&#39;ombre aura par rapport au dessin, </span><span class="c6 c24">le type de cette propri&eacute;t&eacute; est un entier.</span></li></ul><p class="c7"><span class="c6 c24"></span></p><ul class="c25 lst-kix_y9p72vfeb2dg-0 start"><li class="c38 c9"><span class="c6">La propri&eacute;t&eacute; context.shadowOffsetY sert &agrave; d&eacute;finir le d&eacute;calage en y que l&#39;ombre aura par rapport au dessin, </span><span class="c6 c24">le type de cette propri&eacute;t&eacute; est un entier.</span></li></ul><p class="c7"><span class="c6 c24"></span></p><ul class="c25 lst-kix_vtze6t2zaf6v-0 start"><li class="c38 c9"><span class="c6">La propri&eacute;t&eacute; context.shadowColor, comme son nom l&#39;indique, d&eacute;finie la couleur de l&#39;ombre</span></li></ul><p class="c9"><span class="c6">,</span></p><ul class="c25 lst-kix_vtze6t2zaf6v-0"><li class="c38 c9"><span class="c6 c24">le type de cette propri&eacute;t&eacute; est une string.</span></li></ul><p class="c7"><span class="c6 c24"></span></p><ul class="c25 lst-kix_orylvtq80p7f-0 start"><li class="c38 c9"><span class="c6">La propri&eacute;t&eacute; context.shadowBlur elle, sert &agrave; sp&eacute;cifier la nettet&eacute; ( ou plus sp&eacute;cifiquement le flou ) que l&#39;on souhaite appliquer &agrave; cette ombre, </span><span class="c6 c24">le type de cette propri&eacute;t&eacute; est un entier.</span></li></ul><p class="c7"><span class="c6 c24"></span></p><p class="c7"><span class="c6 c24"></span></p><p class="c9"><span class="c6 c23">Exemple: </span></p><a href="#" name="0c9e4a1be66e96e80c99aab2cd1f3b40782e941a"></a><a href="#" name="22"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c28">/* Point d&#39;entr&eacute;e de l&#39;application */</span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;init</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">//code de notre Application</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;canvas </span><span class="c3">=</span><span class="c2">&nbsp;getCanvas</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;getContext</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;texture </span><span class="c3">=</span><span class="c2">&nbsp;document</span><span class="c3">.</span><span class="c2">getElementById</span><span class="c3">(</span><span class="c10">&#39;perso1&#39;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">save</span><span class="c3">();</span><span class="c2">&nbsp;</span><span class="c28">// sauvegarde 1</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// je souhaite dessiner une texture avec une ombre rouge, decal&eacute;e de 20 pixels sur l&#39;axe des x</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// et de 20 pixels sur l&#39;axe des y avec une qualit&eacute; de flou de 2.</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">shadowColor </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;#FF0000&quot;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">shadowBlur </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">2;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">shadowOffsetX </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">20;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">shadowOffsetY </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">20;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// je dessine ma texture</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">drawImage</span><span class="c3">(</span><span class="c2">texture</span><span class="c3">,</span><span class="c4">20</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c4">100</span><span class="c3">,</span><span class="c4">100</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c4">200</span><span class="c3">,</span><span class="c4">200</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">restore</span><span class="c3">();</span></p><p class="c0"><span class="c2">}</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_k2fvcf9utpyv-0 start"><li class="c38 c9"><span class="c33 c24">Dessiner &agrave; travers un masque.</span></li></ul><p class="c7"><span class="c33 c44 c24"></span></p><p class="c9"><span class="c6">Nous allons &agrave; pr&eacute;sent apprendre &agrave; dessiner &agrave; travers un masque.</span></p><p class="c9"><span class="c6">et pour &ccedil;a, nous allons avoir besoin de la propri&eacute;t&eacute; </span><span class="c6 c24">globalCompositeOperation</span><span class="c6">&nbsp;de l&#39;objet context.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Cette propri&eacute;t&eacute; peut prendre plusieurs valeurs dont les r&eacute;sultats sont illustr&eacute;s &agrave; l&#39;aide </span><span class="c6">du graphique ci-dessous:</span><span class="c6">&nbsp;( source:</span><span class="c6"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Fwww.html5canvastutorials.com%2Fadvanced%2Fhtml5-canvas-global-composite-operations-tutorial%2F&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEyrZeAzwKBb5B1e4rRLCE3TDnfMQ">&nbsp;</a></span><span class="c46 c33 c44"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Fwww.html5canvastutorials.com%2Fadvanced%2Fhtml5-canvas-global-composite-operations-tutorial%2F&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEyrZeAzwKBb5B1e4rRLCE3TDnfMQ">http://www.html5canvastutorials.com/advanced/html5-canvas-global-composite-operations-tutorial/</a></span><span class="c33 c44">&nbsp;</span><span class="c6">)</span></p><p class="c9"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 584.00px; height: 419.00px;"><img alt="composite.jpg" src="images/image04.jpg" style="width: 584.00px; height: 419.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Comment interpr&eacute;ter ce graphique ? </span></p><p class="c9"><span class="c6">En premier lieu il faut que je vous donne le code source qui va avec: </span></p><p class="c7"><span class="c6"></span></p><a href="#" name="5bcd772b3c566e1dfa2c3479aad8566f70b02c13"></a><a href="#" name="23"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;blue&quot;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillRect</span><span class="c3">(</span><span class="c4">0</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c4">55</span><span class="c3">,</span><span class="c4">55</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">globalCompositeOperation </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;source-in&quot;;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;red&quot;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">arc</span><span class="c3">(</span><span class="c4">50</span><span class="c3">,</span><span class="c4">50</span><span class="c3">,</span><span class="c4">35</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c4">2</span><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">PI</span><span class="c3">,</span><span class="c15">false</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Il s&#39;agit d&#39;une </span><span class="c6 c24">op&eacute;ration en deux &eacute;tapes</span><span class="c6">&nbsp;:</span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_lf4yh4qagrta-0 start"><li class="c38 c9"><span class="c6">Tout d&#39;abord </span><span class="c6 c24">on dessine le masque sur l&#39;objet context </span><span class="c6">( ici le rectangle bleu )</span></li></ul><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_4388m8uzp8ef-0 start"><li class="c38 c9"><span class="c6">Ensuite, </span><span class="c6 c24">on sp&eacute;cifie la valeur de la propri&eacute;t&eacute; globalCompositeOperation</span><span class="c6">&nbsp;de l&#39;objet context.</span></li></ul><p class="c9 c69"><span class="c6">( ici &quot;source-in&quot;)</span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_894weqd38n83-0 start"><li class="c38 c9"><span class="c6">Puis </span><span class="c6 c24">on dessine le contenu</span><span class="c6">&nbsp;que l&#39;on souhaite voir appara&icirc;tre &agrave; travers le masque ( le cercle rouge )</span></li></ul><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Il suffit de changer la valeur de la propri&eacute;t&eacute; </span><span class="c6 c23">globalCompositeOperation</span><span class="c6">&nbsp;pour pouvoir obtenir tout les r&eacute;sultats retranscrits sur le graphique. Pour dessiner un objet &agrave; travers un masque, la valeur qui nous int&eacute;resse est &quot;</span><span class="c6 c24">source-in</span><span class="c6">&quot;. Voil&agrave;, les bases du dessin de texture ont &eacute;t&eacute; pass&eacute;es en revue, nous allons maintenant passer aux bases du moteur d&#39;affichage lui-m&ecirc;me.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7 c32"><span class="c6"></span></p><hr style="page-break-before:always;display:none;"><p class="c7 c32"><span class="c6"></span></p><p class="c7 c32"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c12 c9 c32 title"><a name="h.tgfv6ntygft4"></a><span>Structure de base du moteur</span></p><p class="c7"><span class="c26 c24"></span></p><ul class="c25 lst-kix_m19xsrwwovg7-0 start"><li class="c38 c9"><span class="c33 c24">La POO en Javascript, le prototypage</span></li></ul><p class="c7"><span class="c33 c44 c24"></span></p><p class="c9"><span class="c6 c64 c70">Le JavaScript est un langage orient&eacute; objet par prototype, il ne donne donc pas la possibilit&eacute; de cr&eacute;er ce que l&#39;on appelle des classes ou m&ecirc;me des namespaces et autres subtilit&eacute;s propres aux langages orient&eacute;s objets par classes que l&#39;on a l&#39;habitude d&#39;utiliser.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Cependant, c&#39;est un langage orient&eacute; prototypage, &ccedil;&agrave;d que la notion d&#39;objet existe mais qu&#39;ils sont tous dynamiques ( &agrave; part quelques rares exceptions ) et que les m&eacute;thodes et variables membres peuvent &ecirc;tre ajout&eacute;es dynamiquement et &agrave; l&#39;&eacute;x&eacute;cution, ce qui procure une extr&ecirc;me souplesse &agrave; ce langage. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Ce qui fait qu&#39;en d&eacute;finissant une nouvelle fonction &quot;Voiture &quot;en Javascript, je peux utiliser le mot clef &quot;new&quot; du langage et ainsi cr&eacute;er une nouvelle instance de ma pseudo classe &quot;Voiture&quot;, ainsi je dispose d&#39;un objet Voiture tout neuf, &quot;prototypable&quot;.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Chaque fonction/classe ( dor&eacute;navant nous utiliserons le mot classe m&ecirc;me s&#39;il s&#39;agit clairement d&#39;un abus de langage ) poss&egrave;de une propri&eacute;t&eacute; &quot;prototype&quot; qu&#39;il nous est permis d&#39;&eacute;tendre &agrave; l&#39;infini. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Ainsi &agrave; chaque nouvel objet cr&eacute;e, celui-ci poss&egrave;dera les propri&eacute;t&eacute;s d&eacute;finies sur le prototype de la classe associ&eacute;e. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">Exemple :</span></p><a href="#" name="abf6d0eddf778ba6311208411ce314c0ae6fe9e0"></a><a href="#" name="24"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c28">// fonction constructeur</span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">Voiture</span><span class="c3">(</span><span class="c2">name</span><span class="c3">,</span><span class="c5 c2">id)</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">name </span><span class="c3">=</span><span class="c5 c2">&nbsp;name;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">id </span><span class="c3">=</span><span class="c5 c2">&nbsp;id;</span></p><p class="c0"><span class="c5 c2">}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Voiture</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">name </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c1">Voiture</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">id </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c15">var</span><span class="c2">&nbsp;chevrolet </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Voiture</span><span class="c3">(</span><span class="c10">&quot;chevrolet&quot;</span><span class="c3">,</span><span class="c4">1</span><span class="c3">);</span></p><p class="c0"><span class="c15">var</span><span class="c2">&nbsp;ferrari </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Voiture</span><span class="c3">(</span><span class="c10">&quot;ferrari&quot;</span><span class="c3">,</span><span class="c4">2</span><span class="c3">);</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Nous avons ici deux objets de type Voiture ( bien que la notion de typage soit vraiment implicite en Javascript ) avec chacun des propri&eacute;t&eacute;s qui ont des valeurs diff&eacute;rentes. </span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_5gbbkyi6eio8-0 start"><li class="c38 c9"><span class="c33 c24">H&eacute;ritage et ordre d&#39;inclusion</span></li></ul><p class="c7"><span class="c33 c44 c24"></span></p><p class="c9"><span class="c6">Il existe plusieurs librairies Javascript sur internet, chacune ayant sa propre fa&ccedil;on de g&eacute;rer l&#39;h&eacute;ritage en Javascript, en effet le langage ne procure pas de moyen classique de le faire. Nous allons coder le notre , tr&egrave;s simple, qui r&eacute;pondra &agrave; nos besoins. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Nous allons donc cr&eacute;er une classe nomm&eacute;e Tomahawk ( nom de notre moteur ) qui disposera de plusieurs m&eacute;thodes statiques qui nous permettront &quot;d&#39;enregistrer&quot; des classes aupr&egrave;s de la plateforme ainsi cette derni&egrave;re pourra r&eacute;soudre les probl&eacute;matiques d&#39;h&eacute;ritage. </span></p><p class="c7"><span class="c6"></span></p><a href="#" name="b6fc40ee946c67016799930b717748f948a2914a"></a><a href="#" name="25"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">(){}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">_classes </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Object</span><span class="c3">();</span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">_extends </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Array</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">registerClass </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">&nbsp;classDef</span><span class="c3">,</span><span class="c5 c2">&nbsp;className )</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">_classes</span><span class="c3">[</span><span class="c2">className</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">=</span><span class="c5 c2">&nbsp;classDef;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c20 c7"><span class="c5 c6 c22"></span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">La m&eacute;thode registerClass prend deux arguments: </span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_fzi2fyc6kicg-0 start"><li class="c38 c9"><span class="c6">classDef </span><span class="c6 c24">qui correspond &agrave; la classe en elle-m&ecirc;me</span></li><li class="c38 c9"><span class="c6">className, </span><span class="c6 c24">un &quot;alias&quot; qui sera l&#39;identifiant de la classe</span><span class="c6">.</span></li></ul><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Maintenant, il nous faut une m&eacute;thode pour &quot;enregistrer&quot; l&#39;h&eacute;ritage d&#39;une classe. </span></p><p class="c7"><span class="c6"></span></p><a href="#" name="9af73d402446faca89f3597287874533682759b2"></a><a href="#" name="26"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">extend </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">&nbsp;p_child</span><span class="c3">,</span><span class="c2">&nbsp;p_ancestor )</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">_extends</span><span class="c3">.</span><span class="c2">push</span><span class="c3">({</span><span class="c10">&quot;child&quot;</span><span class="c3">:</span><span class="c2">p_child</span><span class="c3">,</span><span class="c10">&quot;ancestor&quot;</span><span class="c3">:</span><span class="c2">p_ancestor</span><span class="c3">});</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c20 c7"><span class="c5 c6 c22"></span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Cette m&eacute;thode prend elle aussi deux param&egrave;tres, chacun correspondant &agrave; une </span><span class="c6 c24">string </span><span class="c6">, le premier &eacute;tant l&#39;alias de la classe fille, le deuxi&egrave;me &eacute;tant l&#39;alias de la classe parente.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Maintenant nous devons r&eacute;soudre cette probl&eacute;matique d&#39;h&eacute;ritage, le principe en soit est tr&egrave;s simple, il faut que les prototypes de chacune de nos classes disposent d&#39;une copie de toutes les m&eacute;thodes et propri&eacute;t&eacute;s de leur classe parente sans pour autant remplacer les surchages de m&eacute;thodes d&eacute;finie sur le prototype de la classe fille.</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="52186c7b8b8f977e92cbf7aa310ca2b62211260c"></a><a href="#" name="27"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">_getParentClass </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">child)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;i </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;max </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">_extends</span><span class="c3">.</span><span class="c5 c2">length;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">for</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c2">i </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">;</span><span class="c2">&nbsp;i </span><span class="c3">&lt;</span><span class="c2">&nbsp;max</span><span class="c3">;</span><span class="c2">&nbsp;i</span><span class="c3">++</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">_extends</span><span class="c3">[</span><span class="c2">i</span><span class="c3">];</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;obj</span><span class="c3">[</span><span class="c10">&quot;child&quot;</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">==</span><span class="c5 c2">&nbsp;child )</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c5 c2">&nbsp;obj;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">_inherits </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c5 c2">&nbsp;obj )</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;child </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;ancestor </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;superParent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">_getParentClass</span><span class="c3">(</span><span class="c2">obj</span><span class="c3">[</span><span class="c10">&quot;ancestor&quot;</span><span class="c3">]);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;superParent </span><span class="c3">!=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">_inherits</span><span class="c3">(</span><span class="c2">superParent</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">_classes</span><span class="c3">[</span><span class="c2">obj</span><span class="c3">[</span><span class="c10">&quot;child&quot;</span><span class="c3">]];</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ancestor </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">_classes</span><span class="c3">[</span><span class="c2">obj</span><span class="c3">[</span><span class="c10">&quot;ancestor&quot;</span><span class="c3">]];</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;child </span><span class="c3">!=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c2">&nbsp;</span><span class="c3">&amp;&amp;</span><span class="c2">&nbsp;ancestor </span><span class="c3">!=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ancestor </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;ancestor</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">for</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;prop </span><span class="c15">in</span><span class="c5 c2">&nbsp;ancestor )</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c3">!</span><span class="c2">child</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">[</span><span class="c2">prop</span><span class="c3">]</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">[</span><span class="c2">prop</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;ancestor</span><span class="c3">[</span><span class="c2">prop</span><span class="c3">];</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p></td></tr></tbody></table><p class="c9"><span class="c6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c9"><span class="c6">Et enfin, il nous faut une m&eacute;thode pour d&eacute;marrer tout &ccedil;a :</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="2566cb7452e8c8aa1395afe4bc24d12eeccb45e1"></a><a href="#" name="28"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">run </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;obj </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;i </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;max </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">_extends</span><span class="c3">.</span><span class="c5 c2">length;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">for</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c2">i </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">;</span><span class="c2">&nbsp;i </span><span class="c3">&lt;</span><span class="c2">&nbsp;max</span><span class="c3">;</span><span class="c2">&nbsp;i</span><span class="c3">++</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">_inherits</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">_extends</span><span class="c3">[</span><span class="c2">i</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c6 c22">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_15jbqmax1zlg-0 start"><li class="c38 c9"><span class="c33 c24">Les Namespaces</span></li></ul><p class="c7"><span class="c33 c44 c24"></span></p><p class="c7"><span class="c33 c44 c24"></span></p><p class="c9"><span class="c6">Dans le domaine de la programmation orient&eacute;e objet un </span><span class="c6 c24">namespace</span><span class="c6">&nbsp;est comme son nom l&#39;indique, un espace de nom, </span><span class="c6 c24">cela sert &agrave; pouvoir d&eacute;finir autant de fonctions, classes etc... au sein d&#39;un m&ecirc;me domaine</span><span class="c6">. Concr&egrave;tement </span><span class="c6 c24">cela &eacute;vite les collisions de nom</span><span class="c6">&nbsp;que l&#39;on peut retrouver par exemple, dans le cas de l&#39;utilisation de librairies javascript diff&eacute;rentes. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">Exemple: </span></p><p class="c7"><span class="c6 c23"></span></p><ul class="c25 lst-kix_vi4c4bepb9nj-0 start"><li class="c38 c9"><span class="c6 c24">La librairie A contient une fonction nomm&eacute;e &quot;google&quot;</span><span class="c6">, j&#39;ai besoin de cette fonctionnalit&eacute;, du coup j&#39;utilise la librairie associ&eacute;e.</span></li></ul><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_vi4c4bepb9nj-0"><li class="c38 c9"><span class="c6 c24">La librairie B contient &eacute;galement une fonction nomm&eacute;e &quot;google&quot;</span><span class="c6">, elle ne fait pas le m&ecirc;me chose, cependant j&#39;ai besoin d&#39;autres fonctionnalit&eacute;s de cette librairie, du coup je l&#39;inclus &eacute;galement dans ma page.</span></li></ul><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Le probl&egrave;me c&#39;est que </span><span class="c6 c24">ces deux librairies vont entrer en collision</span><span class="c6">&nbsp;&agrave; cause de cette fonction nomm&eacute;e &quot;google&quot; du coup la fonction google sera </span><span class="c6 c24">red&eacute;finie, </span><span class="c6">ce qui fait que la premi&egrave;re librairie sera en partie inutilisable. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c24">Pour r&eacute;soudre ce probl&egrave;me, on utilise les namespaces</span><span class="c6">, le probl&egrave;me c&#39;est qu&#39;il n&#39;existe </span><span class="c6 c24">pas de m&eacute;canisme propre au langage Javascript</span><span class="c6">&nbsp;permettant de d&eacute;clarer ou de changer de namespace.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Heureusement, </span><span class="c6 c24">le prototypage</span><span class="c6">&nbsp;peut encore venir &agrave; notre secours, en effet, il suffit de cr&eacute;er un objet ( &agrave; qui l&#39;on donnera le nom de notre namespace ) et de cr&eacute;er nos classes en tant que propri&eacute;t&eacute; de cet objet, concr&egrave;tement &ccedil;a donne cela: </span></p><p class="c7"><span class="c6"></span></p><a href="#" name="dc76610cd578b21f6675c1a835501ad6b8464e39"></a><a href="#" name="29"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c28">// fonction message classique</span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">Message</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console</span><span class="c3">.</span><span class="c2">log</span><span class="c3">(</span><span class="c10">&quot;Message 1&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c28">// fonction message incluse dans le namespace &quot;tomahawk&quot;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c15">var</span><span class="c2">&nbsp;tomahawk </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Object</span><span class="c3">();</span></p><p class="c0"><span class="c2">tomahawk</span><span class="c3">.</span><span class="c1">Message</span><span class="c2">&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console</span><span class="c3">.</span><span class="c2">log</span><span class="c3">(</span><span class="c10">&quot;Message 2&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Message</span><span class="c3">();</span></p><p class="c0"><span class="c2">tomahawk</span><span class="c3">.</span><span class="c1">Message</span><span class="c3">();</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Nous avons pass&eacute; en revue les namespaces et leur utilit&eacute;, &nbsp;nous pouvons maintenant passer &agrave; la prochaine &eacute;tape, la gestion des m&eacute;dias, ou assets ( les sons et les images quoi ).</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">Note: dans les chapitres suivants nous n&#39;utiliserons pas de namespaces afin de garder une certaine aisance, de plus vous pourrez ainsi adapter le code source en utilisant votre propre namespace.</span></p><p class="c7"><span class="c6 c23"></span></p><p class="c7"><span class="c6 c23"></span></p><p class="c7"><span class="c6 c23"></span></p><p class="c7"><span class="c6 c23"></span></p><p class="c7"><span class="c6 c23"></span></p><p class="c7 c32"><span class="c6 c23"></span></p><hr style="page-break-before:always;display:none;"><p class="c7 c32"><span class="c6 c23"></span></p><p class="c7 c32"><span class="c6 c23"></span></p><p class="c7"><span class="c6 c23"></span></p><p class="c12 c9 c32 title"><a name="h.acz1v9t5pbxh"></a><span>Gestion des m&eacute;dias ( ou assets )</span></p><p class="c7"><span class="c26 c24"></span></p><p class="c9"><span class="c6 c23">Note :</span></p><p class="c7"><span class="c6 c23"></span></p><p class="c9"><span class="c6 c23">Pr&eacute;c&eacute;demment, nous avons convenu que nous utiliserions le mot texture pour d&eacute;signer une image, car cela correspond &agrave; un vocabulaire tr&egrave;s utilis&eacute; dans le jeu vid&eacute;o. Pour les besoins de ce chapitre, nous allons coder une classe nomm&eacute;e Texture dont l&#39;une des propri&eacute;t&eacute;s sera une image. </span></p><p class="c7"><span class="c6 c23"></span></p><p class="c9"><span class="c6 c23">Par soucis de clart&eacute; nous allons donc r&eacute;utiliser le mot image pour parler d&#39;une image, le mot texture d&eacute;signera dor&eacute;navant un objet de type Texture.</span></p><p class="c7"><span class="c6 c23"></span></p><p class="c7"><span class="c6 c23"></span></p><ul class="c25 lst-kix_6ew8evsstjna-0 start"><li class="c38 c9"><span class="c33 c24">Introduction aux spritesheets</span></li></ul><p class="c7"><span class="c33 c44 c24"></span></p><p class="c9"><span class="c6">Nous commen&ccedil;erons ce chapitre avec une introduction &agrave; la notion de </span><span class="c6 c24">spritesheet</span><span class="c6">.</span></p><p class="c9"><span class="c6 c24">Une spritesheet est une image qui contient les diff&eacute;rentes &eacute;tapes d&#39;une m&ecirc;me animation</span><span class="c6">, par exemple, l&#39;image suivante est une spritesheet livr&eacute;e avec le logiciel </span><span class="c6 c24">RPG Maker</span><span class="c6">&nbsp;repr&eacute;sentant une explosion: </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 249.33px;"><img alt="image.png" src="images/image00.png" style="width: 624.00px; height: 249.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">A quoi peut-elle bien nous servir, pourquoi ne pas charger une multitude d&#39;image plut&ocirc;t qu&#39;une seule et s&#39;embarasser &agrave; g&eacute;rer cela ? Et bien tout simplement parceque charger une seule et m&ecirc;me image permet </span><span class="c6 c24">d&#39;all&eacute;ger le poids total des assets et d&#39;optimiser les performances d&#39;affichage</span><span class="c6">&nbsp;( mais &ccedil;a nous le verrons plus tard ).</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Sachez juste que si l&#39;on avait d&eacute;coup&eacute; l&#39;image ci-dessus en de multiples images, cela </span><span class="c6 c24">aurait pes&eacute; plus lourd</span><span class="c6">&nbsp;car chaque image poss&egrave;de ses propres </span><span class="c6 c24">headers</span><span class="c6">&nbsp;&ccedil;&agrave;d quelques octets au tout d&eacute;but du fichier qui contiennent des infos &agrave; propos de celui-ci.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">De plus, s</span><span class="c6 c24">elon le type de fichier, l&#39;encodage, la compression peuvent r&eacute;presenter une contrainte de poids suppl&eacute;mentaire</span><span class="c6">&nbsp;que l&#39;on multipliera si l&#39;on a plusieurs fichiers.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Et pour finir, sachez qu&#39;</span><span class="c6 c24">un serveur HTTP pr&eacute;f&eacute;rera toujours vous envoyer un seul et m&ecirc;me fichier plut&ocirc;t qu&#39;une multitude de petits fichiers</span><span class="c6">, cela lui demande &agrave; chaque fois un temps d&#39;acc&egrave;s au disque dur ainsi que la construction d&#39;une requ&ecirc;te HTTP de retour etc... Bref beaucoup de travail en trop pour rien.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Laissons maintenant les spritesheets, nous y reviendrons plus tard ( au moment de cr&eacute;er des animations &nbsp;) et passons maintenant au chargement et au stockage des images.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_szvnggo6wxn7-0 start"><li class="c38 c9"><span class="c33 c24">Gestion des Assets : AssetsLoader et AssetsManager</span></li></ul><p class="c7"><span class="c33 c44 c24"></span></p><p class="c9"><span class="c6">Nous allons maintenant passer &agrave; la gestion de ces images, pour cela nous allons </span><span class="c6 c24">coder</span><span class="c6">&nbsp;</span><span class="c6 c24">deux</span><span class="c6">&nbsp;</span><span class="c6 c24">classes</span><span class="c6">&nbsp;tr&egrave;s utiles, l&#39;une nous permettra de </span><span class="c6 c24">charger</span><span class="c6">&nbsp;une suite d&#39;images, l&#39;autre de </span><span class="c6 c24">stocker</span><span class="c6">&nbsp;et de retrouver ces m&ecirc;mes images ( qui, plus tard, seront embarqu&eacute;e dans une classe Texture</span><span class="c6 c24">&nbsp;</span><span class="c6">).</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c24">La classe AssetsLoader :</span></p><p class="c7"><span class="c6 c24"></span></p><p class="c9"><span class="c6">Tout d&#39;abord nous allons commencer par les charger ces fameuses images et pour cela nous allons cr&eacute;er une classe que l&#39;on nommera AssetsLoader, que nous mettrons dans un fichier &agrave; part du m&ecirc;me nom.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Sa fonction sera de stocker les urls des images, d&#39;y associer un alias, de charger toutes les images et d&#39;appeler une fonction d&eacute;finie par l&#39;utilisateur lorsque le chargement sera complet.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">AssetsLoader.js</span></p><p class="c7"><span class="c6 c23"></span></p><a href="#" name="64ed1247cc77f1dc26fff5109d8b6a0c7ed04393"></a><a href="#" name="30"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c2 c24">&nbsp;</span><span class="c15 c24">f</span><span class="c15">unction</span><span class="c2">&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_loadingList </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Array</span><span class="c3">();</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">registerClass</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;AssetsLoader&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">_instance </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span><span class="c2">&nbsp;</span><span class="c28">// singleton</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">_instance </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c2">&nbsp;</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">_instance </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">_instance</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">onComplete </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_loadingList </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">getData </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_data</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">addFile </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">fileURL</span><span class="c3">,</span><span class="c2">&nbsp;fileAlias</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on r&eacute;initialise les data</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Object</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on stocke un objet contenant l&quot;url et l&#39;alias du fichier que l&#39;on</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// utilisera pour le retrouver</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_loadingList</span><span class="c3">.</span><span class="c2">push</span><span class="c3">({</span><span class="c2">url</span><span class="c3">:</span><span class="c2">fileURL</span><span class="c3">,</span><span class="c15">alias</span><span class="c3">:</span><span class="c2">fileAlias</span><span class="c3">});</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">load </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_loadingList</span><span class="c3">.</span><span class="c2">length </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c2">&nbsp;</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">onComplete </span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">onComplete</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">else</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;obj </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_loadingList</span><span class="c3">.</span><span class="c2">shift</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;scope </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;image </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Image</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image</span><span class="c3">.</span><span class="c2">onload </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scope</span><span class="c3">.</span><span class="c2">_onLoadComplete</span><span class="c3">(</span><span class="c2">image</span><span class="c3">,</span><span class="c2">&nbsp;obj</span><span class="c3">.</span><span class="c15">alias</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image</span><span class="c3">.</span><span class="c2">src </span><span class="c3">=</span><span class="c2">&nbsp;obj</span><span class="c3">.</span><span class="c2">url</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_onLoadComplete </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">image</span><span class="c3">,</span><span class="c15">alias</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_data</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;image</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">load</span><span class="c3">();</span></p><p class="c0"><span class="c3">};</span></p></td></tr></tbody></table><p class="c7"><span class="c2 c23"></span></p><p class="c7"><span class="c2"></span></p><p class="c7"><span class="c2"></span></p><p class="c9"><span class="c2 c23">sample1</span><span class="c3 c23">.</span><span class="c2 c23">html</span></p><a href="#" name="4bbe8194459c9d8940e163956f1ca255db6e556c"></a><a href="#" name="31"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c1">&lt;!DOCTYPE html&gt;</span></p><p class="c0"><span class="c15">&lt;html</span><span class="c2">&nbsp;</span><span class="c1">lang</span><span class="c3">=</span><span class="c10">&quot;en&quot;</span><span class="c15">&gt;</span></p><p class="c0"><span class="c15">&lt;head&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;meta</span><span class="c2">&nbsp;</span><span class="c1">charset</span><span class="c3">=</span><span class="c10">&quot;utf-8&quot;</span><span class="c15">&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;meta</span><span class="c2">&nbsp;</span><span class="c1">name</span><span class="c3">=</span><span class="c10">&quot;viewport&quot;</span><span class="c2">&nbsp;</span><span class="c1">content</span><span class="c3">=</span><span class="c10">&quot;width=device-width, initial-scale=1.0, user-scalable=0&quot;</span><span class="c15">&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;title&gt;&lt;/title&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;script</span><span class="c2">&nbsp;</span><span class="c1">type</span><span class="c3">=</span><span class="c10">&quot;text/javascript&quot;</span><span class="c2">&nbsp;</span><span class="c1">src</span><span class="c3">=</span><span class="c10">&quot;tomahawk/Tomahawk.js&quot;</span><span class="c15">&gt;&lt;/script&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;script</span><span class="c2">&nbsp;</span><span class="c1">type</span><span class="c3">=</span><span class="c10">&quot;text/javascript&quot;</span><span class="c2">&nbsp;</span><span class="c1">src</span><span class="c3">=</span><span class="c10">&quot;tomahawk/utils/AssetsLoader.js&quot;</span><span class="c15">&gt;&lt;/script&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;script</span><span class="c2">&nbsp;</span><span class="c1">type</span><span class="c3">=</span><span class="c10">&quot;text/javascript&quot;</span><span class="c2">&nbsp;</span><span class="c1">src</span><span class="c3">=</span><span class="c10">&quot;sample1.js&quot;</span><span class="c15">&gt;&lt;/script&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;style</span><span class="c2">&nbsp;</span><span class="c1">type</span><span class="c3">=</span><span class="c10">&quot;text&quot;</span><span class="c15">&gt;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canvas</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border</span><span class="c3">:</span><span class="c2">&nbsp;</span><span class="c4">2px</span><span class="c2">&nbsp;solid black</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background</span><span class="c3">-</span><span class="c2">color</span><span class="c3">:</span><span class="c2">&nbsp;black</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;/style&gt;</span></p><p class="c0"><span class="c15">&lt;/head&gt;</span></p><p class="c0"><span class="c15">&lt;body&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;canvas</span><span class="c2">&nbsp;</span><span class="c1">id</span><span class="c3">=</span><span class="c10">&quot;tomahawk&quot;</span><span class="c15">&gt;&lt;/canvas&gt;</span></p><p class="c0"><span class="c15">&lt;/body&gt;</span></p><p class="c0"><span class="c15">&lt;/html&gt;</span></p></td></tr></tbody></table><p class="c7"><span class="c6 c13"></span></p><p class="c7"><span class="c6 c13"></span></p><p class="c7"><span class="c6 c13"></span></p><p class="c7"><span class="c6 c13"></span></p><p class="c7"><span class="c6 c13"></span></p><p class="c7"><span class="c6 c13"></span></p><p class="c7"><span class="c6 c13"></span></p><p class="c9"><span class="c6 c23">sample1.js</span></p><a href="#" name="c7738abe72ee233e41b90e7aa763a0a283fad93b"></a><a href="#" name="32"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c28">/* Point d&#39;entr&eacute;e de l&#39;application */</span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;init</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">run</span><span class="c3">();</span><span class="c2">&nbsp;</span><span class="c28">// on d&eacute;marre la plateforme Tomahawk</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;scope </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">onComplete </span><span class="c3">=</span><span class="c2">&nbsp;onComplete</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">addFile</span><span class="c3">(</span><span class="c10">&quot;perso1.png&quot;</span><span class="c3">,</span><span class="c10">&quot;perso1&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">addFile</span><span class="c3">(</span><span class="c10">&quot;perso2.png&quot;</span><span class="c3">,</span><span class="c10">&quot;perso2&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">addFile</span><span class="c3">(</span><span class="c10">&quot;perso3.png&quot;</span><span class="c3">,</span><span class="c10">&quot;perso3&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">addFile</span><span class="c3">(</span><span class="c10">&quot;ground.png&quot;</span><span class="c3">,</span><span class="c10">&quot;ground&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">load</span><span class="c3">();</span></p><p class="c0"><span class="c3">}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;onComplete</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console</span><span class="c3">.</span><span class="c2">log</span><span class="c3">(</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">getData</span><span class="c3">());</span></p><p class="c0"><span class="c3">}</span></p><p class="c0"><span class="c2">&nbsp;window</span><span class="c3">.</span><span class="c2">onload </span><span class="c3">=</span><span class="c2">&nbsp;init;</span></p></td></tr></tbody></table><p class="c7"><span class="c6 c23"></span></p><p class="c9"><span class="c6">Nous avons le code source de 3 fichiers: </span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_tiyqr2z460zf-0 start"><li class="c38 c9"><span class="c6">le fichier sample1.html, qui embarque les fichiers Tomahawk.js, sample1.js et AssetsLoader.js</span></li><li class="c38 c9"><span class="c6">le fichier AssetsLoader.js qui contient le code de notre classe</span></li><li class="c38 c9"><span class="c6">le fichier sample1.js qui se contente d&#39;appeler une fonction init au chargement de la page. </span></li></ul><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Comme vous pouvez le constater, nous avons utiliser le </span><span class="c6 c24">design pattern singleton</span><span class="c6">, qui consiste &agrave; retourner une seule et unique instance de la classe AssetsLoader, </span><span class="c6 c24">c&#39;est un choix personnel, ne vous sentez pas oblig&eacute; d&#39;y adh&eacute;rer</span><span class="c6">, si vous souhaitez pouvoir cr&eacute;er plusieurs instances de la classe AssetsLoader ceci est votre droit.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Nous avons &eacute;galement utilis&eacute; notre fameuse classe Tomahawk ainsi que certaines de ses m&eacute;thodes</span></p><p class="c9"><span class="c6">Plus pr&eacute;cis&eacute;ment nous avons enregistr&eacute; la classe AssetsLoader &nbsp;&agrave; l&#39;aide de la m&eacute;thode statique Tomahawk.registerClass() puis nous avons d&eacute;marr&eacute; la plateforme &agrave; l&#39;aide de l&#39;appel &agrave; la m&eacute;thode Tomahawk.run</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">M&ecirc;me si notre classe AssetsLoader stocke nos images, elle n&#39;est pas vraiment faite pour &ccedil;a, en effet, &agrave; chaque fois que nous l&#39;utiliserons pour charger un nouveau groupe d&#39;image, la propri&eacute;t&eacute; _data est r&eacute;initialis&eacute;e, ce qui rend les donn&eacute;es indisponibles.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Ce qu&#39;il nous faudrait donc, c&#39;est une classe dont la t&acirc;che serait de stocker et de restituer ces images, ce qui est pr&eacute;cis&eacute;mment le cas de la classe AssetsManager dont voici le code source: </span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">AssetsManager.js</span></p><a href="#" name="b201954350152141ae9f68017d5168b687194fd6"></a><a href="#" name="33"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Object</span><span class="c3">();</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">registerClass</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;AssetsManager&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c28">// singleton</span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">_instance </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">getInstance </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">_instance </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c2">&nbsp;</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">_instance </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">_instance</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">getData </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_data</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">getDataByAlias </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c15">alias</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_data</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_data</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">];</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">addImage </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">image</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">alias</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_data</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;image</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p></td></tr></tbody></table><p class="c7"><span class="c6 c23"></span></p><p class="c9"><span class="c6">Voil&agrave;, maintenant nous disposons d&#39;une </span><span class="c6 c24">classe de stockage des Assets</span><span class="c6">, notez que j&#39;ai fais l&agrave; aussi le choix du singleton, encore une fois ceci est une plus une question de go&ucirc;t qu&#39;autre chose, essayez d&#39;adapter le code &agrave; votre fa&ccedil;on de faire.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Pour avoir un exemple d&#39;utilisation de cette classe, il nous suffit de modifier l&eacute;g&egrave;rement le code du fichier sample1.js</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">Exemple:</span></p><p class="c7"><span class="c6 c23"></span></p><a href="#" name="5c192a80572f50723a684f679e96c0fd00434271"></a><a href="#" name="34"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;onComplete</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">getData</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">for</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;</span><span class="c15">alias</span><span class="c2">&nbsp;</span><span class="c15">in</span><span class="c2">&nbsp;data </span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">addImage</span><span class="c3">(</span><span class="c2">data</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">],</span><span class="c15">alias</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console</span><span class="c3">.</span><span class="c2">log</span><span class="c3">(</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">getDataByAlias</span><span class="c3">(</span><span class="c10">&quot;ground&quot;</span><span class="c3">));</span></p><p class="c0"><span class="c2">}</span></p></td></tr></tbody></table><p class="c9"><span class="c6">L&#39;on voit que l&#39;on stocke toutes les images au sein de l&#39;AssetsManager et que d&egrave;s que l&#39;on souhaite retrouver une des images, il nous suffit de </span><span class="c6 c24">passer le nom de son alias</span><span class="c6">&nbsp;&agrave; la m&eacute;thode </span><span class="c6 c23">getDataByAlias</span><span class="c6">&nbsp;de l&#39;objet </span><span class="c6 c23">AssetsManager</span><span class="c6">. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Bien, nous savons charger, stocker,</span><span class="c6 c24">&nbsp;retrouver des images en fonction d&#39;un alias</span><span class="c6">, il nous faut &agrave; pr&eacute;sent apprendre &agrave; nous en servir. Pour ce faire, je vous propose de passer tout de suite &agrave; la cr&eacute;ation de notre classe Texture.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c33 c44 c24">La classe Texture</span></p><p class="c7"><span class="c33 c44 c24"></span></p><p class="c9"><span class="c6">Pourquoi cr&eacute;er une classe Texture ? Nous avons d&eacute;j&agrave; des images, nous savons les dessiner de toutes les fa&ccedil;ons possibles, alors pourquoi s&#39;ennuyer &agrave; coder une classe par dessus ? </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Et bien tout simplement parce que cette classe Texture contiendra des informations qui nous serons bien utiles plus tard, comme le nom de la texture, l&#39;image associ&eacute;e ( qui n&#39;est pas forc&eacute;ment diff&eacute;rente de celle d&#39;une autre texture nous y reviendrons plus tard ) etc... </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">C&#39;est une classe dont on pourrait se passer, concr&egrave;tement, on pourrait se d&eacute;brouiller sans elle, mais elle nous facilite beaucoup la vie et plus c&#39;est simple mieux c&#39;est non ? </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Voici sans plus tarder le code la classe Texture que nous placerons dans un fichier &agrave; part:</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">Texture.js</span></p><a href="#" name="0463fdd7a376bc5ff2419d6694330bdaa2732f96"></a><a href="#" name="35"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">Texture</span><span class="c3">(){}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">registerClass</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">Texture</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;Texture&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Texture</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c1">Texture</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">name </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c1">Texture</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">rect </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Comme je vous l&#39;ai dit, </span><span class="c6 c24">cette classe nous servira uniquement &agrave; stocker des donn&eacute;es additionnelles</span><span class="c6">.</span></p><p class="c9"><span class="c6">Pas de m&eacute;thodes compliqu&eacute;es, rien que de la donn&eacute;e. Parfois la simplification d&#39;un code source tient &agrave; peu de choses...</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Bien, voyons &agrave; pr&eacute;sent comment nous pouvons nous en servir, reprenons le code de notre fichier sample1.js de tout &agrave; l&#39;heure. </span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">&nbsp;Sample1.js</span></p><a href="#" name="8092aae59e749361be1883bf9c15933308beb25f"></a><a href="#" name="36"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;onComplete</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">getData</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;canvas </span><span class="c3">=</span><span class="c2">&nbsp;document</span><span class="c3">.</span><span class="c2">getElementById</span><span class="c3">(</span><span class="c10">&#39;tomahawk&#39;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;canvas</span><span class="c3">.</span><span class="c2">getContext</span><span class="c3">(</span><span class="c10">&#39;2d&#39;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">for</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;</span><span class="c15">alias</span><span class="c2">&nbsp;</span><span class="c15">in</span><span class="c5 c2">&nbsp;data )</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">addImage</span><span class="c3">(</span><span class="c2">data</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">],</span><span class="c15">alias</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on cr&eacute;e une nouvelle texture</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;texture </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Texture</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on lui associe l&#39;image dont l&#39;alias est ground</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">getDataByAlias</span><span class="c3">(</span><span class="c10">&quot;ground&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on lui donne un nom</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">name </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;groundTexture&quot;;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on pr&eacute;cise quelle est la portion d&#39;image relatif &agrave; cette texture</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// un tableau dont les valeurs r&eacute;pr&eacute;sentent les valeurs [x,y,width,height]</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// ici la portion d&#39;image relatif &agrave; ma texture correspond &agrave; la moiti&eacute; de</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">rect </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c3">[</span><span class="c4">0</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c4">32</span><span class="c3">,</span><span class="c4">22</span><span class="c3">];</span><span class="c2">&nbsp; l</span><span class="c10">&#39;image</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">save</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">drawImage</span><span class="c3">(</span><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">data</span><span class="c3">, </span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">rect</span><span class="c3">[</span><span class="c4">0</span><span class="c3">], </span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">rect</span><span class="c3">[</span><span class="c4">1</span><span class="c3">],</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">rect</span><span class="c3">[</span><span class="c4">2</span><span class="c3">],</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">rect</span><span class="c3">[</span><span class="c4">3</span><span class="c3">],</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">0,</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">0,</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">100,</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">100</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">restore</span><span class="c3">();</span></p><p class="c0"><span class="c2">}</span></p></td></tr></tbody></table><p class="c7"><span class="c6 c23"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Attardons-nous un peu sur la propri&eacute;t&eacute; </span><span class="c6 c23">rect </span><span class="c6">&nbsp;de la classe Texture voulez-vous, &agrave; quoi nous peut-elle bien nous servir ? Et bien tout l&#39;inter&ecirc;t de cette propri&eacute;t&eacute; r&eacute;side dans le fait qu&#39;elle nous permet de pr&eacute;ciser la portion de l&#39;image &agrave; dessiner</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">&quot;</span><span class="c6 c23">Oui mais &ccedil;a on pouvait d&eacute;j&agrave; le savoir sans avoir &agrave; coder une classe pour cela, la preuve on l&#39;a fait tout &agrave; l&#39;heure sans utiliser tout ce code suppl&eacute;mentaire</span><span class="c6">&quot;</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Je vois qu&#39;il y en a qui suivent, c&#39;est bien. Et bien &agrave; cela je vous r&eacute;pondrais que oui tout &agrave; l&#39;heure c&#39;&eacute;tait plus simple mais moins pratique, car avec la classe que nous avons l&agrave;, deux Textures diff&eacute;rentes peuvent partager la m&ecirc;me image, il leur suffira de d&eacute;finir une portion d&#39;image diff&eacute;rente afin de se distinguer l&#39;une de l&#39;autre. Reprenons notre image de tout &agrave; l&#39;heure: </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 249.33px;"><img alt="image.png" src="images/image00.png" style="width: 624.00px; height: 249.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Ici, chaque portion de l&#39;image r&eacute;presente un &eacute;tat de l&#39;explosion, ce qui veut dire que nous pouvons associer un objet Texture &agrave; chacun de ses &eacute;tats tout en chargeant une seule et m&ecirc;me image. </span></p><p class="c9"><span class="c6">Dans le cas de cette explosion, si je veux afficher le stade 0 de l&#39;explosion, il me suffit de dessiner la texture associ&eacute;e, si je veux afficher le stade 1 puis 2 puis 3 il me suffira de changer de dessiner l&#39;objet Texture correspondant.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Nous reparlerons de l&#39;animation plus loin, nous allons nous int&eacute;r&eacute;sser maintenant &agrave; un autre moyen d&#39;exploiter cette fameuse classe Texture.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_k6m2fush27ta-0 start"><li class="c38 c9"><span class="c33 c44 c24">Regrouper toutes les textures, la classe TextureAtlas</span></li></ul><p class="c7"><span class="c33 c44 c24"></span></p><p class="c7"><span class="c33 c44 c24"></span></p><p class="c9"><span class="c6">Comme nous venons de le voir la classe Texture poss&egrave;de un vrai potentiel qu&#39;il nous faut maintenant exploiter, c&#39;est pour cela que nous allons cr&eacute;er une classe nomm&eacute;e TextureAtlas dont le r&ocirc;le sera de cr&eacute;er, de stocker, de restituer des objets de type Texture.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">TextureAtlas.js</span></p><a href="#" name="327a278265a75df1e0de314aad7c0f7fb4baa1d6"></a><a href="#" name="37"></a><table cellpadding="0" cellspacing="0" class="c73"><tbody><tr class="c17"><td class="c75"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">TextureAtlas</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_textures </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Array</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">registerClass</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">TextureAtlas</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;TextureAtlas&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">TextureAtlas</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_textures </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c1">TextureAtlas</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c1">TextureAtlas</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">name </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">TextureAtlas</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">createTexture </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">&nbsp;name</span><span class="c3">,</span><span class="c2">&nbsp;startX</span><span class="c3">,</span><span class="c2">&nbsp;startY</span><span class="c3">,</span><span class="c2">&nbsp;endX</span><span class="c3">,</span><span class="c5 c2">&nbsp;endY )</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;texture </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Texture</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">name </span><span class="c3">=</span><span class="c5 c2">&nbsp;name;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">data;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">rect </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c3">[</span><span class="c2">startX</span><span class="c3">,</span><span class="c2">&nbsp;startY</span><span class="c3">,</span><span class="c2">&nbsp;endX</span><span class="c3">,</span><span class="c2">&nbsp;endY</span><span class="c3">];</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_textures</span><span class="c3">.</span><span class="c2">push</span><span class="c3">(</span><span class="c2">texture</span><span class="c3">);</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">TextureAtlas</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">getTextureByName </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c5 c2">&nbsp;name )</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;i </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_textures</span><span class="c3">.</span><span class="c5 c2">length;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;currentTexture </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">while</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c3">--</span><span class="c2">i </span><span class="c3">&gt;</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c4">1</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentTexture </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_textures</span><span class="c3">[</span><span class="c2">i</span><span class="c3">];</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;currentTexture</span><span class="c3">.</span><span class="c2">name </span><span class="c3">==</span><span class="c5 c2">&nbsp;name )</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c5 c2">&nbsp;currentTexture;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">TextureAtlas</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">removeTexture </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c5 c2">&nbsp;name )</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;texture </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">getTextureByName</span><span class="c3">(</span><span class="c2">name</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;texture </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;index </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_textures</span><span class="c3">.</span><span class="c2">indexOf</span><span class="c3">(</span><span class="c2">texture</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_textures</span><span class="c3">.</span><span class="c2">splice</span><span class="c3">(</span><span class="c2">index</span><span class="c3">,</span><span class="c4">1</span><span class="c3">);</span></p><p class="c0"><span class="c3">};</span></p></td></tr></tbody></table><p class="c7"><span class="c6 c23"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Modifions maintenant le code notre fichier sample1.js</span></p><a href="#" name="c021cdc5870882884146bdfd3874fc13ddb8c811"></a><a href="#" name="38"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;onComplete</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">getData</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;canvas </span><span class="c3">=</span><span class="c2">&nbsp;document</span><span class="c3">.</span><span class="c2">getElementById</span><span class="c3">(</span><span class="c10">&#39;tomahawk&#39;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;canvas</span><span class="c3">.</span><span class="c2">getContext</span><span class="c3">(</span><span class="c10">&#39;2d&#39;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">for</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;</span><span class="c15">alias</span><span class="c2">&nbsp;</span><span class="c15">in</span><span class="c5 c2">&nbsp;data )</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">addImage</span><span class="c3">(</span><span class="c2">data</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">],</span><span class="c15">alias</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on cr&eacute;e un nouvel atlas</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;atlas </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">TextureAtlas</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on lui associe une image qui sera celle partag&eacute;e par toutes les textures stock&eacute;e en son sein</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atlas</span><span class="c3">.</span><span class="c2">data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">getDataByAlias</span><span class="c3">(</span><span class="c10">&quot;ground&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on cr&eacute;e deux textures diff&eacute;rentes, portant un nom diff&eacute;rent, ayant chacune la m&ecirc;me image</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// mais pas les m&ecirc;mes portions d&#39;image associ&eacute;es</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atlas</span><span class="c3">.</span><span class="c2">createTexture</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c10">&quot;texture_1&quot;</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c4">32</span><span class="c3">,</span><span class="c4">43</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atlas</span><span class="c3">.</span><span class="c2">createTexture</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c10">&quot;texture_2&quot;</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">32</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c4">32</span><span class="c3">,</span><span class="c4">43</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;texture </span><span class="c3">=</span><span class="c2">&nbsp;atlas</span><span class="c3">.</span><span class="c2">getTextureByName</span><span class="c3">(</span><span class="c10">&quot;texture_1&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">save</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on dessine la premi&egrave;re texture</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">drawImage</span><span class="c3">(</span><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">data</span><span class="c3">, </span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">rect</span><span class="c3">[</span><span class="c4">0</span><span class="c3">], </span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">rect</span><span class="c3">[</span><span class="c4">1</span><span class="c3">],</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">rect</span><span class="c3">[</span><span class="c4">2</span><span class="c3">],</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">rect</span><span class="c3">[</span><span class="c4">3</span><span class="c3">],</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">0,</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">0,</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">100,</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">100</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture </span><span class="c3">=</span><span class="c2">&nbsp;atlas</span><span class="c3">.</span><span class="c2">getTextureByName</span><span class="c3">(</span><span class="c10">&quot;texture_2&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// puis la deuxi&egrave;me</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">drawImage</span><span class="c3">(</span><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">data</span><span class="c3">, </span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">rect</span><span class="c3">[</span><span class="c4">0</span><span class="c3">], </span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">rect</span><span class="c3">[</span><span class="c4">1</span><span class="c3">],</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">rect</span><span class="c3">[</span><span class="c4">2</span><span class="c3">],</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;texture</span><span class="c3">.</span><span class="c2">rect</span><span class="c3">[</span><span class="c4">3</span><span class="c3">],</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">110,</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">0,</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">100,</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">100</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// en gros, nous avons dessin&eacute; les deux moiti&eacute;s de l&#39;image</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// sur une largeur et une hauteur de 100 pixels</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// les deux moiti&eacute;s &eacute;tant s&eacute;par&eacute;es de 10 pixels</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">restore</span><span class="c3">();</span></p><p class="c0"><span class="c2">}</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Dans l&#39;ordre, nous avons d&#39;abord cr&eacute;e un objet de type TextureAtlas, nous avons associ&eacute; une image &agrave; sa propri&eacute;t&eacute; data puis nous avons cr&eacute;e 2 textures &agrave; l&#39;aide la m&eacute;thode createTexture de la classe TextureAtlas.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Cette m&eacute;thode cr&eacute;e un nouvel objet de type Texture et se charge d&#39;initialiser ses propri&eacute;t&eacute;s avec les bonnes informations, l&#39;objet Texture est ensuite stock&eacute; et pourra &ecirc;tre retrouv&eacute; &agrave; l&#39;aide de la m&eacute;thode getTextureByName de la classe TextureAtlas. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Pour finir, nous dessinons les deux textures sur le canvas.</span></p><p class="c9"><span class="c6">Il ne nous reste plus qu&#39;&agrave; impl&eacute;menter le code qui nous permettra de stocker des objets de type Texture et TextureAtlas sur au sein d&#39;un objet de type AssetsManager et nous aurons termin&eacute; ce chapitre.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Voici le code de la classe AssetsManager, notez que nous avons cette fois-ci bien fait le distinction entre tout les types de donn&eacute;es diff&eacute;rents : </span></p><p class="c7"><span class="c6"></span></p><a href="#" name="eedd0572509f4c7ec7e43e870c76b0f33aaddafb"></a><a href="#" name="39"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_images </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Object</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_atlases </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Object</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_textures </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Object</span><span class="c3">();</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">registerClass</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;AssetsManager&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c28">// singleton</span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">_instance </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">getInstance </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">_instance </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c2">&nbsp;</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">_instance </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">_instance</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_images </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_atlases </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_textures </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c28">// images</span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">getImages </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_images</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">getImageByAlias </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c15">alias</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_images</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_images</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">];</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">addImage </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">image</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">alias</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_images</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;image</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c28">//atlases</span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">addAtlas </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">atlas</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">alias</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_atlases</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;atlas</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">getAtlases </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_atlases</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">getAtlasByAlias </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c15">alias</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_atlases</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_atlases</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">];</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c28">//textures</span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">addTexture </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">texture</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">alias</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_textures</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;texture</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">getTextures </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_textures</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">getTextureByAlias </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c15">alias</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_textures</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_textures</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">];</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Maintenant que nous savons comment g&eacute;rer les assets, nous allons apprendre &agrave; cr&eacute;er une structure pour les manipuler.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7 c32"><span class="c6"></span></p><hr style="page-break-before:always;display:none;"><p class="c7 c32"><span class="c6"></span></p><p class="c7 c32"><span class="c6"></span></p><p class="c12 c9 c32 title"><a name="h.bd6cx0v8ht05"></a><span>Les bases de l&#39;affichage</span></p><p class="c7"><span class="c26 c24"></span></p><ul class="c25 lst-kix_cy93osahw99c-0 start"><li class="c38 c9"><span class="c33 c44 c24">Structure arborescente et DisplayList</span></li></ul><p class="c7"><span class="c33 c44 c24"></span></p><p class="c9"><span class="c6">Commen&ccedil;ons par introduire la notion de DisplayList, qu&#39;est-ce qu&#39;une DisplayList et &agrave; quoi cela sert-il ? </span></p><p class="c9"><span class="c6">La DisplayList ( traduire liste d&#39;affichage ) est, comme son nom l&#39;indique, une structure de donn&eacute;es contenant l&#39;ensemble des informations &agrave; afficher. Pour les d&eacute;veloppeurs actionscript cette notion est &eacute;vidente car intrins&egrave;que au langage, pour les d&eacute;veloppeurs web cela se rapproche beaucoup du DOM.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Il s&#39;agit d&#39;une structure arborescente poss&eacute;dant de par ce fait une racine et un nombre non fini de feuilles ou ramifications. Si on prend l&#39;exemple du DOM, le code source suivant est un bel exemple de structure arborescente:</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="932d3a7bb7152d475624594b7a9231c7732539f0"></a><a href="#" name="40"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">&lt;div&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;p&gt;</span><span class="c2">enfant numero 1</span><span class="c15">&lt;/p&gt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">&lt;p&gt;</span><span class="c2">enfant numero 2</span><span class="c15">&lt;/p&gt;</span></p><p class="c0"><span class="c15">&lt;/div&gt;</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Ici la balise &lt;div&gt; est le parent des balises &lt;p&gt; contenues en son sein, dans un vocabulaire algorithmique, et plus particuli&egrave;rement dans le cas des structures arborescentes on parle de </span><span class="c6 c24">noeuds</span><span class="c6">&nbsp;</span><span class="c6 c24">ou de</span><span class="c6">&nbsp;</span><span class="c6 c24">parents</span><span class="c6">&nbsp; et de </span><span class="c6 c24">feuilles ou d&#39;enfants</span></p><p class="c7"><span class="c6 c24"></span></p><p class="c9"><span class="c6">L&#39;exemple &nbsp;plus haut est assez simple, mais une structure arborescente, de par sa nature, n&#39;est jamais fini , comprendre par l&agrave; que l&#39;on peut toujours ajouter des enfants &agrave; parent.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Voici un sch&eacute;ma d&#39;une autre structure, celle-ci part d&#39;un noeud racine pour ensuite d&eacute;ployer ses enfants qui eux-m&ecirc;me auront des enfants etc etc &hellip;</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 368.00px;"><img alt="tree.png" src="images/image02.png" style="width: 624.00px; height: 368.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Pour en revenir &agrave; notre DisplayList, sa structure sera similaire, &ccedil;&agrave;d que nous partirons d&#39;un objet d&#39;affichage de d&eacute;part pour ensuite progresser r&eacute;cursivement afin de parcourir chaque enfant de l&#39;arbre.</span></p><p class="c9"><span class="c6">Nous allons donc commencer par cr&eacute;er la classe d&#39;affichage de base, la classe DisplayObject.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_uvcg8m1p6m4l-0 start"><li class="c38 c9"><span class="c33 c44 c24">Le point de d&eacute;part : La classe DisplayObject</span></li></ul><p class="c7"><span class="c33 c44 c24"></span></p><p class="c9"><span class="c6">Nous avons vu pr&eacute;c&eacute;demment les diff&eacute;rentes techniques de dessins possibles, puis nous avons cr&eacute;e une classe Texture destin&eacute;e &agrave; &ecirc;tre manipul&eacute;e par un objet de type </span><span class="c6 c23">Context </span><span class="c6">.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Notre classe DisplayObject doit reprendre l&#39;ensemble de ces &eacute;l&eacute;ments tout en gardant un esprit &quot;objet&quot; &ccedil;&agrave;d, qu&#39;il nous faudra pouvoir la manipuler ais&eacute;ment. Le mod&egrave;le de l&#39;API du langage Actionscript 3 est plut&ocirc;t clair, nous allons donc nous caler dessus. Notre classe DisplayObject doit pouvoir g&eacute;rer l&#39;affichage et le stockage des donn&eacute;es relatives &agrave; l&#39;affichage de ce que l&#39;on souhaite dessiner. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Voici une premi&egrave;re version de notre classe DisplayObject, notez que la m&eacute;thode </span><span class="c6 c23">draw </span><span class="c6">&nbsp;de celle-ci dessine un carr&eacute; rouge, ce carr&eacute; rouge n&#39;est pr&eacute;sent que dans le but d&#39;avoir un code pr&ecirc;t &agrave; tester, gardez &agrave; l&#39;esprit qu&#39;il ne devrait pas &ecirc;tre pr&eacute;sent, notre classe DisplayObject &eacute;tant destin&eacute; &agrave; &ecirc;tre une classe de base pour tout les objets d&#39;affichage qui h&eacute;riteront de ses fonctionnalit&eacute;s.</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="06e1aa4d07b854d7f8584c916d31a18e8b46d5fe"></a><a href="#" name="41"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">DisplayObject</span><span class="c3">(){}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">registerClass</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">DisplayObject</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;DisplayObject&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">name </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">parent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">x </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">y </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">scaleX </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">1;</span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">scaleY </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">1;</span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">width </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">height </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">rotation </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">alpha </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">1;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">_toRadians </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">PI </span><span class="c3">/</span><span class="c2">&nbsp;</span><span class="c4">180;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">render </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c5 c2">&nbsp;context )</span></p><p class="c0"><span class="c3">{</span><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">save</span><span class="c3">();</span><span class="c2">&nbsp;</span><span class="c28">// d&#39;abord on sauvegarde le context</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">//puis on applique les transformations, comme nous avons </span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// dans les chapitres pr&eacute;c&eacute;dents</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">translate</span><span class="c3">(</span><span class="c15">this</span><span class="c3">.</span><span class="c2">x</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">y</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">rotate</span><span class="c3">(</span><span class="c15">this</span><span class="c3">.</span><span class="c2">rotation </span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">_toRadians</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">scale</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">scaleX</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">scaleY </span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">globalAlpha </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">alpha;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// puis on dessine</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">draw</span><span class="c3">(</span><span class="c2">context</span><span class="c3">); </span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// et enfin on restaure le context sauvegard&eacute; plus haut</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">restore</span><span class="c3">();</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">draw </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c5 c2">context)</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// nous dessinon un rectangle rouge</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;red&quot;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fillRect</span><span class="c3">(</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">width</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">height</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();</span></p><p class="c0"><span class="c2">}</span></p></td></tr></tbody></table><p class="c9"><span class="c6">Voici une premi&egrave;re version de notre classe DisplayObject, si vous souhaitez la tester, c&#39;est assez simple, il vous suffit de cr&eacute;er un objet de type DisplayObject et d&#39;appeller sa m&eacute;thode render en lui passant le context en param&egrave;tre. Exp&eacute;rimentez, changez les propri&eacute;t&eacute;s de votre objet, son alpha, son scaleX, sa rotation etc... vous verrez on s&#39;y fait rapidement.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">&nbsp;Nous allons maintenant passer &agrave; une classe un peu plus int&eacute;r&eacute;ssante, car elle sera destin&eacute;e &agrave; dessiner des textures, la classe Bitmap.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_ak0bl34nqjju-0 start"><li class="c38 c9"><span class="c33 c44 c24">Enfin des textures : La classe Bitmap</span></li></ul><p class="c7"><span class="c33 c44 c24"></span></p><p class="c9"><span class="c6">Nous allons &agrave; pr&eacute;sent afficher des textures, pour cela nous allons coder une classe que nous nommerons Bitmap, cette classe h&eacute;ritera de la classe DisplayObject, ce qui fait qu&#39;elle disposera de toutes les fonctionnalit&eacute;s de celle-ci en plus des siennes propres.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Sans plus tarder, voici le code: </span></p><a href="#" name="bc7dc70f7a69fd21bc81517cc34056895b78b68a"></a><a href="#" name="42"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">Bitmap</span><span class="c3">(){}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">registerClass</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">Bitmap</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;Bitmap&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">extend</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c10">&quot;Bitmap&quot;</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;DisplayObject&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Bitmap</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">texture </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Bitmap</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">draw </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c5 c2">&nbsp;context )</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;rect </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">texture</span><span class="c3">.</span><span class="c5 c2">rect;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">texture</span><span class="c3">.</span><span class="c5 c2">data;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">drawImage</span><span class="c3">(</span><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data</span><span class="c3">,</span><span class="c2">&nbsp;rect</span><span class="c3">[</span><span class="c4">0</span><span class="c3">],</span><span class="c2">&nbsp;rect</span><span class="c3">[</span><span class="c4">1</span><span class="c3">],</span><span class="c2">&nbsp;rect</span><span class="c3">[</span><span class="c4">2</span><span class="c3">],</span><span class="c2">&nbsp;rect</span><span class="c3">[</span><span class="c4">3</span><span class="c3">],</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">width</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">height </span><span class="c3">);</span></p><p class="c0"><span class="c3">};</span></p><p class="c20 c7"><span class="c5 c6 c22"></span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Notez que l&#39;on utilise bien les m&eacute;thodes statiques de notre classe Tomahawk pour r&eacute;soudre cette probl&eacute;matique d&#39;h&eacute;ritage, nous avons donc bien h&eacute;rit&eacute; des propri&eacute;t&eacute;s et des m&eacute;thodes de la classe DisplayObject.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Nous avons &eacute;galement ajout&eacute; une propri&eacute;t&eacute; &agrave; notre classe Bitmap, que nous avons nomm&eacute; </span><span class="c6 c23">texture.</span><span class="c6">&nbsp;</span></p><p class="c9"><span class="c6">Celle-ci, comme on peut s&#39;en douter, repr&eacute;sente un objet de type Texture.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">La seule m&eacute;thode a avoir &eacute;t&eacute; red&eacute;finie est la m&eacute;thode </span><span class="c6 c23">draw</span><span class="c6">, ici, elle nous permet de dessiner notre texture, de la m&ecirc;me fa&ccedil;on que dans le chapitre pr&eacute;c&eacute;dent.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Voici un exemple de code qui nous permettra d&#39;afficher un objet de type bitmap.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6 c23">Sample1.js</span></p><a href="#" name="3c86cbe7eebef7b2f77a6876a807781c6a91ae5b"></a><a href="#" name="43"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c28">/* Point d&#39;entr&eacute;e de l&#39;application */</span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;init</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on d&eacute;marre la plateforme Tomahawk puis on charge les fichiers</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">run</span><span class="c3">();</span><span class="c5 c2">&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">onComplete </span><span class="c3">=</span><span class="c2">&nbsp;onComplete</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">addFile</span><span class="c3">(</span><span class="c10">&quot;ground.png&quot;</span><span class="c3">,</span><span class="c10">&quot;ground&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">load</span><span class="c3">();</span></p><p class="c0"><span class="c3">}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;onComplete</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">getData</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;canvas </span><span class="c3">=</span><span class="c2">&nbsp;document</span><span class="c3">.</span><span class="c2">getElementById</span><span class="c3">(</span><span class="c10">&#39;tomahawk&#39;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;canvas</span><span class="c3">.</span><span class="c2">getContext</span><span class="c3">(</span><span class="c10">&#39;2d&#39;</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">for</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;</span><span class="c15">alias</span><span class="c2">&nbsp;</span><span class="c15">in</span><span class="c2">&nbsp;data </span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">addImage</span><span class="c3">(</span><span class="c2">data</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">],</span><span class="c15">alias</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on cr&eacute;e un nouvel atlas</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;atlas </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">TextureAtlas</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on lui associe une image qui sera celle partag&eacute;e par toutes les textures stock&eacute;e en son sein</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atlas</span><span class="c3">.</span><span class="c2">data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">getImageByAlias</span><span class="c3">(</span><span class="c10">&quot;ground&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on cr&eacute;e deux textures diff&eacute;rentes, portant un nom diff&eacute;rent, ayant chacune la m&ecirc;me image</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// mais pas les m&ecirc;mes portions d&#39;image associ&eacute;es</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atlas</span><span class="c3">.</span><span class="c2">createTexture</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c10">&quot;texture_1&quot;</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c4">64</span><span class="c3">,</span><span class="c4">43</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;texture </span><span class="c3">=</span><span class="c2">&nbsp;atlas</span><span class="c3">.</span><span class="c2">getTextureByName</span><span class="c3">(</span><span class="c10">&quot;texture_1&quot;</span><span class="c3">);</span><span class="c2">&nbsp;</span><span class="c28">// on retrouve notre texture</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;bmp </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Bitmap</span><span class="c3">();</span><span class="c2">&nbsp;</span><span class="c28">// on cr&eacute;er un nouvel objet de type Bitmap</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">texture </span><span class="c3">=</span><span class="c2">&nbsp;texture</span><span class="c3">;</span><span class="c2">&nbsp;</span><span class="c28">// on y associe la texture</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">width </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">64</span><span class="c3">;</span><span class="c2">&nbsp;</span><span class="c28">// on d&eacute;finie la largeur</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">height </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">43</span><span class="c3">;</span><span class="c28">//... puis la hauteur</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">render</span><span class="c3">(</span><span class="c2">context</span><span class="c3">);</span><span class="c28">// et enfin on dessine le tout</span></p><p class="c0"><span class="c2">}</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Nous pouvons &agrave; pr&eacute;sent manipuler des objets de type Bitmap, nous allons donc passer &agrave; la prochaine &eacute;tape, le c&ocirc;t&eacute; &quot;imbrication&quot; des objets d&#39;affichage.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_gpy5gjdtksic-0 start"><li class="c38 c9"><span class="c33 c44 c24">Objets imbriqu&eacute;s : La classe DisplayObjectContainer</span></li></ul><p class="c7"><span class="c33 c44 c24"></span></p><p class="c9"><span class="c6">Comme nous avons pu le voir pr&eacute;c&eacute;demment, la notion de DisplayList implique une certaine r&eacute;cursivit&eacute;, une &quot;imbrication&quot; en th&eacute;orie infinie. L&#39;impl&eacute;mentation d&#39;un tel concept peut sembler compliqu&eacute;e mais il n&#39;en est rien, en effet il nous &quot;suffira&quot; de cr&eacute;er un DisplayObject qui poss&egrave;de la capacit&eacute; d&#39;avoir des enfants.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Ainsi, lorsqu&#39;on appellera la m&eacute;thode &quot;render&quot; de ce DisplayObject, l&#39;ensemble de ces enfants seront &eacute;galement dessin&eacute;s, et si nous choisissons de ne pas dessiner cet objet, ses enfants ne le seront pas non plus. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Cette classe nous l&#39;appellerons DisplayObjectContainer, voici son code source :</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><a href="#" name="8b074b3a0b49f7214354382b13727bb07aeecf46"></a><a href="#" name="44"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">DisplayObjectContainer</span><span class="c3">(){</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_construct</span><span class="c3">();}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">registerClass</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">DisplayObjectContainer</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;DisplayObjectContainer&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">extend</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c10">&quot;DisplayObjectContainer&quot;</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;DisplayObject&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObjectContainer</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">children </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObjectContainer</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_construct </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Array</span><span class="c3">();</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObjectContainer</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">addChild </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c5 c2">child)</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;child</span><span class="c3">.</span><span class="c5 c2">parent )</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child</span><span class="c3">.</span><span class="c2">parent</span><span class="c3">.</span><span class="c2">removeChild</span><span class="c3">(</span><span class="c2">child</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child</span><span class="c3">.</span><span class="c2">parent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children</span><span class="c3">.</span><span class="c2">push</span><span class="c3">(</span><span class="c2">child</span><span class="c3">);</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObjectContainer</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">getChildAt </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c5 c2">index)</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children</span><span class="c3">[</span><span class="c2">index</span><span class="c3">];</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObjectContainer</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">getChildByName </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c5 c2">name)</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;children </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">children;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;i </span><span class="c3">=</span><span class="c2">&nbsp;children</span><span class="c3">.</span><span class="c5 c2">length;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">while</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c3">--</span><span class="c2">i </span><span class="c3">&gt;</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c4">1</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;children</span><span class="c3">[</span><span class="c2">i</span><span class="c3">].</span><span class="c2">name </span><span class="c3">==</span><span class="c5 c2">&nbsp;name )</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;children</span><span class="c3">[</span><span class="c2">i</span><span class="c3">];</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObjectContainer</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">addChildAt </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">child</span><span class="c3">,</span><span class="c5 c2">&nbsp;index)</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;children </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">children;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;tab1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children</span><span class="c3">.</span><span class="c2">slice</span><span class="c3">(</span><span class="c4">0</span><span class="c3">,</span><span class="c2">index</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;tab2 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children</span><span class="c3">.</span><span class="c2">slice</span><span class="c3">(</span><span class="c2">index</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children </span><span class="c3">=</span><span class="c2">&nbsp;tab1</span><span class="c3">.</span><span class="c2">concat</span><span class="c3">([</span><span class="c2">child</span><span class="c3">]).</span><span class="c2">concat</span><span class="c3">(</span><span class="c2">tab2</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child</span><span class="c3">.</span><span class="c2">parent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObjectContainer</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">removeChildAt </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c5 c2">index)</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;child </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children</span><span class="c3">[</span><span class="c2">index</span><span class="c3">];</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c5 c2">&nbsp;child )</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child</span><span class="c3">.</span><span class="c2">parent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children</span><span class="c3">.</span><span class="c2">splice</span><span class="c3">(</span><span class="c2">index</span><span class="c3">,</span><span class="c4">1</span><span class="c3">);</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObjectContainer</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">removeChild </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c5 c2">child)</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;index </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children</span><span class="c3">.</span><span class="c2">indexOf</span><span class="c3">(</span><span class="c2">child</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;index </span><span class="c3">&gt;</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c4">1</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children</span><span class="c3">.</span><span class="c2">splice</span><span class="c3">(</span><span class="c2">index</span><span class="c3">,</span><span class="c4">1</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child</span><span class="c3">.</span><span class="c2">parent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObjectContainer</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">draw </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c5 c2">&nbsp;context &nbsp;)</span></p><p class="c0"><span class="c3">{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;children </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">children;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;i </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;max </span><span class="c3">=</span><span class="c2">&nbsp;children</span><span class="c3">.</span><span class="c5 c2">length;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;child </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">for</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c3">;</span><span class="c2">&nbsp;i </span><span class="c3">&lt;</span><span class="c2">&nbsp;max</span><span class="c3">;</span><span class="c2">&nbsp;i</span><span class="c3">++</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child </span><span class="c3">=</span><span class="c2">&nbsp;children</span><span class="c3">[</span><span class="c2">i</span><span class="c3">];</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child</span><span class="c3">.</span><span class="c2">render</span><span class="c3">(</span><span class="c2">context</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c3">};</span></p><p class="c20 c7"><span class="c5 c6 c22"></span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Comme vous pouvez le constater, cette classe h&eacute;rite de DisplayObject, elle poss&egrave;de donc les propri&eacute;t&eacute;s et les m&eacute;thodes d&#39;un objet de type DisplayObject, avec cependant quelques petites choses en plus. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Comme cette propri&eacute;t&eacute; &quot;children&quot; qui comme son nom l&#39;indique, va lui servir &agrave; stocker des enfants et &agrave; boucler dessus au sein de la m&eacute;thode &quot;draw&quot; qui pour le coup a &eacute;t&eacute; red&eacute;finie. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Les m&eacute;thodes &quot;addChild&quot; et &quot;addChildAt&quot; sont l&agrave; pour ajouter un enfant, soit &agrave; la fin de la liste des enfants, soit &agrave; un index pr&eacute;cis, les enfants &eacute;tant dessin&eacute; dans l&#39;ordre.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Les m&eacute;thodes &quot;removeChild&quot; et &quot;removeChildAt&quot; sont l&agrave; pour enlever un enfant &agrave; notre DisplayObjectContainer, soit un enfant pr&eacute;cis dans le cas de &quot;removeChild&quot; soit un enfant se situant &agrave; un index pr&eacute;cis dans le cas de &quot;removeChildAt&quot;.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">La m&eacute;thode &quot;getChildAt&quot; nous renvoie l&#39;enfant situ&eacute; &agrave; l&#39;index pass&eacute; en param&egrave;tre.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">La m&eacute;thode &quot;getChildByName&quot; nous renvoie le premier enfant dont le nom est &eacute;gal &agrave; celui pass&eacute; en param&egrave;tre.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Voici un exemple de code mettant en pratique notre DisplayObjectContainer:</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">sample1.js</span></p><a href="#" name="b554d48dd0ffaa8587929bcb8c7ba0b223b1cf7c"></a><a href="#" name="45"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c28">/* Point d&#39;entr&eacute;e de l&#39;application */</span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;init</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on d&eacute;marre la plateforme Tomahawk puis on charge les fichiers</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">run</span><span class="c3">();</span><span class="c5 c2">&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">onComplete </span><span class="c3">=</span><span class="c2">&nbsp;onComplete</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">addFile</span><span class="c3">(</span><span class="c10">&quot;ground.png&quot;</span><span class="c3">,</span><span class="c10">&quot;ground&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">load</span><span class="c3">();</span></p><p class="c0"><span class="c3">}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;onComplete</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">getData</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;canvas </span><span class="c3">=</span><span class="c2">&nbsp;document</span><span class="c3">.</span><span class="c2">getElementById</span><span class="c3">(</span><span class="c10">&#39;tomahawk&#39;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;canvas</span><span class="c3">.</span><span class="c2">getContext</span><span class="c3">(</span><span class="c10">&#39;2d&#39;</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">for</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;</span><span class="c15">alias</span><span class="c2">&nbsp;</span><span class="c15">in</span><span class="c2">&nbsp;data </span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">addImage</span><span class="c3">(</span><span class="c2">data</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">],</span><span class="c15">alias</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on cr&eacute;e un nouvel atlas</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;atlas </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">TextureAtlas</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on lui associe une image qui sera celle partag&eacute;e par toutes les textures stock&eacute;e en son sein</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atlas</span><span class="c3">.</span><span class="c2">data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">getImageByAlias</span><span class="c3">(</span><span class="c10">&quot;ground&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on cr&eacute;e deux textures diff&eacute;rentes, portant un nom diff&eacute;rent, ayant chacune la m&ecirc;me image</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// mais pas les m&ecirc;mes portions d&#39;image associ&eacute;es</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atlas</span><span class="c3">.</span><span class="c2">createTexture</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c10">&quot;texture_1&quot;</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c4">64</span><span class="c3">,</span><span class="c4">43</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;container </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">DisplayObjectContainer</span><span class="c3">();</span><span class="c2">&nbsp;</span><span class="c28">// on cr&eacute;e un objet de type DisplayObjectContainer</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;texture </span><span class="c3">=</span><span class="c2">&nbsp;atlas</span><span class="c3">.</span><span class="c2">getTextureByName</span><span class="c3">(</span><span class="c10">&quot;texture_1&quot;</span><span class="c3">);</span><span class="c2">&nbsp;</span><span class="c28">// on retrouve notre texture</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;bmp </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Bitmap</span><span class="c3">();</span><span class="c2">&nbsp;</span><span class="c28">// on cr&eacute;er un nouvel objet de type Bitmap</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">texture </span><span class="c3">=</span><span class="c2">&nbsp;texture</span><span class="c3">;</span><span class="c2">&nbsp;</span><span class="c28">// on y associe la texture</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">width </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">64</span><span class="c3">;</span><span class="c2">&nbsp;</span><span class="c28">// on d&eacute;finie la largeur</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">height </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">43</span><span class="c3">;</span><span class="c28">//... puis la hauteur</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;container</span><span class="c3">.</span><span class="c2">addChild</span><span class="c3">(</span><span class="c2">bmp</span><span class="c3">);</span><span class="c2">&nbsp;</span><span class="c28">// et on l&#39;ajoute &agrave; la liste des enfants du container</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on recommence l&#39;op&eacute;ration tout en changeant les coordonn&eacute;es du deuxi&egrave;me enfant</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Bitmap</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">texture </span><span class="c3">=</span><span class="c2">&nbsp;texture</span><span class="c3">;</span><span class="c5 c2">&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">width </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">64</span><span class="c3">;</span><span class="c5 c2">&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">height </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">43</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">x </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">y </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c3">;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;container</span><span class="c3">.</span><span class="c2">addChild</span><span class="c3">(</span><span class="c2">bmp</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// et on appelle la m&eacute;thode render du DisplayObjectContainer</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;container</span><span class="c3">.</span><span class="c2">render</span><span class="c3">(</span><span class="c2">context</span><span class="c3">);</span><span class="c5 c2">&nbsp;</span></p><p class="c0"><span class="c5 c2">}</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Comme vous pouvez le constater, les deux enfants, des objets de type Bitmap, sont tout les deux dessin&eacute;s &agrave; l&#39;&eacute;cran et tout &ccedil;a en appelant la m&eacute;thode render de leur parent.</span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_735cwea6feyk-0 start"><li class="c38 c9"><span class="c6">Racine de la DisplayList : classe Stage</span></li></ul><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Nous allons &agrave; pr&eacute;sent passer &agrave; la derni&egrave;re &eacute;tape essentielle de la DisplayList, la </span><span class="c6 c24">racine.</span></p><p class="c9"><span class="c6">Dans le graphique de tout &agrave; l&#39;heure, on peut voir que toute structure arborescente poss&egrave;de une racine, un point de d&eacute;part.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Par d&eacute;finition, ce point de d&eacute;part ne poss&egrave;de pas de parent, et si nous explorons chacun de ses enfants de mani&egrave;re r&eacute;cursive, nous parcourons l&#39;ensemble de l&#39;arbre.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">A l&#39;heure actuelle, nous pourrions d&eacute;j&agrave; nous contenter de ce que nous avons, dans l&#39;exemple pr&eacute;c&eacute;dent, la variable &quot;container&quot; poss&egrave;dait deux enfants, des objets de type Bitmap, mais rien ne nous aurait emp&ecirc;ch&eacute; de lui ajouter un enfant ( ou plusieurs ) de type DisplayObjectContainer qui lui-m&ecirc;me aurait contenu des enfants etc etc... Cette fameuse variable &quot;container&quot; devenait la racine de notre arbre.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Cependant, dans le cadre de notre moteur, il serait bon que notre racine poss&egrave;de quelques fonctionnalit&eacute;s suppl&eacute;mentaires, comme le fait d&#39;appeler elle-m&ecirc;me sa m&eacute;thode &quot;render&quot; &agrave; un intervalle de temps r&eacute;gulier, d&eacute;clenchant ainsi la premi&egrave;re &eacute;tape vers l&#39;animation de nos objets en impl&eacute;mentant la notion de </span><span class="c6 c24">frame</span></p><p class="c7"><span class="c6 c24"></span></p><p class="c9"><span class="c6">Il serait bon &eacute;galement que notre racine g&egrave;re &eacute;galement d&#39;autres petites choses comme, le fait d&#39;effacer le canvas &agrave; chaque frame, nous donner le nombre de frames par seconde etc... C&#39;est ce que nous allons faire en introduisant la classe Stage.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><a href="#" name="3c7230b1b13edb8db8bc70ae87ae8c7f15bb7f7d"></a><a href="#" name="46"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">Stage</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on se sert de la fonction de base &quot;webkitRequestAnimationFrame&quot;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// fourni par l&#39;API html5</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window</span><span class="c3">.</span><span class="c2">requestAnimationFrame </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp; window</span><span class="c3">.</span><span class="c2">requestAnimationFrame &nbsp; &nbsp; &nbsp; </span><span class="c3">||</span><span class="c2">&nbsp; </span><span class="c28">//Chromium </span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window</span><span class="c3">.</span><span class="c2">webkitRequestAnimationFrame </span><span class="c3">||</span><span class="c2">&nbsp; </span><span class="c28">//Webkit</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window</span><span class="c3">.</span><span class="c2">mozRequestAnimationFrame &nbsp; &nbsp;</span><span class="c3">||</span><span class="c2">&nbsp;</span><span class="c28">//Mozilla Geko</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window</span><span class="c3">.</span><span class="c2">oRequestAnimationFrame &nbsp; &nbsp; &nbsp;</span><span class="c3">||</span><span class="c2">&nbsp;</span><span class="c28">//Opera Presto</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window</span><span class="c3">.</span><span class="c2">msRequestAnimationFrame &nbsp; &nbsp; </span><span class="c3">||</span><span class="c2">&nbsp;</span><span class="c28">//IE Trident?</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">callback</span><span class="c3">,</span><span class="c2">&nbsp;element</span><span class="c3">){</span><span class="c2">&nbsp;</span><span class="c28">//Fallback function</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window</span><span class="c3">.</span><span class="c2">setTimeout</span><span class="c3">(</span><span class="c2">callback</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">10</span><span class="c3">);</span><span class="c5 c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">})();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_construct</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">registerClass</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">Stage</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;Stage&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">extend</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c10">&quot;Stage&quot;</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;DisplayObjectContainer&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Stage</span><span class="c3">.</span><span class="c2">_instance </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c1">Stage</span><span class="c3">.</span><span class="c2">getInstance </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">Stage</span><span class="c3">.</span><span class="c2">_instance </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Stage</span><span class="c3">.</span><span class="c2">_instance </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Stage</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c1">Stage</span><span class="c3">.</span><span class="c5 c2">_instance;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Stage</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_lastTime </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c1">Stage</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_frameCount </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c1">Stage</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_fps </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c1">Stage</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_canvas </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c1">Stage</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_context </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c1">Stage</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_debug </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">false;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Stage</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">init </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c5 c2">canvas)</span></p><p class="c0"><span class="c3">{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_canvas </span><span class="c3">=</span><span class="c5 c2">&nbsp;canvas;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_context </span><span class="c3">=</span><span class="c2">&nbsp;canvas</span><span class="c3">.</span><span class="c2">getContext</span><span class="c3">(</span><span class="c10">&quot;2d&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_enterFrame</span><span class="c3">();</span><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Stage</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_enterFrame </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;curTime </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Date</span><span class="c3">().</span><span class="c2">getTime</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;scope </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_frameCount</span><span class="c3">++;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;curTime </span><span class="c3">-</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_lastTime </span><span class="c3">&gt;=</span><span class="c2">&nbsp;</span><span class="c4">1000</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_fps </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">_frameCount;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_frameCount </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_lastTime </span><span class="c3">=</span><span class="c5 c2">&nbsp;curTime;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_context</span><span class="c3">.</span><span class="c2">clearRect</span><span class="c3">(</span><span class="c4">0</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_canvas</span><span class="c3">.</span><span class="c2">width</span><span class="c3">,</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_canvas</span><span class="c3">.</span><span class="c2">height</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_context</span><span class="c3">.</span><span class="c2">save</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">render</span><span class="c3">(</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_context</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_context</span><span class="c3">.</span><span class="c2">restore</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_debug </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">true</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_context</span><span class="c3">.</span><span class="c2">save</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_context</span><span class="c3">.</span><span class="c2">beginPath</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;black&quot;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_context</span><span class="c3">.</span><span class="c2">fillRect</span><span class="c3">(</span><span class="c4">0</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c4">100</span><span class="c3">,</span><span class="c4">30</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_context</span><span class="c3">.</span><span class="c2">fill</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_context</span><span class="c3">.</span><span class="c2">fillStyle </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;red&quot;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_context</span><span class="c3">.</span><span class="c2">font </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&#39;italic 20pt Calibri&#39;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_context</span><span class="c3">.</span><span class="c2">fillText</span><span class="c3">(</span><span class="c10">&quot;fps: &quot;</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_fps</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c4">30</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_context</span><span class="c3">.</span><span class="c2">restore</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window</span><span class="c3">.</span><span class="c5 c2">requestAnimationFrame(</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c2 c5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scope</span><span class="c3">.</span><span class="c2">_enterFrame</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Stage</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">getCanvas </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">_canvas;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Stage</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">getContext </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">_context;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Stage</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">getFPS </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">_fps;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Stage</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">setDebug </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c5 c2">&nbsp;debug )</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_debug </span><span class="c3">=</span><span class="c5 c2">&nbsp;debug;</span></p><p class="c0"><span class="c3">};</span></p><p class="c20 c7"><span class="c5 c6 c22"></span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Comme vous pouvez le voir, notre classe Stage h&eacute;rite de DisplayObjectContainer, ainsi nous pourrons lui ajouter des enfants. On, peut &eacute;galement constater quelques ajouts de fonctionnalit&eacute;s comme un compteur de FPS ( frames par seconde ) ou l&#39;utilisation d&#39;une m&eacute;thode de l&#39;API html5 &quot;</span><span class="c6 c23">requestAnimationFrame</span><span class="c6">&quot;.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Cette derni&egrave;re est utilis&eacute; de pr&eacute;f&eacute;rence &agrave; la m&eacute;thode setTimeout, en effet, le navigateur va la d&eacute;clencher de lui-m&ecirc;me apr&egrave;s que toutes op&eacute;rations de dessin soient termin&eacute;es, optimisant ainsi l&#39;affichage et donc la fluidit&eacute; de notre application. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">J&#39;ai encore fait ici le choix du singleton, en effet, la racine est unique par d&eacute;finition, il ne sert donc &agrave; rien de cr&eacute;er de multiples instances de Stage, mais si vous trouvez une utilit&eacute; quelconque &agrave; le faite, n&#39;h&eacute;sitez pas, exp&eacute;rimentez par vous-m&ecirc;mes.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Comme d&#39;habitude, voici le code d&#39;exemple : </span></p><p class="c7"><span class="c6"></span></p><a href="#" name="2af443b8f5aa42008ea4f09e7d1a168cb4feab3b"></a><a href="#" name="47"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c28">/* Point d&#39;entr&eacute;e de l&#39;application */</span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;init</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on d&eacute;marre la plateforme Tomahawk puis on charge les fichiers</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">run</span><span class="c3">();</span><span class="c5 c2">&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">onComplete </span><span class="c3">=</span><span class="c2">&nbsp;onComplete</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">addFile</span><span class="c3">(</span><span class="c10">&quot;ground.png&quot;</span><span class="c3">,</span><span class="c10">&quot;ground&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">load</span><span class="c3">();</span></p><p class="c0"><span class="c3">}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;onComplete</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">AssetsLoader</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">getData</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;canvas </span><span class="c3">=</span><span class="c2">&nbsp;document</span><span class="c3">.</span><span class="c2">getElementById</span><span class="c3">(</span><span class="c10">&#39;tomahawk&#39;</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on initialise la racine en lui envoyant la r&eacute;f&eacute;rence vers le canvas</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Stage</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">init</span><span class="c3">(</span><span class="c2">canvas</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">for</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;</span><span class="c15">alias</span><span class="c2">&nbsp;</span><span class="c15">in</span><span class="c2">&nbsp;data </span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">addImage</span><span class="c3">(</span><span class="c2">data</span><span class="c3">[</span><span class="c15">alias</span><span class="c3">],</span><span class="c15">alias</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on cr&eacute;e un nouvel atlas</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;atlas </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">TextureAtlas</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on lui associe une image qui sera celle partag&eacute;e par toutes les textures stock&eacute;e en son sein</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atlas</span><span class="c3">.</span><span class="c2">data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">AssetsManager</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">getImageByAlias</span><span class="c3">(</span><span class="c10">&quot;ground&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on cr&eacute;e deux textures diff&eacute;rentes, portant un nom diff&eacute;rent, ayant chacune la m&ecirc;me image</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// mais pas les m&ecirc;mes portions d&#39;image associ&eacute;es</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atlas</span><span class="c3">.</span><span class="c2">createTexture</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c10">&quot;texture_1&quot;</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c4">64</span><span class="c3">,</span><span class="c4">43</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;texture </span><span class="c3">=</span><span class="c2">&nbsp;atlas</span><span class="c3">.</span><span class="c2">getTextureByName</span><span class="c3">(</span><span class="c10">&quot;texture_1&quot;</span><span class="c3">);</span><span class="c2">&nbsp;</span><span class="c28">// on retrouve notre texture</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;bmp </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Bitmap</span><span class="c3">();</span><span class="c2">&nbsp;</span><span class="c28">// on cr&eacute;er un nouvel objet de type Bitmap</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">texture </span><span class="c3">=</span><span class="c2">&nbsp;texture</span><span class="c3">;</span><span class="c2">&nbsp;</span><span class="c28">// on y associe la texture</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">width </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">64</span><span class="c3">;</span><span class="c2">&nbsp;</span><span class="c28">// on d&eacute;finie la largeur</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">height </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">43</span><span class="c3">;</span><span class="c28">//... puis la hauteur</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Stage</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">addChild</span><span class="c3">(</span><span class="c2">bmp</span><span class="c3">);</span><span class="c2">&nbsp;</span><span class="c28">// on ajoute l&#39;enfant &agrave; la racine</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// on recommence l&#39;op&eacute;ration tout en changeant les coordonn&eacute;es du deuxi&egrave;me enfant</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Bitmap</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">texture </span><span class="c3">=</span><span class="c2">&nbsp;texture</span><span class="c3">;</span><span class="c5 c2">&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">width </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">64</span><span class="c3">;</span><span class="c5 c2">&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">height </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">43</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">x </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bmp</span><span class="c3">.</span><span class="c2">y </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">100</span><span class="c3">;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Stage</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">addChild</span><span class="c3">(</span><span class="c2">bmp</span><span class="c3">);</span><span class="c2">&nbsp;</span><span class="c28">// on l&#39;ajoute aussi</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Stage</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">setDebug</span><span class="c3">(</span><span class="c15">true</span><span class="c3">);</span><span class="c28">// on souhaite voir le fps</span></p><p class="c0"><span class="c5 c2">}</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Beaucoup plus pratique n&#39;est-ce pas ? </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">A l&#39;avenir nous devrons seulement initialiser la racine en lui passant le canvas en param&egrave;tre. Nous n&#39;avons plus &agrave; retrouver le context et &agrave; l&#39;envoyer &agrave; toutes les instances de DisplayObject ou DisplayObjectContainer, la racine se charge de tout, et &agrave; chaque frame s&#39;il vous pla&icirc;t !</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Nous allons maintenant encha&icirc;ner sur les transformations imbriqu&eacute;es, comment r&eacute;p&eacute;rcuter la rotation, la translation, le scale d&#39;un parent sur l&#39;ensemble de ses enfants et ainsi de suite ?</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c33 c24"></span></p><p class="c7"><span class="c33 c24"></span></p><p class="c7"><span class="c33 c24"></span></p><p class="c7"><span class="c33 c24"></span></p><p class="c7"><span class="c33 c24"></span></p><p class="c7 c32"><span class="c33 c24"></span></p><hr style="page-break-before:always;display:none;"><p class="c7 c32"><span class="c33 c24"></span></p><p class="c7 c32"><span class="c33 c24"></span></p><p class="c12 c9 c32 title"><a name="h.knz5jqpml01"></a><span>Manipuler les objets : transformations et calculs matriciels.</span></p><p class="c7"><span class="c33 c24"></span></p><p class="c7"><span class="c33 c24"></span></p><p class="c12 c9 subtitle"><a name="h.vaemnti56vpj"></a><span>Le probl&egrave;me des transformations imbriqu&eacute;es.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Le probl&egrave;me des transformations imbriqu&eacute;es est tr&egrave;s simple, il faut que les transformations d&#39;un parent soient r&eacute;percut&eacute;es sur ses enfants, et ce, de mani&egrave;re r&eacute;cursive et infinie. Concr&egrave;tement, cela demande de conna&icirc;tre en permanence l&#39;&eacute;tat actuel de l&#39;ensemble des transformations appliqu&eacute;es sur un objet ET ajouter les siennes propres. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Exemple: </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 368.00px;"><img alt="tree2.png" src="images/image02.png" style="width: 624.00px; height: 368.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Admettons que dans le sch&eacute;ma suivant:</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="35edf8d3094c2d09412b6876e68012a7c78bb0c2"></a><a href="#" name="48"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c5 c6 c22">racine.x = 0</span></p><p class="c0"><span class="c5 c6 c22">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enfant 1.x = 10</span></p><p class="c0"><span class="c5 c6 c22">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enfant 3.x = 0</span></p><p class="c0"><span class="c5 c6 c22">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enfant 4.x = 10</span></p><p class="c0"><span class="c5 c6 c22">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enfant 5.x = 20</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Si l&#39;on part du principe que l&#39;on doit r&eacute;percuter les transformations du parent sur l&#39;enfant alors les coordonn&eacute;es </span><span class="c6 c24">r&eacute;elles </span><span class="c6">en x &nbsp;de chacun de ces DisplayObject seront:</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="a941dbfc04997b327f4adedac88818012161957f"></a><a href="#" name="49"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c5 c6 c22">racine.x = 0</span></p><p class="c0"><span class="c5 c6 c22">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enfant 1.x = 10</span></p><p class="c0"><span class="c5 c6 c22">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enfant 3.x = 10</span></p><p class="c0"><span class="c5 c6 c22">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enfant 4.x = 20</span></p><p class="c0"><span class="c5 c6 c22">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enfant 5.x = 30</span></p><p class="c20 c7"><span class="c5 c6 c22"></span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Cela para&icirc;t simple dit comme cela, mais si on ne sait pas comment le g&eacute;rer proprement cela devient vite un enfer, surtout qu&#39;il faut prendre en compte les autres types de transformations comme le scale ou la rotation.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Et si je vous disais que nous avons d&eacute;j&agrave; la solution, </span><span class="c6">due</span><span class="c6">&nbsp;le code que nous avons &eacute;crit r&egrave;gle ce probl&egrave;me ?</span></p><p class="c9"><span class="c6">Si je vous disais que sans le savoir vous avez utilis&eacute; l&#39;outil math&eacute;matique ad&eacute;quat ? </span></p><p class="c9"><span class="c6 c66">Que nous avons rejoints Morpheus et N&eacute;o... ,</span><span class="c6">&nbsp;que nous avons utilis&eacute; des </span><span class="c6 c24">matrices</span><span class="c6">&nbsp;?</span></p><p class="c7"><span class="c6 c66"></span></p><p class="c9"><span class="c6">Mais qu&#39;est-ce qu&#39;une matrice ? </span></p><p class="c7"><span class="c6"></span></p><p class="c12 c9 subtitle"><a name="h.fghwoacw9ncr"></a><span>Les matrices, pourquoi faire ?</span></p><p class="c9"><span class="c6">Une matrice est un outil de math&eacute;matique permettant de r&eacute;soudre certaines situations, elles sont, avec les Quaternions l&#39;un des pans essentiels de la programmation graphique, bien que ces derniers soient surtout utilis&eacute;s pour la 3D.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">En notation math&eacute;matique, sch&eacute;matiquement cela ressemble &agrave; un tableau &agrave; 2 dimensions pouvant contenir le nombre de colonnes et de lignes dont on a besoin. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Voici la r&eacute;pr&eacute;sentation usuelle d&#39;une matrice identit&eacute; poss&eacute;dant 4 lignes et 4 colonnes.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 126.00px; height: 111.00px;"><img alt="matrix.png" src="images/image06.png" style="width: 126.00px; height: 111.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Sachez seulement que l&#39;une des propri&eacute;t&eacute;s principale de la matrice est sa </span><span class="c6 c24">commutativit&eacute;</span><span class="c6">, &ccedil;&agrave;d que les transformations qu&#39;on lui applique se cumulent et que le r&eacute;sultat des op&eacute;rations d&eacute;pend de l&#39;ordre dans lequel on les &eacute;x&eacute;cute.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Ca ne vous rappelle rien, Les m&eacute;thodes de transformation l&#39;objet context bien sur !</span></p><p class="c7"><span class="c6"></span></p><p class="c7 c12 subtitle"><a name="h.xiajguisou8u"></a></p><p class="c12 c9 subtitle"><a name="h.t8her29vpa1j"></a><span>Comment utiliser les matrices ?</span></p><p class="c9"><span class="c6">Les m&eacute;thodes de transformation de l&#39;objet context nous permettent de manipuler, &agrave; notre insu jusque l&agrave;, une matrice 3x3 ( 3 lignes, 3 colonnes ) et de lui appliquer des transformations. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Ce qui est g&eacute;nial c&#39;est comme les matrices sont commutatives, les transformations que l&#39;on applique se cumulent et que l&#39;on peut &agrave; tout moment revenir &agrave; un &eacute;tat ant&eacute;rieur d&#39;une matrice. </span></p><p class="c9"><span class="c6">Les m&eacute;thodes context.save() et context.restore(), sauvegardent et restituent ( entre autres ) l&#39;&eacute;tat de la matrice de transformations &agrave; un instant </span><span class="c6 c23">t</span><span class="c6">.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Qui fait que lorsque j&#39;appelle la m&eacute;thode </span><span class="c6 c23">render </span><span class="c6">&nbsp;de mon DisplayObjectContainer je r&eacute;alise l&#39;op&eacute;ration suivante: </span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_qx2879sjrnaj-0 start"><li class="c38 c9"><span class="c6">je sauvegarde l&#39;&eacute;tat actuel de la matrice</span></li></ul><ul class="c25 lst-kix_yn0l7ue14v4k-0 start"><li class="c38 c9"><span class="c6">j&#39;applique mes transformations au context</span></li><li class="c38 c9"><span class="c6">Je boucle sur mes enfants, j&#39;appelle la m&eacute;hode render de chacun et par la m&ecirc;me j&#39;applique les transformations des enfants au context etc etc... Ces transformations sont cumul&eacute;es &agrave; celle de mon parent</span></li><li class="c38 c9"><span class="c6">Je restaure le context sauvegard&eacute; &agrave; l&#39;&eacute;tape 1</span></li></ul><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">L&#39;op&eacute;ration est r&eacute;cursive et est d&eacute;j&agrave; impl&eacute;ment&eacute;, essayez vous verrez que tout fonctionne</span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_rr72dbc52mfr-0 start"><li class="c38 c9"><span class="c6">Impl&eacute;mentation des matrices &nbsp;dans le moteur.</span></li></ul><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Les matrices sont pr&eacute;sentes nativement dans le moteur, le seul d&eacute;faut de l&#39;API, c&#39;est qu&#39;elle ne nous permet pas de r&eacute;cup&eacute;rer l&#39;&eacute;tat actuel de la matrice et de le stocker quelque part, ce qui nous sera utile par la suite.</span></p><p class="c9"><span class="c6">Je vous propose donc d&#39;impl&eacute;menter les matrices d&#39;une autre fa&ccedil;on, &agrave; l&#39;aide d&#39;une classe Matrix2D dont voici le code source: </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">*Cette classe Matrix2D est une petite adaptation de la classe Matrix2D utilis&eacute;e par le moteur CreateJs ( </span><span class="c6 c46"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Fcreatejs.com&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFcalFQsfzdQSyJDBQoBq5Fs8k-RA">http://www.createjs.com</a></span><span class="c6">&nbsp;).</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="d0d3d6c2015b1449a5c41df0e759b5dcb0fea7a0"></a><a href="#" name="50"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">(</span><span class="c2">a</span><span class="c3">,</span><span class="c2">&nbsp;b</span><span class="c3">,</span><span class="c2">&nbsp;c</span><span class="c3">,</span><span class="c2">&nbsp;d</span><span class="c3">,</span><span class="c2">&nbsp;tx</span><span class="c3">,</span><span class="c5 c2">&nbsp;ty)</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">initialize</span><span class="c3">(</span><span class="c2">a</span><span class="c3">,</span><span class="c2">&nbsp;b</span><span class="c3">,</span><span class="c2">&nbsp;c</span><span class="c3">,</span><span class="c2">&nbsp;d</span><span class="c3">,</span><span class="c2">&nbsp;tx</span><span class="c3">,</span><span class="c2">&nbsp;ty</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c28">// static public properties:</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">An</span><span class="c2">&nbsp;identity matrix</span><span class="c3">,</span><span class="c2">&nbsp;representing a </span><span class="c15">null</span><span class="c5 c2">&nbsp;transformation.</span></p><p class="c0"><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@property</span><span class="c5 c2">&nbsp;identity</span></p><p class="c0"><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@static</span></p><p class="c0"><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@type</span><span class="c2">&nbsp;</span><span class="c1">Matrix2D</span></p><p class="c0"><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@readonly</span></p><p class="c0"><span class="c2">&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">identity </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span><span class="c28">// set at bottom of class definition.</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Multiplier</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c2">&nbsp;converting degrees to radians</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Used</span><span class="c2">&nbsp;internally </span><span class="c15">by</span><span class="c2">&nbsp;</span><span class="c1">Matrix2D.</span></p><p class="c0"><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@property</span><span class="c5 c2">&nbsp;DEG_TO_RAD</span></p><p class="c0"><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@static</span></p><p class="c0"><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@final</span></p><p class="c0"><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@type</span><span class="c2">&nbsp;</span><span class="c1">Number</span></p><p class="c0"><span class="c2">&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@readonly</span></p><p class="c0"><span class="c2">&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">DEG_TO_RAD </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">PI</span><span class="c3">/</span><span class="c4">180;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c28">// public properties:</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Position</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">)</span><span class="c2">&nbsp;</span><span class="c15">in</span><span class="c2">&nbsp;a </span><span class="c4">3x3</span><span class="c5 c2">&nbsp;affine transformation matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@property</span><span class="c5 c2">&nbsp;a</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@type</span><span class="c2">&nbsp;</span><span class="c1">Number</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">a </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">1;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Position</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">1</span><span class="c3">)</span><span class="c2">&nbsp;</span><span class="c15">in</span><span class="c2">&nbsp;a </span><span class="c4">3x3</span><span class="c5 c2">&nbsp;affine transformation matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@property</span><span class="c5 c2">&nbsp;b</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@type</span><span class="c2">&nbsp;</span><span class="c1">Number</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">b </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Position</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c4">1</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">)</span><span class="c2">&nbsp;</span><span class="c15">in</span><span class="c2">&nbsp;a </span><span class="c4">3x3</span><span class="c5 c2">&nbsp;affine transformation matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@property</span><span class="c5 c2">&nbsp;c</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@type</span><span class="c2">&nbsp;</span><span class="c1">Number</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">c </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Position</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c4">1</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">1</span><span class="c3">)</span><span class="c2">&nbsp;</span><span class="c15">in</span><span class="c2">&nbsp;a </span><span class="c4">3x3</span><span class="c5 c2">&nbsp;affine transformation matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@property</span><span class="c5 c2">&nbsp;d</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@type</span><span class="c2">&nbsp;</span><span class="c1">Number</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">d </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">1;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Position</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c4">2</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">)</span><span class="c2">&nbsp;</span><span class="c15">in</span><span class="c2">&nbsp;a </span><span class="c4">3x3</span><span class="c5 c2">&nbsp;affine transformation matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@property</span><span class="c5 c2">&nbsp;tx</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@type</span><span class="c2">&nbsp;</span><span class="c1">Number</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">tx </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Position</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c4">2</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">1</span><span class="c3">)</span><span class="c2">&nbsp;</span><span class="c15">in</span><span class="c2">&nbsp;a </span><span class="c4">3x3</span><span class="c5 c2">&nbsp;affine transformation matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@property</span><span class="c5 c2">&nbsp;ty</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@type</span><span class="c2">&nbsp;</span><span class="c1">Number</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">ty </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c28">// constructor:</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Initialization</span><span class="c2">&nbsp;method</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Can</span><span class="c5 c2">&nbsp;also be used to reinitialize the instance.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;initialize</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c3">[</span><span class="c2">a</span><span class="c3">=</span><span class="c4">1</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c1">Specifies</span><span class="c2">&nbsp;the a property </span><span class="c15">for</span><span class="c2">&nbsp;the </span><span class="c15">new</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c3">[</span><span class="c2">b</span><span class="c3">=</span><span class="c4">0</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c1">Specifies</span><span class="c2">&nbsp;the b property </span><span class="c15">for</span><span class="c2">&nbsp;the </span><span class="c15">new</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c3">[</span><span class="c2">c</span><span class="c3">=</span><span class="c4">0</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c1">Specifies</span><span class="c2">&nbsp;the c property </span><span class="c15">for</span><span class="c2">&nbsp;the </span><span class="c15">new</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c3">[</span><span class="c2">d</span><span class="c3">=</span><span class="c4">1</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c1">Specifies</span><span class="c2">&nbsp;the d property </span><span class="c15">for</span><span class="c2">&nbsp;the </span><span class="c15">new</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c3">[</span><span class="c2">tx</span><span class="c3">=</span><span class="c4">0</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c1">Specifies</span><span class="c2">&nbsp;the tx property </span><span class="c15">for</span><span class="c2">&nbsp;the </span><span class="c15">new</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c3">[</span><span class="c2">ty</span><span class="c3">=</span><span class="c4">0</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c1">Specifies</span><span class="c2">&nbsp;the ty property </span><span class="c15">for</span><span class="c2">&nbsp;the </span><span class="c15">new</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c1">This</span><span class="c2">&nbsp;instance</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Useful</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c5 c2">&nbsp;chaining method calls.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">initialize </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">a</span><span class="c3">,</span><span class="c2">&nbsp;b</span><span class="c3">,</span><span class="c2">&nbsp;c</span><span class="c3">,</span><span class="c2">&nbsp;d</span><span class="c3">,</span><span class="c2">&nbsp;tx</span><span class="c3">,</span><span class="c2">&nbsp;ty</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">a </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c2">a </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">)</span><span class="c2">&nbsp;</span><span class="c3">?</span><span class="c2">&nbsp;</span><span class="c4">1</span><span class="c2">&nbsp;</span><span class="c3">:</span><span class="c5 c2">&nbsp;a;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b </span><span class="c3">=</span><span class="c2">&nbsp;b </span><span class="c3">||</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">c </span><span class="c3">=</span><span class="c2">&nbsp;c </span><span class="c3">||</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c2">d </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">)</span><span class="c2">&nbsp;</span><span class="c3">?</span><span class="c2">&nbsp;</span><span class="c4">1</span><span class="c2">&nbsp;</span><span class="c3">:</span><span class="c5 c2">&nbsp;d;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">tx </span><span class="c3">=</span><span class="c2">&nbsp;tx </span><span class="c3">||</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty </span><span class="c3">=</span><span class="c2">&nbsp;ty </span><span class="c3">||</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c28">// public methods:</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Concatenates</span><span class="c2">&nbsp;the specified matrix properties </span><span class="c15">with</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">All</span><span class="c5 c2">&nbsp;parameters are required.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;prepend</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;a</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;b</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;c</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;d</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;tx</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;ty</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c1">This</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Useful</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c5 c2">&nbsp;chaining method calls.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">prepend </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">a</span><span class="c3">,</span><span class="c2">&nbsp;b</span><span class="c3">,</span><span class="c2">&nbsp;c</span><span class="c3">,</span><span class="c2">&nbsp;d</span><span class="c3">,</span><span class="c2">&nbsp;tx</span><span class="c3">,</span><span class="c2">&nbsp;ty</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;tx1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">tx;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c2">a </span><span class="c3">!=</span><span class="c2">&nbsp;</span><span class="c4">1</span><span class="c2">&nbsp;</span><span class="c3">||</span><span class="c2">&nbsp;b </span><span class="c3">!=</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c2">&nbsp;</span><span class="c3">||</span><span class="c2">&nbsp;c </span><span class="c3">!=</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c2">&nbsp;</span><span class="c3">||</span><span class="c2">&nbsp;d </span><span class="c3">!=</span><span class="c2">&nbsp;</span><span class="c4">1</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;a1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">a;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;c1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">c;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">a &nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;a1</span><span class="c3">*</span><span class="c2">a</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b</span><span class="c3">*</span><span class="c5 c2">c;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b &nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;a1</span><span class="c3">*</span><span class="c2">b</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b</span><span class="c3">*</span><span class="c5 c2">d;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">c &nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;c1</span><span class="c3">*</span><span class="c2">a</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d</span><span class="c3">*</span><span class="c5 c2">c;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d &nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;c1</span><span class="c3">*</span><span class="c2">b</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d</span><span class="c3">*</span><span class="c5 c2">d;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">tx </span><span class="c3">=</span><span class="c2">&nbsp;tx1</span><span class="c3">*</span><span class="c2">a</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty</span><span class="c3">*</span><span class="c2">c</span><span class="c3">+</span><span class="c5 c2">tx;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty </span><span class="c3">=</span><span class="c2">&nbsp;tx1</span><span class="c3">*</span><span class="c2">b</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty</span><span class="c3">*</span><span class="c2">d</span><span class="c3">+</span><span class="c5 c2">ty;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Appends</span><span class="c2">&nbsp;the specified matrix properties </span><span class="c15">with</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">All</span><span class="c5 c2">&nbsp;parameters are required.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;append</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;a</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;b</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;c</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;d</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;tx</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;ty</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c1">This</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Useful</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c5 c2">&nbsp;chaining method calls.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">append </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">a</span><span class="c3">,</span><span class="c2">&nbsp;b</span><span class="c3">,</span><span class="c2">&nbsp;c</span><span class="c3">,</span><span class="c2">&nbsp;d</span><span class="c3">,</span><span class="c2">&nbsp;tx</span><span class="c3">,</span><span class="c2">&nbsp;ty</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;a1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">a;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;b1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">b;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;c1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">c;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;d1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">d;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">a &nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;a</span><span class="c3">*</span><span class="c2">a1</span><span class="c3">+</span><span class="c2">b</span><span class="c3">*</span><span class="c5 c2">c1;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b &nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;a</span><span class="c3">*</span><span class="c2">b1</span><span class="c3">+</span><span class="c2">b</span><span class="c3">*</span><span class="c5 c2">d1;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">c &nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;c</span><span class="c3">*</span><span class="c2">a1</span><span class="c3">+</span><span class="c2">d</span><span class="c3">*</span><span class="c5 c2">c1;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d &nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;c</span><span class="c3">*</span><span class="c2">b1</span><span class="c3">+</span><span class="c2">d</span><span class="c3">*</span><span class="c5 c2">d1;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">tx </span><span class="c3">=</span><span class="c2">&nbsp;tx</span><span class="c3">*</span><span class="c2">a1</span><span class="c3">+</span><span class="c2">ty</span><span class="c3">*</span><span class="c2">c1</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">tx;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty </span><span class="c3">=</span><span class="c2">&nbsp;tx</span><span class="c3">*</span><span class="c2">b1</span><span class="c3">+</span><span class="c2">ty</span><span class="c3">*</span><span class="c2">d1</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">ty;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Prepends</span><span class="c2">&nbsp;the specified matrix </span><span class="c15">with</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;prependMatrix</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c5 c2">&nbsp;matrix</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c1">This</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Useful</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c5 c2">&nbsp;chaining method calls.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">prependMatrix </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">matrix</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">prepend</span><span class="c3">(</span><span class="c2">matrix</span><span class="c3">.</span><span class="c2">a</span><span class="c3">,</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">b</span><span class="c3">,</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">c</span><span class="c3">,</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">d</span><span class="c3">,</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">tx</span><span class="c3">,</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">ty</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Appends</span><span class="c2">&nbsp;the specified matrix </span><span class="c15">with</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;appendMatrix</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c5 c2">&nbsp;matrix</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c1">This</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Useful</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c5 c2">&nbsp;chaining method calls.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">appendMatrix </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">matrix</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">append</span><span class="c3">(</span><span class="c2">matrix</span><span class="c3">.</span><span class="c2">a</span><span class="c3">,</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">b</span><span class="c3">,</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">c</span><span class="c3">,</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">d</span><span class="c3">,</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">tx</span><span class="c3">,</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">ty</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Generates</span><span class="c2">&nbsp;matrix properties </span><span class="c15">from</span><span class="c2">&nbsp;the specified display </span><span class="c15">object</span><span class="c2">&nbsp;transform properties</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">and</span><span class="c2">&nbsp;prepends them </span><span class="c15">with</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">For</span><span class="c2">&nbsp;example</span><span class="c3">,</span><span class="c2">&nbsp;you can </span><span class="c15">use</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c2">&nbsp;to generate a matrix </span><span class="c15">from</span><span class="c2">&nbsp;a display </span><span class="c15">object</span><span class="c3">:</span><span class="c2">&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;mtx </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;mtx</span><span class="c3">.</span><span class="c2">prependTransform</span><span class="c3">(</span><span class="c2">o</span><span class="c3">.</span><span class="c2">x</span><span class="c3">,</span><span class="c2">&nbsp;o</span><span class="c3">.</span><span class="c2">y</span><span class="c3">,</span><span class="c2">&nbsp;o</span><span class="c3">.</span><span class="c2">scaleX</span><span class="c3">,</span><span class="c2">&nbsp;o</span><span class="c3">.</span><span class="c2">scaleY</span><span class="c3">,</span><span class="c2">&nbsp;o</span><span class="c3">.</span><span class="c2">rotation</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;prependTransform</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;x</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;y</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;scaleX</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;scaleY</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;rotation</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;skewX</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;skewY</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;regX </span><span class="c1">Optional.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;regY </span><span class="c1">Optional.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c1">This</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Useful</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c5 c2">&nbsp;chaining method calls.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">prependTransform </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c2">&nbsp;y</span><span class="c3">,</span><span class="c2">&nbsp;scaleX</span><span class="c3">,</span><span class="c2">&nbsp;scaleY</span><span class="c3">,</span><span class="c2">&nbsp;rotation</span><span class="c3">,</span><span class="c2">&nbsp;skewX</span><span class="c3">,</span><span class="c2">&nbsp;skewY</span><span class="c3">,</span><span class="c2">&nbsp;regX</span><span class="c3">,</span><span class="c2">&nbsp;regY</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c2">rotation</span><span class="c3">%</span><span class="c4">360</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;r </span><span class="c3">=</span><span class="c2">&nbsp;rotation</span><span class="c3">*</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c5 c2">DEG_TO_RAD;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;cos </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">cos</span><span class="c3">(</span><span class="c2">r</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;sin </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">sin</span><span class="c3">(</span><span class="c2">r</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c15">else</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cos </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">1;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sin </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c2">regX </span><span class="c3">||</span><span class="c2">&nbsp;regY</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// append the registration offset:</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">tx </span><span class="c3">-=</span><span class="c2">&nbsp;regX</span><span class="c3">;</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty </span><span class="c3">-=</span><span class="c5 c2">&nbsp;regY;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c2">skewX </span><span class="c3">||</span><span class="c2">&nbsp;skewY</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// TODO: can this be combined into a single prepend operation?</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;skewX </span><span class="c3">*=</span><span class="c2">&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c5 c2">DEG_TO_RAD;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;skewY </span><span class="c3">*=</span><span class="c2">&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c5 c2">DEG_TO_RAD;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">prepend</span><span class="c3">(</span><span class="c2">cos</span><span class="c3">*</span><span class="c2">scaleX</span><span class="c3">,</span><span class="c2">&nbsp;sin</span><span class="c3">*</span><span class="c2">scaleX</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c2">sin</span><span class="c3">*</span><span class="c2">scaleY</span><span class="c3">,</span><span class="c2">&nbsp;cos</span><span class="c3">*</span><span class="c2">scaleY</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">prepend</span><span class="c3">(</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">cos</span><span class="c3">(</span><span class="c2">skewY</span><span class="c3">),</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">sin</span><span class="c3">(</span><span class="c2">skewY</span><span class="c3">),</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">sin</span><span class="c3">(</span><span class="c2">skewX</span><span class="c3">),</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">cos</span><span class="c3">(</span><span class="c2">skewX</span><span class="c3">),</span><span class="c2">&nbsp;x</span><span class="c3">,</span><span class="c2">&nbsp;y</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c15">else</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">prepend</span><span class="c3">(</span><span class="c2">cos</span><span class="c3">*</span><span class="c2">scaleX</span><span class="c3">,</span><span class="c2">&nbsp;sin</span><span class="c3">*</span><span class="c2">scaleX</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c2">sin</span><span class="c3">*</span><span class="c2">scaleY</span><span class="c3">,</span><span class="c2">&nbsp;cos</span><span class="c3">*</span><span class="c2">scaleY</span><span class="c3">,</span><span class="c2">&nbsp;x</span><span class="c3">,</span><span class="c2">&nbsp;y</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Generates</span><span class="c2">&nbsp;matrix properties </span><span class="c15">from</span><span class="c2">&nbsp;the specified display </span><span class="c15">object</span><span class="c2">&nbsp;transform properties</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">and</span><span class="c2">&nbsp;appends them </span><span class="c15">with</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">For</span><span class="c2">&nbsp;example</span><span class="c3">,</span><span class="c2">&nbsp;you can </span><span class="c15">use</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c2">&nbsp;to generate a matrix </span><span class="c15">from</span><span class="c2">&nbsp;a display </span><span class="c15">object</span><span class="c3">:</span><span class="c2">&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;mtx </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;mtx</span><span class="c3">.</span><span class="c2">appendTransform</span><span class="c3">(</span><span class="c2">o</span><span class="c3">.</span><span class="c2">x</span><span class="c3">,</span><span class="c2">&nbsp;o</span><span class="c3">.</span><span class="c2">y</span><span class="c3">,</span><span class="c2">&nbsp;o</span><span class="c3">.</span><span class="c2">scaleX</span><span class="c3">,</span><span class="c2">&nbsp;o</span><span class="c3">.</span><span class="c2">scaleY</span><span class="c3">,</span><span class="c2">&nbsp;o</span><span class="c3">.</span><span class="c2">rotation</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;appendTransform</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;x</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;y</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;scaleX</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;scaleY</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;rotation</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;skewX</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;skewY</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;regX </span><span class="c1">Optional.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;regY </span><span class="c1">Optional.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c1">This</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Useful</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c5 c2">&nbsp;chaining method calls.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">appendTransform </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c2">&nbsp;y</span><span class="c3">,</span><span class="c2">&nbsp;scaleX</span><span class="c3">,</span><span class="c2">&nbsp;scaleY</span><span class="c3">,</span><span class="c2">&nbsp;rotation</span><span class="c3">,</span><span class="c2">&nbsp;skewX</span><span class="c3">,</span><span class="c2">&nbsp;skewY</span><span class="c3">,</span><span class="c2">&nbsp;regX</span><span class="c3">,</span><span class="c2">&nbsp;regY</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c2">rotation</span><span class="c3">%</span><span class="c4">360</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;r </span><span class="c3">=</span><span class="c2">&nbsp;rotation</span><span class="c3">*</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c5 c2">DEG_TO_RAD;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;cos </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">cos</span><span class="c3">(</span><span class="c2">r</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;sin </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">sin</span><span class="c3">(</span><span class="c2">r</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c15">else</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cos </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">1;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sin </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c2">skewX </span><span class="c3">||</span><span class="c2">&nbsp;skewY</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// TODO: can this be combined into a single append?</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;skewX </span><span class="c3">*=</span><span class="c2">&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c5 c2">DEG_TO_RAD;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;skewY </span><span class="c3">*=</span><span class="c2">&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c5 c2">DEG_TO_RAD;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">append</span><span class="c3">(</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">cos</span><span class="c3">(</span><span class="c2">skewY</span><span class="c3">),</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">sin</span><span class="c3">(</span><span class="c2">skewY</span><span class="c3">),</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">sin</span><span class="c3">(</span><span class="c2">skewX</span><span class="c3">),</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">cos</span><span class="c3">(</span><span class="c2">skewX</span><span class="c3">),</span><span class="c2">&nbsp;x</span><span class="c3">,</span><span class="c2">&nbsp;y</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">append</span><span class="c3">(</span><span class="c2">cos</span><span class="c3">*</span><span class="c2">scaleX</span><span class="c3">,</span><span class="c2">&nbsp;sin</span><span class="c3">*</span><span class="c2">scaleX</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c2">sin</span><span class="c3">*</span><span class="c2">scaleY</span><span class="c3">,</span><span class="c2">&nbsp;cos</span><span class="c3">*</span><span class="c2">scaleY</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c15">else</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">append</span><span class="c3">(</span><span class="c2">cos</span><span class="c3">*</span><span class="c2">scaleX</span><span class="c3">,</span><span class="c2">&nbsp;sin</span><span class="c3">*</span><span class="c2">scaleX</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c2">sin</span><span class="c3">*</span><span class="c2">scaleY</span><span class="c3">,</span><span class="c2">&nbsp;cos</span><span class="c3">*</span><span class="c2">scaleY</span><span class="c3">,</span><span class="c2">&nbsp;x</span><span class="c3">,</span><span class="c2">&nbsp;y</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c2">regX </span><span class="c3">||</span><span class="c2">&nbsp;regY</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// prepend the registration offset:</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">tx </span><span class="c3">-=</span><span class="c2">&nbsp;regX</span><span class="c3">*</span><span class="c15">this</span><span class="c3">.</span><span class="c2">a</span><span class="c3">+</span><span class="c2">regY</span><span class="c3">*</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">c;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty </span><span class="c3">-=</span><span class="c2">&nbsp;regX</span><span class="c3">*</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b</span><span class="c3">+</span><span class="c2">regY</span><span class="c3">*</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">d;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Applies</span><span class="c5 c2">&nbsp;a rotation transformation to the matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;rotate</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;angle </span><span class="c1">The</span><span class="c2">&nbsp;angle </span><span class="c15">in</span><span class="c2">&nbsp;radians</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">To</span><span class="c2">&nbsp;</span><span class="c15">use</span><span class="c2">&nbsp;degrees</span><span class="c3">,</span><span class="c2">&nbsp;multiply </span><span class="c15">by</span><span class="c2">&nbsp;</span><span class="c10">&lt;code&gt;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">PI</span><span class="c3">/</span><span class="c4">180</span><span class="c3">&lt;/</span><span class="c2">code</span><span class="c3">&gt;.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c1">This</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Useful</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c5 c2">&nbsp;chaining method calls.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">rotate </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">angle</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;cos </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">cos</span><span class="c3">(</span><span class="c2">angle</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;sin </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">sin</span><span class="c3">(</span><span class="c2">angle</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;a1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">a;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;c1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">c;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;tx1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">tx;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">a </span><span class="c3">=</span><span class="c2">&nbsp;a1</span><span class="c3">*</span><span class="c2">cos</span><span class="c3">-</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b</span><span class="c3">*</span><span class="c5 c2">sin;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b </span><span class="c3">=</span><span class="c2">&nbsp;a1</span><span class="c3">*</span><span class="c2">sin</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b</span><span class="c3">*</span><span class="c5 c2">cos;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">c </span><span class="c3">=</span><span class="c2">&nbsp;c1</span><span class="c3">*</span><span class="c2">cos</span><span class="c3">-</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d</span><span class="c3">*</span><span class="c5 c2">sin;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d </span><span class="c3">=</span><span class="c2">&nbsp;c1</span><span class="c3">*</span><span class="c2">sin</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d</span><span class="c3">*</span><span class="c5 c2">cos;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">tx </span><span class="c3">=</span><span class="c2">&nbsp;tx1</span><span class="c3">*</span><span class="c2">cos</span><span class="c3">-</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty</span><span class="c3">*</span><span class="c5 c2">sin;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty </span><span class="c3">=</span><span class="c2">&nbsp;tx1</span><span class="c3">*</span><span class="c2">sin</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty</span><span class="c3">*</span><span class="c5 c2">cos;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Applies</span><span class="c5 c2">&nbsp;a skew transformation to the matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;skew</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;skewX </span><span class="c1">The</span><span class="c2">&nbsp;amount to skew horizontally </span><span class="c15">in</span><span class="c5 c2">&nbsp;degrees.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;skewY </span><span class="c1">The</span><span class="c2">&nbsp;amount to skew vertically </span><span class="c15">in</span><span class="c5 c2">&nbsp;degrees.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c1">This</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Useful</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c5 c2">&nbsp;chaining method calls.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">skew </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">skewX</span><span class="c3">,</span><span class="c2">&nbsp;skewY</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;skewX </span><span class="c3">=</span><span class="c2">&nbsp;skewX</span><span class="c3">*</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c5 c2">DEG_TO_RAD;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;skewY </span><span class="c3">=</span><span class="c2">&nbsp;skewY</span><span class="c3">*</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c5 c2">DEG_TO_RAD;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">append</span><span class="c3">(</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">cos</span><span class="c3">(</span><span class="c2">skewY</span><span class="c3">),</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">sin</span><span class="c3">(</span><span class="c2">skewY</span><span class="c3">),</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">sin</span><span class="c3">(</span><span class="c2">skewX</span><span class="c3">),</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">cos</span><span class="c3">(</span><span class="c2">skewX</span><span class="c3">),</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Applies</span><span class="c5 c2">&nbsp;a scale transformation to the matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;scale</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;x </span><span class="c1">The</span><span class="c5 c2">&nbsp;amount to scale horizontally</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;y </span><span class="c1">The</span><span class="c5 c2">&nbsp;amount to scale vertically</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c1">This</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Useful</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c5 c2">&nbsp;chaining method calls.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">scale </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c2">&nbsp;y</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">a </span><span class="c3">*=</span><span class="c5 c2">&nbsp;x;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d </span><span class="c3">*=</span><span class="c5 c2">&nbsp;y;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">c </span><span class="c3">*=</span><span class="c5 c2">&nbsp;x;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b </span><span class="c3">*=</span><span class="c5 c2">&nbsp;y;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">tx </span><span class="c3">*=</span><span class="c5 c2">&nbsp;x;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty </span><span class="c3">*=</span><span class="c5 c2">&nbsp;y;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Translates</span><span class="c2">&nbsp;the matrix on the x </span><span class="c15">and</span><span class="c5 c2">&nbsp;y axes.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;translate</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;x</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c5 c2">&nbsp;y</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c1">This</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Useful</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c5 c2">&nbsp;chaining method calls.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">translate </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c2">&nbsp;y</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">tx </span><span class="c3">+=</span><span class="c5 c2">&nbsp;x;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty </span><span class="c3">+=</span><span class="c5 c2">&nbsp;y;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Sets</span><span class="c2">&nbsp;the properties of the matrix to those of an identity matrix </span><span class="c3">(</span><span class="c2">one that applies a </span><span class="c15">null</span><span class="c2">&nbsp;transformation</span><span class="c3">).</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;identity</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c1">This</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Useful</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c5 c2">&nbsp;chaining method calls.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">identity </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">a </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">1;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">c </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">tx </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Inverts</span><span class="c2">&nbsp;the matrix</span><span class="c3">,</span><span class="c5 c2">&nbsp;causing it to perform the opposite transformation.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;invert</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c1">This</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Useful</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c5 c2">&nbsp;chaining method calls.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">invert </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;a1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">a;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;b1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">b;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;c1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">c;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;d1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">d;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;tx1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">tx;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;n </span><span class="c3">=</span><span class="c2">&nbsp;a1</span><span class="c3">*</span><span class="c2">d1</span><span class="c3">-</span><span class="c2">b1</span><span class="c3">*</span><span class="c5 c2">c1;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">a </span><span class="c3">=</span><span class="c2">&nbsp;d1</span><span class="c3">/</span><span class="c5 c2">n;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c2">b1</span><span class="c3">/</span><span class="c5 c2">n;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">c </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c2">c1</span><span class="c3">/</span><span class="c5 c2">n;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d </span><span class="c3">=</span><span class="c2">&nbsp;a1</span><span class="c3">/</span><span class="c5 c2">n;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">tx </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c2">c1</span><span class="c3">*</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty</span><span class="c3">-</span><span class="c2">d1</span><span class="c3">*</span><span class="c2">tx1</span><span class="c3">)/</span><span class="c5 c2">n;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c3">-(</span><span class="c2">a1</span><span class="c3">*</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty</span><span class="c3">-</span><span class="c2">b1</span><span class="c3">*</span><span class="c2">tx1</span><span class="c3">)/</span><span class="c5 c2">n;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Returns</span><span class="c2">&nbsp;</span><span class="c15">true</span><span class="c2">&nbsp;</span><span class="c15">if</span><span class="c2">&nbsp;the matrix </span><span class="c15">is</span><span class="c5 c2">&nbsp;an identity matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span></p><p class="c0"><span class="c5 c2">&nbsp;isIdentity</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Boolean}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">isIdentity </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">tx </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c2">&nbsp;</span><span class="c3">&amp;&amp;</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c2">&nbsp;</span><span class="c3">&amp;&amp;</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">a </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c4">1</span><span class="c2">&nbsp;</span><span class="c3">&amp;&amp;</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c2">&nbsp;</span><span class="c3">&amp;&amp;</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">c </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c2">&nbsp;</span><span class="c3">&amp;&amp;</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c4">1;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Transforms</span><span class="c2">&nbsp;a point according to </span><span class="c15">this</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;transformPoint</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;x </span><span class="c1">The</span><span class="c5 c2">&nbsp;x component of the point to transform.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;y </span><span class="c1">The</span><span class="c5 c2">&nbsp;y component of the point to transform.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Point</span><span class="c2">&nbsp;</span><span class="c3">|</span><span class="c2">&nbsp;</span><span class="c1">Object</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c3">[</span><span class="c2">pt</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c1">An</span><span class="c2">&nbsp;</span><span class="c15">object</span><span class="c2">&nbsp;to copy the result </span><span class="c15">into</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">If</span><span class="c2">&nbsp;omitted a generic </span><span class="c15">object</span><span class="c2">&nbsp;</span><span class="c15">with</span><span class="c2">&nbsp;x</span><span class="c3">/</span><span class="c5 c2">y properties will be returned.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Point</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c1">This</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Useful</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c5 c2">&nbsp;chaining method calls.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">transformPoint </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c2">&nbsp;y</span><span class="c3">,</span><span class="c2">&nbsp;pt</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pt </span><span class="c3">=</span><span class="c2">&nbsp;pt</span><span class="c3">||{};</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pt</span><span class="c3">.</span><span class="c2">x </span><span class="c3">=</span><span class="c2">&nbsp;x</span><span class="c3">*</span><span class="c15">this</span><span class="c3">.</span><span class="c2">a</span><span class="c3">+</span><span class="c2">y</span><span class="c3">*</span><span class="c15">this</span><span class="c3">.</span><span class="c2">c</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">tx;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pt</span><span class="c3">.</span><span class="c2">y </span><span class="c3">=</span><span class="c2">&nbsp;x</span><span class="c3">*</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b</span><span class="c3">+</span><span class="c2">y</span><span class="c3">*</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">ty;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c5 c2">&nbsp;pt;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Decomposes</span><span class="c2">&nbsp;the matrix </span><span class="c15">into</span><span class="c2">&nbsp;transform properties </span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c2">&nbsp;y</span><span class="c3">,</span><span class="c2">&nbsp;scaleX</span><span class="c3">,</span><span class="c2">&nbsp;scaleY</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">and</span><span class="c2">&nbsp;rotation</span><span class="c3">).</span><span class="c2">&nbsp;</span><span class="c1">Note</span><span class="c2">&nbsp;that </span><span class="c15">this</span><span class="c5 c2">&nbsp;these values</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;may </span><span class="c15">not</span><span class="c2">&nbsp;match the transform properties you used to generate the matrix</span><span class="c3">,</span><span class="c5 c2">&nbsp;though they will produce the same visual</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c5 c2">&nbsp;results.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;decompose</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Object</span><span class="c3">}</span><span class="c2">&nbsp;target </span><span class="c1">The</span><span class="c2">&nbsp;</span><span class="c15">object</span><span class="c2">&nbsp;to apply the transform properties to</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">If</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">then</span><span class="c2">&nbsp;a </span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c15">object</span><span class="c5 c2">&nbsp;will be returned.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c1">This</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Useful</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c5 c2">&nbsp;chaining method calls.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">decompose </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">target</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c2">target </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">)</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c2">&nbsp;target </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c3">{};</span><span class="c5 c2">&nbsp;}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target</span><span class="c3">.</span><span class="c2">x </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">tx;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target</span><span class="c3">.</span><span class="c2">y </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">ty;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target</span><span class="c3">.</span><span class="c2">scaleX </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">sqrt</span><span class="c3">(</span><span class="c15">this</span><span class="c3">.</span><span class="c2">a </span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">a </span><span class="c3">+</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b </span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target</span><span class="c3">.</span><span class="c2">scaleY </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">sqrt</span><span class="c3">(</span><span class="c15">this</span><span class="c3">.</span><span class="c2">c </span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">c </span><span class="c3">+</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d </span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;skewX </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">atan2</span><span class="c3">(-</span><span class="c15">this</span><span class="c3">.</span><span class="c2">c</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;skewY </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">Math</span><span class="c3">.</span><span class="c2">atan2</span><span class="c3">(</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">a</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c2">skewX </span><span class="c3">==</span><span class="c2">&nbsp;skewY</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target</span><span class="c3">.</span><span class="c2">rotation </span><span class="c3">=</span><span class="c2">&nbsp;skewY</span><span class="c3">/</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c5 c2">DEG_TO_RAD;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c15">this</span><span class="c3">.</span><span class="c2">a </span><span class="c3">&lt;</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c2">&nbsp;</span><span class="c3">&amp;&amp;</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d </span><span class="c3">&gt;=</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target</span><span class="c3">.</span><span class="c2">rotation </span><span class="c3">+=</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c2">target</span><span class="c3">.</span><span class="c2">rotation </span><span class="c3">&lt;=</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">)</span><span class="c2">&nbsp;</span><span class="c3">?</span><span class="c2">&nbsp;</span><span class="c4">180</span><span class="c2">&nbsp;</span><span class="c3">:</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c4">180;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target</span><span class="c3">.</span><span class="c2">skewX </span><span class="c3">=</span><span class="c2">&nbsp;target</span><span class="c3">.</span><span class="c2">skewY </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c15">else</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target</span><span class="c3">.</span><span class="c2">skewX </span><span class="c3">=</span><span class="c2">&nbsp;skewX</span><span class="c3">/</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c5 c2">DEG_TO_RAD;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target</span><span class="c3">.</span><span class="c2">skewY </span><span class="c3">=</span><span class="c2">&nbsp;skewY</span><span class="c3">/</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c5 c2">DEG_TO_RAD;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c5 c2">&nbsp;target;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Reinitializes</span><span class="c5 c2">&nbsp;all matrix properties to those specified.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;reinitialize</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c3">[</span><span class="c2">a</span><span class="c3">=</span><span class="c4">1</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c1">Specifies</span><span class="c2">&nbsp;the a property </span><span class="c15">for</span><span class="c2">&nbsp;the </span><span class="c15">new</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c3">[</span><span class="c2">b</span><span class="c3">=</span><span class="c4">0</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c1">Specifies</span><span class="c2">&nbsp;the b property </span><span class="c15">for</span><span class="c2">&nbsp;the </span><span class="c15">new</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c3">[</span><span class="c2">c</span><span class="c3">=</span><span class="c4">0</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c1">Specifies</span><span class="c2">&nbsp;the c property </span><span class="c15">for</span><span class="c2">&nbsp;the </span><span class="c15">new</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c3">[</span><span class="c2">d</span><span class="c3">=</span><span class="c4">1</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c1">Specifies</span><span class="c2">&nbsp;the d property </span><span class="c15">for</span><span class="c2">&nbsp;the </span><span class="c15">new</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c3">[</span><span class="c2">tx</span><span class="c3">=</span><span class="c4">0</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c1">Specifies</span><span class="c2">&nbsp;the tx property </span><span class="c15">for</span><span class="c2">&nbsp;the </span><span class="c15">new</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Number</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c3">[</span><span class="c2">ty</span><span class="c3">=</span><span class="c4">0</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c1">Specifies</span><span class="c2">&nbsp;the ty property </span><span class="c15">for</span><span class="c2">&nbsp;the </span><span class="c15">new</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c1">This</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Useful</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c5 c2">&nbsp;chaining method calls.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">reinitialize </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">a</span><span class="c3">,</span><span class="c2">&nbsp;b</span><span class="c3">,</span><span class="c2">&nbsp;c</span><span class="c3">,</span><span class="c2">&nbsp;d</span><span class="c3">,</span><span class="c2">&nbsp;tx</span><span class="c3">,</span><span class="c2">&nbsp;ty</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">initialize</span><span class="c3">(</span><span class="c2">a</span><span class="c3">,</span><span class="c2">b</span><span class="c3">,</span><span class="c2">c</span><span class="c3">,</span><span class="c2">d</span><span class="c3">,</span><span class="c2">tx</span><span class="c3">,</span><span class="c2">ty</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Copies</span><span class="c2">&nbsp;all properties </span><span class="c15">from</span><span class="c2">&nbsp;the specified matrix to </span><span class="c15">this</span><span class="c5 c2">&nbsp;matrix.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;copy</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@param</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;matrix </span><span class="c1">The</span><span class="c2">&nbsp;matrix to copy properties </span><span class="c15">from.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;</span><span class="c1">This</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">&nbsp;</span><span class="c1">Useful</span><span class="c2">&nbsp;</span><span class="c15">for</span><span class="c5 c2">&nbsp;chaining method calls.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">copy </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">matrix</span><span class="c3">)</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">reinitialize</span><span class="c3">(</span><span class="c2">matrix</span><span class="c3">.</span><span class="c2">a</span><span class="c3">,</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">b</span><span class="c3">,</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">c</span><span class="c3">,</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">d</span><span class="c3">,</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">tx</span><span class="c3">,</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">ty</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Returns</span><span class="c2">&nbsp;a clone of the </span><span class="c1">Matrix2D</span><span class="c5 c2">&nbsp;instance.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;clone</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">Matrix2D</span><span class="c3">}</span><span class="c2">&nbsp;a clone of the </span><span class="c1">Matrix2D</span><span class="c5 c2">&nbsp;instance.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">clone </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">()).</span><span class="c2">copy</span><span class="c3">(</span><span class="c15">this</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">/**</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c1">Returns</span><span class="c2">&nbsp;a </span><span class="c15">string</span><span class="c2">&nbsp;representation of </span><span class="c15">this</span><span class="c2">&nbsp;</span><span class="c15">object.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@method</span><span class="c5 c2">&nbsp;toString</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">*</span><span class="c2">&nbsp;</span><span class="c4">@return</span><span class="c2">&nbsp;</span><span class="c3">{</span><span class="c1">String</span><span class="c3">}</span><span class="c2">&nbsp;a </span><span class="c15">string</span><span class="c5 c2">&nbsp;representation of the instance.</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">**/</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">toString </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span><span class="c5 c2">&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c10">&quot;[Matrix2D (a=&quot;</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c2">a</span><span class="c3">+</span><span class="c10">&quot; b=&quot;</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c2">b</span><span class="c3">+</span><span class="c10">&quot; c=&quot;</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c2">c</span><span class="c3">+</span><span class="c10">&quot; d=&quot;</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c2">d</span><span class="c3">+</span><span class="c10">&quot; tx=&quot;</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c2">tx</span><span class="c3">+</span><span class="c10">&quot; ty=&quot;</span><span class="c3">+</span><span class="c15">this</span><span class="c3">.</span><span class="c2">ty</span><span class="c3">+</span><span class="c10">&quot;)]&quot;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">.</span><span class="c2">identity </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">();</span></p><p class="c20 c7"><span class="c5 c6 c22"></span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c36">Maintenant nous disposons de notre propre classe pour manipuler des matrices, voici son impl&eacute;mentation au sein de la classe DisplayObject.</span></p><a href="#" name="bc7138fc7d7595e86204fcf97c747ed01fc2e236"></a><a href="#" name="51"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c5 c28">// nouvelle m&eacute;thode render</span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c36">prototype</span><span class="c3">.</span><span class="c36">render </span><span class="c3">=</span><span class="c36">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c5 c2">&nbsp;context )</span></p><p class="c0"><span class="c3">{</span><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c15">&nbsp; &nbsp; &nbsp; &nbsp;this</span><span class="c3">.</span><span class="c36">update</span><span class="c3">();</span><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c36">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c36">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c36">visible </span><span class="c3">==</span><span class="c36">&nbsp;</span><span class="c15">false</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c36">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c36">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c36">&nbsp;mat </span><span class="c3">=</span><span class="c36">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">matrix;</span></p><p class="c0"><span class="c36">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c36">save</span><span class="c3">();</span></p><p class="c0"><span class="c36">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c36">globalAlpha </span><span class="c3">=</span><span class="c36">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">alpha;</span></p><p class="c0"><span class="c36">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c36">transform</span><span class="c3">(</span><span class="c36">mat</span><span class="c3">.</span><span class="c36">a</span><span class="c3">,</span><span class="c36">mat</span><span class="c3">.</span><span class="c36">b</span><span class="c3">,</span><span class="c36">mat</span><span class="c3">.</span><span class="c36">c</span><span class="c3">,</span><span class="c36">mat</span><span class="c3">.</span><span class="c36">d</span><span class="c3">,</span><span class="c36">mat</span><span class="c3">.</span><span class="c36">tx</span><span class="c3">,</span><span class="c36">mat</span><span class="c3">.</span><span class="c36">ty</span><span class="c3">);</span></p><p class="c0"><span class="c36">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c36">draw</span><span class="c3">(</span><span class="c36">context</span><span class="c3">);</span></p><p class="c0"><span class="c36">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c36">restore</span><span class="c3">();</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c28">//M&eacute;thode update, qui nous permet d&#39;actualiser la propri&eacute;t&eacute; this.matrix de la classe DisplayObject;</span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c36">prototype</span><span class="c3">.</span><span class="c36">update </span><span class="c3">=</span><span class="c36">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c36">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c36">&nbsp;current </span><span class="c3">=</span><span class="c36">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c36">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c36">&nbsp;mat </span><span class="c3">=</span><span class="c36">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c36">matrix </span><span class="c3">||</span><span class="c36">&nbsp;</span><span class="c15">new</span><span class="c36">&nbsp;</span><span class="c1">Matrix2D();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mat.appendTransform(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.x, </span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.y, </span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.scaleX, </span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.scaleY, </span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.rotation, </span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.skewX, </span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.skewY, </span></p><p class="c0"><span class="c36">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.</span><span class="c36">pivotX</span><sup><a href="#cmnt3" name="cmnt_ref3">[c]</a></sup><sup><a href="#cmnt4" name="cmnt_ref4">[d]</a></sup><sup><a href="#cmnt5" name="cmnt_ref5">[e]</a></sup><sup><a href="#cmnt6" name="cmnt_ref6">[f]</a></sup><sup><a href="#cmnt7" name="cmnt_ref7">[g]</a></sup><sup><a href="#cmnt8" name="cmnt_ref8">[h]</a></sup><sup><a href="#cmnt9" name="cmnt_ref9">[i]</a></sup><sup><a href="#cmnt10" name="cmnt_ref10">[j]</a></sup><sup><a href="#cmnt11" name="cmnt_ref11">[k]</a></sup><sup><a href="#cmnt12" name="cmnt_ref12">[l]</a></sup><span class="c5 c2">, </span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pivotY);</span></p><p class="c0"><span class="c3">};</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">A pr&eacute;sent nous disposons d&#39;une classe nous permettant de calculer l&#39;&eacute;tat r&eacute;el de l&#39;ensemble des transformations appliqu&eacute;es &agrave; un DisplayObject, &nbsp;nous utilisons la m&eacute;thode &ldquo;transform&rdquo; de l&#39;objet context qui prend justement le nombre de param&egrave;tre suffisant pour red&eacute;finir les composantes d&#39;une matrice 3x3.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Ainsi nous allons pouvoir g&eacute;rer pas mal de choses, notamment plus tard les collisions, mais pour l&#39;heure nous allons faire une pause et passer &agrave; un chapitre plus l&eacute;ger, le mod&egrave;le &eacute;v&eacute;nementiel.</span></p><p class="c7"><span class="c6"></span></p><p class="c7 c32"><span class="c6"></span></p><p class="c7 c32"><span class="c33 c24"></span></p><p class="c7 c32"><span class="c33 c24"></span></p><p class="c7 c32"><span class="c33 c24"></span></p><p class="c7 c32"><span class="c33 c24"></span></p><hr style="page-break-before:always;display:none;"><p class="c7 c32"><span class="c33 c24"></span></p><p class="c7 c32"><span class="c33 c24"></span></p><p class="c7 c32"><span class="c33 c24"></span></p><p class="c7 c32"><span class="c33 c24"></span></p><p class="c9 c32"><span class="c33 c24">Mod&egrave;le &eacute;v&eacute;nementiel et design pattern</span></p><p class="c7 c32"><span class="c24 c33"></span></p><p class="c54 c12 c9 subtitle"><a name="h.879o2vge1sh4"></a><span>Pourquoi utiliser des &eacute;v&eacute;nements ? </span></p><p class="c9"><span class="c6">Commen&ccedil;ons d&eacute;j&agrave; par d&eacute;finir ce que nous entendons par un &eacute;venement, dans notre moteur il s&#39;agira d&#39;un objet , vecteur d&#39;information, que l&#39;on pourra lancer et attraper en fonction de qui est int&eacute;r&eacute;ss&eacute; par cet &eacute;venement. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Cela fonctionne un peu comme une newsletter, si vous &ecirc;tes int&eacute;r&eacute;ss&eacute;s par l&#39;activit&eacute; d&#39;un site web, il est fort probable que vous ayez souscrit &agrave; leur programme de newsletter., votre email est alors stock&eacute; quelque part et un mail vous est envoy&eacute; au moment ou une news sort avec des informations sur cette ,news.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Un &eacute;venement dans notre moteur fonctionne exactement de la m&ecirc;me mani&egrave;re, je notifie quelque part mon interet pour un &eacute;venement pr&eacute;cis, et lorsque cet &eacute;venement se produit, je l&#39;attrape et je m&#39;en sers ( ou non )</span></p><p class="c9"><span class="c6">Pour ceux qui connaissent d&eacute;j&agrave;, c&#39;est exactement la m&ecirc;me chose que le mod&egrave;le &eacute;v&eacute;nementiel natif du Javascript ou de l&#39;as3.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Quel est l&#39;inter&ecirc;t d&#39;utiliser un mod&egrave;le &eacute;venementiel , de dispatcher, d&#39;&eacute;couter des &eacute;venements ? </span></p><p class="c9"><span class="c6">Quelques exemples: </span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_myv3yc282a94-0 start"><li class="c38 c9"><span class="c6">D&eacute;clencher une action au click sur un DisplayObject</span></li><li class="c38 c9"><span class="c6">Appliquer un effet au rollover ou au rollout sur un DisplayObject</span></li><li class="c38 c9"><span class="c6">D&eacute;tecter quand un DisplayObject a &eacute;t&eacute; ajout&eacute; ou enlev&eacute; de la DisplayList</span></li><li class="c38 c9"><span class="c6">D&eacute;clencher une fonction &agrave; chaque frame</span></li></ul><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">En gros cela nous permet de g&eacute;rer facilement l&#39;interactivit&eacute; de notre application.</span></p><p class="c9"><span class="c6">Mias comment impl&eacute;menter cela dans notre moteur ? </span></p><p class="c7"><span class="c6"></span></p><p class="c12 c9 subtitle"><a name="h.dkqga12tylt"></a><span>Comment g&eacute;rer un mod&egrave;le &eacute;v&eacute;nementiel, le design pattern observer </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Pour ceux qui ne connaissent pas, le design pattern Observer consiste &agrave; ajouter/enlever des &quot;&eacute;couteurs&quot; ( listener en anglais ) &agrave; un objet. Ces &eacute;couteurs attendent un type d&#39;&eacute;venement pr&eacute;cis et chaque fois que l&#39;objet sur lequel on a pos&eacute; l&#39;&eacute;couteur &quot;lance&quot; (ou dispatch) un &eacute;venement, l&#39;ensemble des &eacute;couteurs attendant un &eacute;venement de ce type sont notifi&eacute;s. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Concr&egrave;tement lorsque un &eacute;couteur est notifi&eacute;, une fonction de rappel (callbacl) d&eacute;finie au moment de l&#39;ajout de l&#39;&eacute;couteur est appel&eacute;e,en r&egrave;gle g&eacute;n&eacute;rale l&#39;evenement lui est pass&eacute; en param&egrave;tre.</span></p><p class="c7"><span class="c6"></span></p><p class="c7 c12 subtitle"><a name="h.76f1i6p3az49"></a></p><p class="c12 c9 subtitle"><a name="h.3bgrnwcg3vvw"></a><span>Impl&eacute;mentation sur les objets d&#39;affichage, la classe EventDispatcher et la classe Event</span></p><p class="c9"><span class="c6">EventDispatcher.js</span></p><a href="#" name="d9b810f0224982c077a10caca4f5d6a47209d1cc"></a><a href="#" name="52"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">EventDispatcher</span><span class="c3">(){}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">registerClass</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">EventDispatcher</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;EventDispatcher&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">EventDispatcher</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">parent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c1">EventDispatcher</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_listeners </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">EventDispatcher</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">addEventListener </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">&nbsp;type</span><span class="c3">,</span><span class="c2">&nbsp;scope</span><span class="c3">,</span><span class="c2">&nbsp;callback</span><span class="c3">,</span><span class="c5 c2">&nbsp;useCapture )</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_listeners </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_listeners </span><span class="c3">||</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Array</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;obj </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Object</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj</span><span class="c3">.</span><span class="c2">type </span><span class="c3">=</span><span class="c5 c2">&nbsp;type;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj</span><span class="c3">.</span><span class="c2">scope </span><span class="c3">=</span><span class="c5 c2">&nbsp;scope;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj</span><span class="c3">.</span><span class="c2">callback </span><span class="c3">=</span><span class="c5 c2">&nbsp;callback;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj</span><span class="c3">.</span><span class="c2">useCapture </span><span class="c3">=</span><span class="c5 c2">&nbsp;useCapture;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_listeners</span><span class="c3">.</span><span class="c2">push</span><span class="c3">(</span><span class="c2">obj</span><span class="c3">);</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">EventDispatcher</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">hasEventListener </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c5 c2">type)</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_listeners </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">false;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;obj </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Object</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;i </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_listeners</span><span class="c3">.</span><span class="c5 c2">length;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">while</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c3">--</span><span class="c2">i </span><span class="c3">&gt;</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c4">1</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_listeners</span><span class="c3">[</span><span class="c2">i</span><span class="c3">];</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;obj</span><span class="c3">.</span><span class="c2">type </span><span class="c3">==</span><span class="c5 c2">&nbsp;type )</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">true;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">EventDispatcher</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">dispatchEvent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">event</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_listeners </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_listeners </span><span class="c3">||</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Array</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;obj </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Object</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;i </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_listeners</span><span class="c3">.</span><span class="c5 c2">length;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">event</span><span class="c3">.</span><span class="c2">target </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">event</span><span class="c3">.</span><span class="c2">target </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">event</span><span class="c3">.</span><span class="c2">currentTarget </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">while</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c3">--</span><span class="c2">i </span><span class="c3">&gt;</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c4">1</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_listeners</span><span class="c3">[</span><span class="c2">i</span><span class="c3">];</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;obj</span><span class="c3">.</span><span class="c2">type </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">event</span><span class="c3">.</span><span class="c5 c2">type )</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">event</span><span class="c3">.</span><span class="c2">target </span><span class="c3">!=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c2">&nbsp;</span><span class="c3">&amp;&amp;</span><span class="c2">&nbsp;obj</span><span class="c3">.</span><span class="c2">useCapture </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">false</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">continue;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj</span><span class="c3">.</span><span class="c2">callback</span><span class="c3">.</span><span class="c2">apply</span><span class="c3">(</span><span class="c2">&nbsp;obj</span><span class="c3">.</span><span class="c2">scope</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c3">[</span><span class="c15">event</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">event</span><span class="c3">.</span><span class="c2">bubbles </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">true</span><span class="c2">&nbsp;</span><span class="c3">&amp;&amp;</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">parent </span><span class="c3">!=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c2">&nbsp;</span><span class="c3">&amp;&amp;</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">parent</span><span class="c3">.</span><span class="c5 c2">dispatchEvent )</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">parent</span><span class="c3">.</span><span class="c2">dispatchEvent</span><span class="c3">(</span><span class="c15">event</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">EventDispatcher</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">removeEventListener </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">&nbsp;type</span><span class="c3">,</span><span class="c2">&nbsp;scope</span><span class="c3">,</span><span class="c2">&nbsp;callback</span><span class="c3">,</span><span class="c5 c2">&nbsp;useCapture )</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;listener </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">getEventListener</span><span class="c3">(</span><span class="c2">type</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">while</span><span class="c3">(</span><span class="c2">&nbsp;listener </span><span class="c3">!=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;obj </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Object</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;i </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_listeners</span><span class="c3">.</span><span class="c5 c2">length;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;arr </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Array</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">while</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c3">--</span><span class="c2">i </span><span class="c3">&gt;</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c4">1</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_listeners</span><span class="c3">[</span><span class="c2">i</span><span class="c3">];</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;obj</span><span class="c3">.</span><span class="c2">type </span><span class="c3">!=</span><span class="c2">&nbsp;listener</span><span class="c3">.</span><span class="c2">type </span><span class="c3">||</span><span class="c2">&nbsp;obj</span><span class="c3">.</span><span class="c2">scope </span><span class="c3">!=</span><span class="c2">&nbsp;scope </span><span class="c3">||</span><span class="c2">&nbsp;obj</span><span class="c3">.</span><span class="c2">callback </span><span class="c3">!=</span><span class="c2">&nbsp;callback </span><span class="c3">||</span><span class="c2">&nbsp;obj</span><span class="c3">.</span><span class="c2">useCapture </span><span class="c3">!=</span><span class="c5 c2">&nbsp;useCapture )</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;arr</span><span class="c3">.</span><span class="c2">push</span><span class="c3">(</span><span class="c2">obj</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_listeners </span><span class="c3">=</span><span class="c5 c2">&nbsp;arr;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listener </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">getEventListener</span><span class="c3">(</span><span class="c2">type</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c3">};</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Event.js</span></p><a href="#" name="446e00941e5423433eae8e79fb9ca697b2f91515"></a><a href="#" name="53"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">Event</span><span class="c3">(</span><span class="c2">type</span><span class="c3">,</span><span class="c2">&nbsp;bubbles</span><span class="c3">,</span><span class="c5 c2">&nbsp;cancelable)</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">type </span><span class="c3">=</span><span class="c5 c2">&nbsp;type;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">cancelable </span><span class="c3">=</span><span class="c5 c2">&nbsp;cancelable;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">bubbles </span><span class="c3">=</span><span class="c5 c2">&nbsp;bubbles;</span></p><p class="c0"><span class="c5 c2">}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">registerClass</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">Event</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;Event&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Event</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">type </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c1">Event</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">bubbles </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">false;</span></p><p class="c0"><span class="c1">Event</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">cancelable </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">true;</span></p><p class="c0"><span class="c1">Event</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">data </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c1">Event</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">target </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c1">Event</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">currentTarget </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Event</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">stopPropagation </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">cancelable </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">true</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">bubbles </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">false;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c28">//constantes</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Event</span><span class="c3">.</span><span class="c2">ADDED &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;added&quot;;</span></p><p class="c0"><span class="c1">Event</span><span class="c3">.</span><span class="c2">ADDED_TO_STAGE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;addedToStage&quot;;</span></p><p class="c0"><span class="c1">Event</span><span class="c3">.</span><span class="c2">ENTER_FRAME &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;enterFrame&quot;;</span></p><p class="c0"><span class="c1">Event</span><span class="c3">.</span><span class="c2">REMOVED &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;removed&quot;;</span></p><p class="c0"><span class="c1">Event</span><span class="c3">.</span><span class="c2">REMOVED_FROM_STAGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;removedFromStage&quot;;</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Maintenant, nous pouvons faire h&eacute;riter notre classe DisplayObject de la classe EventDispatcher, par cons&eacute;quent tout nos DisplayObject seront d&eacute;sormais des EventDispatcher.</span></p><p class="c9"><span class="c6">Pour ce faire, on doit ajouter la ligne suivante &agrave; notre classe DisplayObject </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c1 c23">Tomahawk</span><span class="c3 c23">.</span><span class="c2 c23">extend</span><span class="c3 c23">(</span><span class="c2 c23">&nbsp;</span><span class="c10 c23">&quot;DisplayObject&quot;</span><span class="c3 c23">,</span><span class="c2 c23">&nbsp;</span><span class="c10 c23">&quot;EventDispatcher&quot;</span><span class="c2 c23">&nbsp;</span><span class="c3 c23">);</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Comme vous pouvez le constater, notre classe Event poss&egrave;de quelques constantes pr&eacute;d&eacute;finies, </span></p><p class="c9"><span class="c6">Event.ADDED par exemple. Cette constante d&eacute;finit le type de l&#39;&eacute;venement, ce type d&#39;&eacute;venement sera dispatch&eacute; par un DisplayObject au moment ou il est ajout&eacute; &agrave; un DisplayObjectContainer</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Les 4 m&eacute;thodes suivantes de notre classe DisplayObjectContainer seront alors modifi&eacute;es:</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="4932916ddcd1829875aba1f8d485031ff1a67a80"></a><a href="#" name="54"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c1">DisplayObjectContainer</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">addChild </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">child</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;child</span><span class="c3">.</span><span class="c2">parent </span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child</span><span class="c3">.</span><span class="c2">parent</span><span class="c3">.</span><span class="c2">removeChild</span><span class="c3">(</span><span class="c2">child</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child</span><span class="c3">.</span><span class="c2">parent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children</span><span class="c3">.</span><span class="c2">push</span><span class="c3">(</span><span class="c2">child</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child</span><span class="c3">.</span><span class="c2">dispatchEvent</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Event</span><span class="c3">(</span><span class="c1">Event</span><span class="c3">.</span><span class="c2">ADDED</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">true</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">true</span><span class="c3">)</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObjectContainer</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">addChildAt </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">child</span><span class="c3">,</span><span class="c2">&nbsp;index</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;children </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;tab1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children</span><span class="c3">.</span><span class="c2">slice</span><span class="c3">(</span><span class="c4">0</span><span class="c3">,</span><span class="c2">index</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;tab2 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children</span><span class="c3">.</span><span class="c2">slice</span><span class="c3">(</span><span class="c2">index</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children </span><span class="c3">=</span><span class="c2">&nbsp;tab1</span><span class="c3">.</span><span class="c2">concat</span><span class="c3">([</span><span class="c2">child</span><span class="c3">]).</span><span class="c2">concat</span><span class="c3">(</span><span class="c2">tab2</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child</span><span class="c3">.</span><span class="c2">parent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child</span><span class="c3">.</span><span class="c2">dispatchEvent</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Event</span><span class="c3">(</span><span class="c1">Event</span><span class="c3">.</span><span class="c2">ADDED</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">true</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">true</span><span class="c3">)</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObjectContainer</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">removeChildAt </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">index</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;child </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children</span><span class="c3">[</span><span class="c2">index</span><span class="c3">];</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;child </span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child</span><span class="c3">.</span><span class="c2">parent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children</span><span class="c3">.</span><span class="c2">splice</span><span class="c3">(</span><span class="c2">index</span><span class="c3">,</span><span class="c4">1</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child</span><span class="c3">.</span><span class="c2">dispatchEvent</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Event</span><span class="c3">(</span><span class="c1">Event</span><span class="c3">.</span><span class="c2">REMOVED</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">true</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">true</span><span class="c3">)</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObjectContainer</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">removeChild </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">child</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;index </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children</span><span class="c3">.</span><span class="c2">indexOf</span><span class="c3">(</span><span class="c2">child</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;index </span><span class="c3">&gt;</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c4">1</span><span class="c2">&nbsp;</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">children</span><span class="c3">.</span><span class="c2">splice</span><span class="c3">(</span><span class="c2">index</span><span class="c3">,</span><span class="c4">1</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child</span><span class="c3">.</span><span class="c2">parent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child</span><span class="c3">.</span><span class="c2">dispatchEvent</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Event</span><span class="c3">(</span><span class="c1">Event</span><span class="c3">.</span><span class="c2">REMOVED</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">true</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">true</span><span class="c3">)</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c3">};</span></p></td></tr></tbody></table><p class="c7"><span class="c2"></span></p><p class="c9"><span class="c1">Voil</span><span class="c3">&agrave;,</span><span class="c2">&nbsp;maintenant vous pouvez d</span><span class="c3">&eacute;</span><span class="c2">clencher une action d</span><span class="c3">&egrave;</span><span class="c2">s qu</span><span class="c10">&#39;</span><span class="c36">un DisplayObjectContainer ajoute ou enl&egrave;ve un enfant. </span></p><p class="c7"><span class="c2"></span></p><p class="c9"><span class="c1">Exemple:</span></p><a href="#" name="28c8c4dddf0e223982d148260e4245fb791a3897"></a><a href="#" name="55"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;onAdded</span><span class="c3">(</span><span class="c15">event</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console</span><span class="c3">.</span><span class="c2">log</span><span class="c3">(</span><span class="c15">event</span><span class="c3">.</span><span class="c2">type</span><span class="c3">);</span></p><p class="c0"><span class="c3">}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c15">var</span><span class="c2">&nbsp;container </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">DisplayObjectContainer</span><span class="c3">();</span></p><p class="c0"><span class="c15">var</span><span class="c2">&nbsp;disp </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">DisplayObject</span><span class="c3">();</span><span class="c5 c2">&nbsp; &nbsp;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c2">disp</span><span class="c3">.</span><span class="c2">addEventListener</span><span class="c3">(</span><span class="c1">Event</span><span class="c3">.</span><span class="c2">ADDED</span><span class="c3">,</span><span class="c2">&nbsp;null, </span><span class="c2">onAdded</span><sup><a href="#cmnt13" name="cmnt_ref13">[m]</a></sup><sup><a href="#cmnt14" name="cmnt_ref14">[n]</a></sup><sup><a href="#cmnt15" name="cmnt_ref15">[o]</a></sup><span class="c3">);</span></p><p class="c0"><span class="c2">container</span><span class="c3">.</span><span class="c2">addChild</span><span class="c3">(</span><span class="c2">disp</span><span class="c3">);</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Comme vous avez pu le constater, a la m&eacute;thode addEventListener poss&egrave;de un param&egrave;tre </span><span class="c6 c23">useCapture. </span><span class="c6">D&eacute;finit &agrave; true, ce param&egrave;tre vous donne la possibilit&eacute; d&#39;attraper les &eacute;venements dispatch&eacute;s par les enfants de l&#39;objet sur lequel on a pos&eacute; l&#39;&eacute;couteur, en gros cela veut dire que nous aurions pu reproduire l&#39;exemple ci-dessus en posant l&#39;&eacute;couteur directement sur le container.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Je vous invite &agrave; essayer, en guise d&#39;exercice, observez &eacute;galement le code de la classe EventDispatcher et regardez comment cette fonctionnalit&eacute; est g&eacute;r&eacute;e. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Maintenant que nous sommes capables de manipuler les &eacute;venements, nous pouvons nous int&eacute;r&eacute;sser &agrave; la d&eacute;tection des actions de l&quot;utilisateur comme le click par exemple.</span></p><hr style="page-break-before:always;display:none;"><p class="c7 c37"><span class="c6"></span></p><p class="c7 c32"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c12 c9 c32 title"><a name="h.o0a10u4uijw8"></a><span>Collisions et &eacute;v&eacute;nements utilisateurs</span></p><p class="c7 c32"><span class="c33 c24"></span></p><p class="c12 c9 subtitle"><a name="h.9ef5gaeucc8v"></a><span>Comment d&eacute;tecter les &eacute;v&eacute;nements souris ? </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">La d&eacute;tection des &eacute;venements souris est indispensable d&egrave;s l&#39;instant ou l&#39;on souhaite interragir avec l&quot;utilisateur. Le fait de bouger sa souris, de clicker ou double clicker ou m&ecirc;me passer sa souris par dessus un objet sont des &eacute;venements qui m&eacute;ritent d&#39;&ecirc;tre notifi&eacute;s, et quoi de mieux pour &ccedil;a que notre mod&egrave;le &eacute;venementiel ? </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Mais comment savoir sur quel objet l&#39;utilisateur a cliqu&eacute; ? Existe t-il une m&eacute;thode efficace nous permettant de savoir cela et si oui est-ce compliqu&eacute; ? En premier lieu, sachez qu&#39;il existe bien une m&eacute;thode et que cette derni&egrave;re, pour peu que l&#39;on ait la th&eacute;orie suffisante, est assez simple &agrave; impl&eacute;menter. Nous allons donc commencer par la th&eacute;orie.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c12 c9 subtitle"><a name="h.hdmkz9ggfcn8"></a><span>Th&eacute;orie des collisions, les formules</span></p><p class="c9"><span class="c6">Quand un utilisateur clique, nous obtenons un point dont nous souhaitons savoir si les coordonn&eacute;es x et y se situe bien &agrave; &quot;l&#39;int&eacute;rieur&quot; d&#39;un DisplayObject quelconque. Math&eacute;matiquement parlant, un DisplayObject est un rectangle dont les coordonn&eacute;es des 4 coins sont ais&eacute;ment calculables &agrave; l&#39;aide des propri&eacute;t&eacute;s </span><span class="c6 c24">x,y,width et height</span><span class="c6">&nbsp;de l&#39;objet en question.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">La formule pour savoir un point se situe &agrave; l&#39;int&eacute;rieur ou non d&#39;un rectangle se pr&eacute;sente sous cette forme: </span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><a href="#" name="284552755efdac76380a7b9df8f0058bf6c70cc6"></a><a href="#" name="56"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;isInRect</span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c2">y</span><span class="c3">,</span><span class="c2">&nbsp;rectX</span><span class="c3">,</span><span class="c2">&nbsp;rectY</span><span class="c3">,</span><span class="c2">&nbsp;rectWidth</span><span class="c3">,</span><span class="c2">&nbsp;rectHeight</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x </span><span class="c3">&gt;</span><span class="c2">&nbsp;rectX </span><span class="c3">+</span><span class="c2">&nbsp;rectWidth </span><span class="c3">||</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y </span><span class="c3">&gt;</span><span class="c2">&nbsp;rectY </span><span class="c3">+</span><span class="c2">&nbsp;rectHeight </span><span class="c3">||</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x </span><span class="c3">&lt;</span><span class="c2">&nbsp;rectX </span><span class="c3">||</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y </span><span class="c3">&lt;</span><span class="c5 c2">&nbsp;rectY </span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">false</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">else</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">true</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c5 c2">}</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Dans le cas pr&eacute;sent cela reste simple, mais dans le cas de notre classe DisplayObject, cela est un peu moins &eacute;vident.</span></p><p class="c9"><span class="c6">&nbsp;</span></p><p class="c7 c12 subtitle"><a name="h.vlx557ozq7lb"></a></p><p class="c12 c9 subtitle"><a name="h.kd5tusb165u9"></a><span>Impl&eacute;mentation d&#39;une m&eacute;thode hitTest sur un DisplayObject</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Nous allons impl&eacute;menter une m&eacute;thode nomm&eacute;e hitTest sur notre classe DisplayObject, celle-ci aura pour r&ocirc;le de nous dire si oui ou non le point qu&#39;on lui passe en param&egrave;tre entre en collision avec l&#39;objet en question. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Seulement voil&agrave;, le point que l&#39;on va passer &agrave; l&#39;origine aura pour coordonn&eacute;es les coordonn&eacute;es du Stage, c&agrave;d qu&#39;elles ne correspondront pas au rep&egrave;re de donn&eacute;es locales, car nos DisplayObject sont potentiellement transform&eacute;s. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">C&#39;est pour pallier &agrave; ce soucis que nous avons impl&eacute;ment&eacute; des matrices !</span></p><p class="c9"><span class="c6">Dans l&#39;utilisation que l&#39;on en fait les matrices nous servent &agrave; cumuler des transformations ( celles des multiples parent et de l&#39;enfant ) pour arriver au r&eacute;sultat sur le stage, celui que l&#39;on voit !</span></p><p class="c9"><span class="c6">Et bien l&#39;op&eacute;ration inverse est possible, partir d&#39;un r&eacute;sultat sur le stage et arriver &agrave; une transformation dans l&#39;espace local ! Pour cela il vous suffira d&#39;utiliser la matrice inverse de celle que vous avez utilis&eacute;, et il se trouve que justement, la classe Matrix2D que nous avons utilis&eacute; dispose d&#39;une m&eacute;thode qui lui permet de s&#39;inverser elle-m&ecirc;me !</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Nous allons donc pouvoir dores et d&eacute;j&agrave; impl&eacute;menter deux nouvelles m&eacute;thodes tr&egrave;s utiles sur notre classe DisplayObject. </span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_dygqqhlzftqm-0 start"><li class="c38 c9"><span class="c6">Une m&eacute;thode localToGlobal qui prend en param&egrave;tre un point dans le syst&egrave;me de coordonn&eacute;es local du DisplayObject et qui le convertit en point dans le syst&egrave;me de coordonn&eacute;es global du Stage.</span></li></ul><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_dygqqhlzftqm-0"><li class="c38 c9"><span class="c6">Une m&eacute;thode globalToLocal, qui fait exactement l&#39;inverse de la fonction pr&eacute;c&eacute;dente, c&#39;est celle-ci que nous allons utiliser dans notre m&eacute;thode hitTest pour convertir le point pass&eacute; en param&egrave;tre. Ainsi nous pourrons v&eacute;rifier si oui ou non, ce point est compris dans le rectangle du DisplayObject.</span></li></ul><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_dygqqhlzftqm-0"><li class="c38 c9"><span class="c6">Nous allons &eacute;galement nous servir d&rsquo;une nouvelle classe, la classe Point. Cette derni&egrave;re nous servira &agrave; retourner</span></li></ul><p class="c9"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; un objet avec des coordonn&eacute;es x,y &nbsp;dans les m&eacute;thodes localToGlobal et globalToLocal.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">La classe Point:</span></p><a href="#" name="a54c618b4963873d112d9e81f946673c43c629fc"></a><a href="#" name="57"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c20 c9"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">Point</span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c5 c2">y)</span></p><p class="c20 c9"><span class="c5 c2">{</span></p><p class="c20 c9"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">x </span><span class="c3">=</span><span class="c2">&nbsp;x</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">y </span><span class="c3">=</span><span class="c5 c2">&nbsp;y</span></p><p class="c20 c9"><span class="c5 c2">}</span></p><p class="c20 c9"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c20 c9"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">registerClass</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">Point</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;Point&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c20 c9"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c20 c9"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c20 c9"><span class="c1">Point</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">x </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c20 c9"><span class="c1">Point</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">y </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c20 c7"><span class="c5 c6 c22"></span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Voici les m&eacute;thodes &agrave; ajouter &agrave; notre classe DisplayObject</span></p><a href="#" name="47fdcf27ec7e5564a8f8682f576cf1f5133cd459"></a><a href="#" name="58"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">getConcatenedMatrix </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;current </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;mat </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Matrix2D</span><span class="c3">();</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">while</span><span class="c3">(</span><span class="c2">&nbsp;current </span><span class="c3">!=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current</span><span class="c3">.</span><span class="c2">update</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mat</span><span class="c3">.</span><span class="c2">prependMatrix</span><span class="c3">(</span><span class="c2">current</span><span class="c3">.</span><span class="c2">matrix </span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current </span><span class="c3">=</span><span class="c2">&nbsp;current</span><span class="c3">.</span><span class="c5 c2">parent;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_concatenedMatrix </span><span class="c3">=</span><span class="c5 c2">&nbsp;mat;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">_concatenedMatrix;</span></p><p class="c0"><span class="c5 c3">};</span></p><p class="c0 c8"><span class="c5 c3"></span></p><p class="c0 c8"><span class="c5 c1"></span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">localToGlobal </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c5 c2">y)</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;matrix </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">getConcatenedMatrix</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;pt </span><span class="c3">=</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">transformPoint</span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c2">y</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c36">&nbsp;</span><span class="c1">Point</span><span class="c3">(</span><span class="c2">pt</span><span class="c3">.</span><span class="c2">x</span><span class="c3">,</span><span class="c2">pt</span><span class="c3">.</span><span class="c2">y</span><span class="c3">);</span></p><sup><a href="#cmnt16" name="cmnt_ref16">[p]</a></sup><sup><a href="#cmnt17" name="cmnt_ref17">[q]</a></sup><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">globalToLocal </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c5 c2">y)</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;matrix </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">getConcatenedMatrix</span><span class="c3">().</span><span class="c2">clone</span><span class="c3">().</span><span class="c2">invert</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;pt </span><span class="c3">=</span><span class="c2">&nbsp;matrix</span><span class="c3">.</span><span class="c2">transformPoint</span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c2">y</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c36">&nbsp;</span><span class="c1">Point</span><span class="c3">(</span><span class="c2">pt</span><span class="c3">.</span><span class="c2">x</span><span class="c3">,</span><span class="c2">pt</span><span class="c3">.</span><span class="c2">y</span><span class="c3">);</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">hitTest </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c5 c2">y)</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">matrix </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">update</span><span class="c5 c3">();</span></p><p class="c0 c8"><span class="c5 c3"></span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;pt1 </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">globalToLocal</span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c2">y</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;pt1</span><span class="c3">.</span><span class="c2">x </span><span class="c3">&lt;</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c2">&nbsp;</span><span class="c3">||</span><span class="c2">&nbsp;pt1</span><span class="c3">.</span><span class="c2">x </span><span class="c3">&gt;</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">width </span><span class="c3">||</span><span class="c2">&nbsp;pt1</span><span class="c3">.</span><span class="c2">y </span><span class="c3">&lt;</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c2">&nbsp;</span><span class="c3">||</span><span class="c2">&nbsp;pt1</span><span class="c3">.</span><span class="c2">y </span><span class="c3">&gt;</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">height )</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">false;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">else</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">true;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c3">};</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Maintenant, nous pouvons d&eacute;tecter si oui ou non, un DisplayObject est cliqu&eacute; ou non encore faut-il d&eacute;terminer si de DisplayObject ne se situe pas &quot;en dessous&quot; d&#39;un autre. Ce dernier prendra alors automatiquement l&#39;&eacute;venement souris, et l&#39;objet se situant en dessous ne devra rien dispatcher;</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Pour arriver &agrave; nos fins nous devons repartir dans notre bonne vieille classe Stage.</span></p><p class="c9"><span class="c6">Le Stage &eacute;tant la racine de notre DisplayList, nous avons donc acc&egrave;s &agrave; l&#39;ensemble des DisplayObject.</span></p><p class="c9"><span class="c6">Il suffit alors de parcourir l&#39;ensemble de l&#39;arbre de mani&egrave;re r&eacute;cursive &agrave; rebours et en partant du dernier objet dans la liste des enfants.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Au premier objet r&eacute;pondant au hitTest et poss&eacute;dant un &eacute;couteur pour le type d&#39;&eacute;venement en cours, on stoppe le parcours de l&#39;arbre et on fait en sorte que l&#39;objet dispatche cet &eacute;v&eacute;nement.</span></p><p class="c9"><span class="c6">Nous pouvons proc&eacute;der ainsi pour tous les &eacute;venements souris. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Voici le code &agrave; ajouter &agrave; la classe Stage:</span></p><a href="#" name="4f7ae7af379b4a1ef3d819e499554d50a02b60e7"></a><a href="#" name="59"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c1">Stage</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">init </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">canvas</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;scope </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;callback </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c15">event</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scope</span><span class="c3">.</span><span class="c2">_mouseHandler</span><span class="c3">(</span><span class="c15">event</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">};</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_canvas </span><span class="c3">=</span><span class="c2">&nbsp;canvas</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_context </span><span class="c3">=</span><span class="c2">&nbsp;canvas</span><span class="c3">.</span><span class="c2">getContext</span><span class="c3">(</span><span class="c10">&quot;2d&quot;</span><span class="c3">);</span><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_canvas</span><span class="c3">.</span><span class="c2">addEventListener</span><span class="c3">(</span><span class="c10">&quot;click&quot;</span><span class="c3">,</span><span class="c2">callback</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_canvas</span><span class="c3">.</span><span class="c2">addEventListener</span><span class="c3">(</span><span class="c10">&quot;mousemove&quot;</span><span class="c3">,</span><span class="c2">callback</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_canvas</span><span class="c3">.</span><span class="c2">addEventListener</span><span class="c3">(</span><span class="c10">&quot;mousedown&quot;</span><span class="c3">,</span><span class="c2">callback</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_canvas</span><span class="c3">.</span><span class="c2">addEventListener</span><span class="c3">(</span><span class="c10">&quot;mouseup&quot;</span><span class="c3">,</span><span class="c2">callback</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_enterFrame</span><span class="c3">();</span><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Stage</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_mouseHandler </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c15">event</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;bounds </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_canvas</span><span class="c3">.</span><span class="c2">getBoundingClientRect</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;x </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">event</span><span class="c3">.</span><span class="c2">clientX </span><span class="c3">-</span><span class="c2">&nbsp;bounds</span><span class="c3">.</span><span class="c2">left</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;y </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">event</span><span class="c3">.</span><span class="c2">clientY </span><span class="c3">-</span><span class="c2">&nbsp;bounds</span><span class="c3">.</span><span class="c2">top</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;activeChild </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_getMouseObjectUnder</span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c2">y</span><span class="c3">,</span><span class="c15">this</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;mouseEvent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;i </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">mouseX </span><span class="c3">=</span><span class="c2">&nbsp;x</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">mouseY </span><span class="c3">=</span><span class="c2">&nbsp;y</span><span class="c3">;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">event</span><span class="c3">.</span><span class="c2">type </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c10">&quot;mousemove&quot;</span><span class="c2">&nbsp;</span><span class="c3">&amp;&amp;</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_lastActiveChild </span><span class="c3">!=</span><span class="c2">&nbsp;activeChild </span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;activeChild </span><span class="c3">!=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c2">&nbsp;</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mouseEvent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">MouseEvent</span><span class="c3">.</span><span class="c2">fromNativeMouseEvent</span><span class="c3">(</span><span class="c15">event</span><span class="c3">,</span><span class="c15">true</span><span class="c3">,</span><span class="c15">true</span><span class="c3">,</span><span class="c2">x</span><span class="c3">,</span><span class="c2">y</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mouseEvent</span><span class="c3">.</span><span class="c2">type </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">MouseEvent</span><span class="c3">.</span><span class="c2">ROLL_OVER</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;activeChild</span><span class="c3">.</span><span class="c2">dispatchEvent</span><span class="c3">(</span><span class="c2">mouseEvent</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_lastActiveChild </span><span class="c3">!=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c2">&nbsp;</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mouseEvent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">MouseEvent</span><span class="c3">.</span><span class="c2">fromNativeMouseEvent</span><span class="c3">(</span><span class="c15">event</span><span class="c3">,</span><span class="c15">true</span><span class="c3">,</span><span class="c15">true</span><span class="c3">,</span><span class="c2">x</span><span class="c3">,</span><span class="c2">y</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mouseEvent</span><span class="c3">.</span><span class="c2">type </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">MouseEvent</span><span class="c3">.</span><span class="c2">ROLL_OUT</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_lastActiveChild</span><span class="c3">.</span><span class="c2">dispatchEvent</span><span class="c3">(</span><span class="c2">mouseEvent</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">else</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;activeChild </span><span class="c3">!=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c2">&nbsp;</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mouseEvent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">MouseEvent</span><span class="c3">.</span><span class="c2">fromNativeMouseEvent</span><span class="c3">(</span><span class="c15">event</span><span class="c3">,</span><span class="c15">true</span><span class="c3">,</span><span class="c15">true</span><span class="c3">,</span><span class="c2">x</span><span class="c3">,</span><span class="c2">y</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;activeChild</span><span class="c3">.</span><span class="c2">dispatchEvent</span><span class="c3">(</span><span class="c2">mouseEvent</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_lastActiveChild </span><span class="c3">=</span><span class="c2">&nbsp;activeChild</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Stage</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_getMouseObjectUnder </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c2">y</span><span class="c3">,</span><span class="c2">container</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;under </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;children </span><span class="c3">=</span><span class="c2">&nbsp;container</span><span class="c3">.</span><span class="c2">children</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;i </span><span class="c3">=</span><span class="c2">&nbsp;children</span><span class="c3">.</span><span class="c2">length</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;child </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">while</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c3">--</span><span class="c2">i </span><span class="c3">&gt;</span><span class="c2">&nbsp;</span><span class="c3">-</span><span class="c4">1</span><span class="c2">&nbsp;</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child </span><span class="c3">=</span><span class="c2">&nbsp;children</span><span class="c3">[</span><span class="c2">i</span><span class="c3">];</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;child</span><span class="c3">.</span><span class="c2">children </span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;under </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_getMouseObjectUnder</span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c2">y</span><span class="c3">,</span><span class="c2">child</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;under </span><span class="c3">!=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c2">&nbsp;</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;under</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">else</span><span class="c2">&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;child</span><span class="c3">.</span><span class="c2">mouseEnabled </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">true</span><span class="c2">&nbsp;</span><span class="c3">&amp;&amp;</span><span class="c2">&nbsp;child</span><span class="c3">.</span><span class="c2">hitTest</span><span class="c3">(</span><span class="c2">x</span><span class="c3">,</span><span class="c2">y</span><span class="c3">)</span><span class="c2">&nbsp;</span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">true</span><span class="c2">&nbsp;</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;child</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Et le code la classe MouseEvent, qui &eacute;tend notre classe Event de base.</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="387387489519e42a67bcae52507bf238c80cb8fd"></a><a href="#" name="60"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">MouseEvent</span><span class="c3">(){}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">registerClass</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">MouseEvent</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;MouseEvent&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">extend</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c10">&quot;MouseEvent&quot;</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;Event&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">MouseEvent</span><span class="c3">(</span><span class="c2">type</span><span class="c3">,</span><span class="c2">&nbsp;bubbles</span><span class="c3">,</span><span class="c5 c2">&nbsp;cancelable)</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">type </span><span class="c3">=</span><span class="c5 c2">&nbsp;type;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">cancelable </span><span class="c3">=</span><span class="c5 c2">&nbsp;cancelable;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">bubbles </span><span class="c3">=</span><span class="c5 c2">&nbsp;bubbles;</span></p><p class="c0"><span class="c5 c2">}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">MouseEvent</span><span class="c3">.</span><span class="c2">fromNativeMouseEvent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c15">event</span><span class="c3">,</span><span class="c2">bubbles</span><span class="c3">,</span><span class="c2">cancelable</span><span class="c3">,</span><span class="c2">x</span><span class="c3">,</span><span class="c5 c2">y)</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;type </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;&quot;;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;msevent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">switch</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">event</span><span class="c3">.</span><span class="c5 c2">type )</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">case</span><span class="c2">&nbsp;</span><span class="c10">&quot;click&quot;</span><span class="c3">:</span><span class="c2">&nbsp;type </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">MouseEvent</span><span class="c3">.</span><span class="c2">CLICK</span><span class="c3">;</span><span class="c2">&nbsp;</span><span class="c15">break;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">case</span><span class="c2">&nbsp;</span><span class="c10">&quot;mousemove&quot;</span><span class="c3">:</span><span class="c2">&nbsp;type </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">MouseEvent</span><span class="c3">.</span><span class="c2">MOUSE_MOVE</span><span class="c3">;</span><span class="c2">&nbsp;</span><span class="c15">break;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">case</span><span class="c2">&nbsp;</span><span class="c10">&quot;mouseup&quot;</span><span class="c3">:</span><span class="c2">&nbsp;type </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">MouseEvent</span><span class="c3">.</span><span class="c2">MOUSE_UP</span><span class="c3">;</span><span class="c2">&nbsp;</span><span class="c15">break;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">case</span><span class="c2">&nbsp;</span><span class="c10">&quot;mousedown&quot;</span><span class="c3">:</span><span class="c2">&nbsp;type </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c1">MouseEvent</span><span class="c3">.</span><span class="c2">MOUSE_DOWN</span><span class="c3">;</span><span class="c2">&nbsp;</span><span class="c15">break;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msevent </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">MouseEvent</span><span class="c3">(</span><span class="c2">type</span><span class="c3">,</span><span class="c2">bubbles</span><span class="c3">,</span><span class="c2">cancelable</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msevent</span><span class="c3">.</span><span class="c2">stageX </span><span class="c3">=</span><span class="c5 c2">&nbsp;x;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msevent</span><span class="c3">.</span><span class="c2">stageY </span><span class="c3">=</span><span class="c5 c2">&nbsp;y;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c5 c2">&nbsp;msevent;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">MouseEvent</span><span class="c3">.</span><span class="c2">CLICK &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;click&quot;;</span></p><p class="c0"><span class="c1">MouseEvent</span><span class="c3">.</span><span class="c2">ROLL_OVER &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;rollOver&quot;;</span></p><p class="c0"><span class="c1">MouseEvent</span><span class="c3">.</span><span class="c2">ROLL_OUT &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;rollOut&quot;;</span></p><p class="c0"><span class="c1">MouseEvent</span><span class="c3">.</span><span class="c2">MOUSE_MOVE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;mouseMove&quot;;</span></p><p class="c0"><span class="c1">MouseEvent</span><span class="c3">.</span><span class="c2">MOUSE_DOWN &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;mouseUp&quot;;</span></p><p class="c0"><span class="c1">MouseEvent</span><span class="c3">.</span><span class="c2">MOUSE_UP &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c10">&quot;mouseDown&quot;;</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Nous sommes donc capables de dispatcher des &eacute;v&eacute;nements souris, je vous laisse d&eacute;couvrir les d&eacute;tails de l&#39;impl&eacute;mentation pour certains types d&#39;&eacute;venements ( comme le rollover et le rollout ), maintenant nous allons passer aux animations. </span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7 c32"><span class="c33 c24"></span></p><p class="c7 c32"><span class="c33 c24"></span></p><hr style="page-break-before:always;display:none;"><p class="c7 c32"><span class="c33 c24"></span></p><p class="c7 c32"><span class="c33 c24"></span></p><p class="c12 c9 c32 title"><a name="h.llj245jtxuo1"></a><span>Les animations</span></p><p class="c7 c54"><span></span></p><p class="c9"><span class="c6">Comment animer ? Nous avons d&eacute;j&agrave; abord&eacute; bri&egrave;vement le sujet en parlant des spritesheets, nous allons maintenant approfondir &nbsp;le sujet. Le but est d&#39;arriver &agrave; dessiner une succession d&#39;images avec une fluidit&eacute; de 24 images par secondes minimum ( seuil &agrave; partir duquel l&#39;oeil humain ne distingue plus d&#39;effet de saccade ).</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Nous avons d&eacute;j&agrave; une classe Bitmap, qui nous permet de dessiner une texture. </span></p><p class="c9"><span class="c6">Ce qu&#39;il nous faudrait, c&#39;est une classe comme celle-ci mais qui changerait de texture &agrave; chaque frame, d&eacute;clenchant l&#39;effet d&#39;animation desir&eacute;. </span></p><p class="c7"><span class="c6"></span></p><p class="c7 c12 subtitle"><a name="h.92k83ltd5wvj"></a></p><p class="c12 c9 subtitle"><a name="h.ku0hnz10l79l"></a><span>Cr&eacute;er une classe MovieClip permettant de jouer une animation.</span></p><p class="c9"><span class="c6">La classe Stage nous permet d&eacute;j&agrave; d&eacute;couter un &eacute;v&eacute;nement qui est dispatch&eacute; &agrave; chaque frame, il nous suffit de souscrire un &eacute;couteur et de boucler sur toutes les textures que l&#39;on a ajout&eacute; &agrave; notre objet. </span></p><p class="c9"><span class="c6">Voici le code de la classe MovieClip.</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="9ae6fa97273a94d9ef9b0f1b9617d138042bf66d"></a><a href="#" name="61"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">MovieClip</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_frames </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">new</span><span class="c2">&nbsp;</span><span class="c1">Array</span><span class="c3">();</span></p><p class="c0"><span class="c3">}</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">registerClass</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">MovieClip</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;MovieClip&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">extend</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c10">&quot;MovieClip&quot;</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;Bitmap&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">MovieClip</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_frames </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c1">MovieClip</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">currentFrame </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">;</span></p><p class="c0"><span class="c1">MovieClip</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_enterFrameHandler </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">MovieClip</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_enterFrameHandler </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c15">event</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">currentFrame</span><span class="c3">++;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">currentFrame </span><span class="c3">&gt;=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_frames</span><span class="c3">.</span><span class="c2">length </span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">currentFrame </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_frames</span><span class="c3">[</span><span class="c15">this</span><span class="c3">.</span><span class="c2">currentFrame</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">texture </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_frames</span><span class="c3">[</span><span class="c15">this</span><span class="c3">.</span><span class="c2">currentFrame</span><span class="c3">];</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">MovieClip</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">setFrame </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">&nbsp;frameIndex</span><span class="c3">,</span><span class="c2">&nbsp;texture </span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_frames</span><span class="c3">[</span><span class="c2">frameIndex</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;texture</span><span class="c3">;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">MovieClip</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">play </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Stage</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">addEventListener</span><span class="c3">(</span><span class="c1">Event</span><span class="c3">.</span><span class="c2">ENTER_FRAME</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">,</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_enterFrameHandler</span><span class="c3">);</span><span class="c5 c2">&nbsp;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">MovieClip</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">stop </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c1">Stage</span><span class="c3">.</span><span class="c2">getInstance</span><span class="c3">().</span><span class="c2">removeEventListener</span><span class="c3">(</span><span class="c1">Event</span><span class="c3">.</span><span class="c2">ENTER_FRAME</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">,</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_enterFrameHandler</span><span class="c3">);</span><span class="c5 c2">&nbsp;</span></p><p class="c0"><span class="c3">};</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Comme vous pouvez le constater, nous disposons:</span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_plqzfux17aui-0 start"><li class="c38 c9"><span class="c6">D&#39;une m&eacute;thode </span><span class="c6 c23">setFrame</span><span class="c6">&nbsp;qui prend en param&egrave;tre l&#39;index de la frame et la texture correspondant &agrave; la frame en question.</span></li><li class="c38 c9"><span class="c6">D&#39;une m&eacute;thode play, qui nous permet de lan&ccedil;er l&#39;animation.</span></li><li class="c38 c9"><span class="c6">D&#39;une m&eacute;thode stop, qui nous permet de stopper l&#39;animation</span></li><li class="c38 c9"><span class="c6">D&#39;une propri&eacute;t&eacute; </span><span class="c6 c23">currentFrame</span><span class="c6">&nbsp;qui comme son nom l&#39;indique, indique l&#39;index de la frame en cours</span></li><li class="c38 c9"><span class="c6">D&#39;une m&eacute;thode priv&eacute;e </span><span class="c6 c23">_enterFrameHandler</span><span class="c6">&nbsp;qui boucle sur toutes les textures dont on dispose.</span></li></ul><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Voici une id&eacute;e d&#39;exercice simple: maitriser le fps propre &agrave; chaque MovieClip &ccedil;&agrave;d que vous pourrez animer un MovieClip &agrave; 24 fps et un autre &agrave; 60fps par exemple.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7 c32"><span class="c33 c24"></span></p><hr style="page-break-before:always;display:none;"><p class="c7 c32"><span class="c33 c24"></span></p><p class="c12 c9 c32 title"><a name="h.1w1ag2wzxhp0"></a><span>Les filtres</span></p><p class="c7 c32"><span class="c33 c24"></span></p><p class="c12 c9 subtitle"><a name="h.vzmma0in3ii5"></a><span>Base des filtres avec la balise canvas</span></p><p class="c9"><span class="c6">Appliquer un filtre est une op&eacute;ration plut&ocirc;t triviale avec canvas, en effet les &eacute;tapes sont assez simples et peu nombreuses:</span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_mg9e1w3u35k7-0 start"><li class="c38 c9"><span class="c6">On r&eacute;cup&egrave;re les pixels du canvas &agrave; l&#39;aide de la m&eacute;thode </span><span class="c6 c23">context.getImageData.</span></li><li class="c38 c9"><span class="c6">On manipule les pixels en bouclant dessus</span></li><li class="c38 c9"><span class="c6">Enfin on r&eacute;injecte les pixels &agrave; l&#39;aide de la m&eacute;thode context.putImageData</span></li></ul><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Ainsi, le code suivant vous permettra d&#39;appliquer une filtre de nuance de gris sur votre objet canvas</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="713f2ef41773cb8039826da391304311a0cd61e7"></a><a href="#" name="62"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c53 c9"><span class="c15">function</span><span class="c2">&nbsp;grayscale</span><span class="c3">(</span><span class="c2">canvas</span><span class="c3">,</span><span class="c2">context</span><span class="c3">)</span></p><p class="c53 c9"><span class="c3">{</span></p><p class="c53 c9"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;pixels </span><span class="c3">=</span><span class="c2">&nbsp;context</span><span class="c3">.</span><span class="c2">getImageData</span><span class="c3">(</span><span class="c4">0</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c2">canvas</span><span class="c3">.</span><span class="c2">width</span><span class="c3">,</span><span class="c2">canvas</span><span class="c3">.</span><span class="c2">height</span><span class="c3">);</span></p><p class="c53 c9"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;data </span><span class="c3">=</span><span class="c2">&nbsp;pixels</span><span class="c3">.</span><span class="c2">data</span><span class="c3">;</span></p><p class="c53 c9"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c53 c9"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">for</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c15">var</span><span class="c2">&nbsp;i</span><span class="c3">=</span><span class="c4">0</span><span class="c3">;</span><span class="c2">&nbsp;i</span><span class="c3">&lt;</span><span class="c2">data</span><span class="c3">.</span><span class="c2">length</span><span class="c3">;</span><span class="c2">&nbsp;i</span><span class="c3">+=</span><span class="c4">4</span><span class="c3">)</span><span class="c5 c2">&nbsp;</span></p><p class="c53 c9"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c53 c9"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;r </span><span class="c3">=</span><span class="c2">&nbsp;data</span><span class="c3">[</span><span class="c2">i</span><span class="c3">];</span></p><p class="c53 c9"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;g </span><span class="c3">=</span><span class="c2">&nbsp;data</span><span class="c3">[</span><span class="c2">i</span><span class="c3">+</span><span class="c4">1</span><span class="c3">];</span></p><p class="c53 c9"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;b </span><span class="c3">=</span><span class="c2">&nbsp;data</span><span class="c3">[</span><span class="c2">i</span><span class="c3">+</span><span class="c4">2</span><span class="c3">];</span></p><p class="c53 c9"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;v </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0.2126</span><span class="c3">*</span><span class="c2">r </span><span class="c3">+</span><span class="c2">&nbsp;</span><span class="c4">0.7152</span><span class="c3">*</span><span class="c2">g </span><span class="c3">+</span><span class="c2">&nbsp;</span><span class="c4">0.0722</span><span class="c3">*</span><span class="c2">b</span><span class="c3">;</span></p><p class="c9 c53"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data</span><span class="c3">[</span><span class="c2">i</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;data</span><span class="c3">[</span><span class="c2">i</span><span class="c3">+</span><span class="c4">1</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;data</span><span class="c3">[</span><span class="c2">i</span><span class="c3">+</span><span class="c4">2</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;v</span><span class="c3">;</span></p><p class="c53 c9"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c53 c9"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c53 c9"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">putImageData</span><span class="c3">(</span><span class="c2">canvas</span><span class="c3">,</span><span class="c2">context</span><span class="c3">);</span></p><p class="c53 c9"><span class="c5 c2">}</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Essayez le code suivant, tentez vos propres variations, je vous y encourage vivement !</span></p><p class="c9"><span class="c6">Maintenant voyons comment impl&eacute;menter &agrave; un DisplayObject en particulier.</span></p><p class="c9"><span class="c6">Le probl&egrave;me est qu&#39;un filtre s&#39;applique sur ce qui a d&eacute;j&agrave; &eacute;t&eacute; dessin&eacute; et donc, par d&eacute;faut, sur tout les DisplayObject dessin&eacute;s avant celui sur lequel on souhaite appliquer le filtre. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Qu&agrave; cela ne tienne, il existe une technique tr&egrave;s simple pour contourner le probl&egrave;me,</span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_v3euetjabtir-0 start"><li class="c38 c9"><span class="c6">Cr&eacute;er une nouvelle instance de canvas qui servira de tampon ainsi que le context associ&eacute;</span></li><li class="c38 c9"><span class="c6">Dessiner notre DisplayObject dessus, sans aucune transformation</span></li><li class="c38 c9"><span class="c6">Appliquer les filtres</span></li><li class="c38 c9"><span class="c6">Puis dessiner le tampon sur le canvas originel.</span></li></ul><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Et voici l&#39;impl&eacute;mentation de ces &eacute;tapes sur notre classe DisplayObject</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="6e484b5e8cc24c68226fcf37791cfd1ec8223e59"></a><a href="#" name="63"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">filters </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span><span class="c2">&nbsp;</span><span class="c28">// ajout d&#39;une nouvelle propri&eacute;t&eacute;, un tableau de filtres</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c5 c28">// code de la m&eacute;thode qui impl&eacute;mente nos diff&eacute;rentes &eacute;tapes pour l&#39;application des filtres</span></p><p class="c0 c8"><span class="c5 c28"></span></p><p class="c0 c8"><span class="c5 c28"></span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_applyFilters </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c5 c2">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;canvas </span><span class="c3">=</span><span class="c2">&nbsp;document</span><span class="c3">.</span><span class="c2">createElement</span><span class="c3">(</span><span class="c10">&quot;canvas&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;context </span><span class="c3">=</span><span class="c2">&nbsp;canvas</span><span class="c3">.</span><span class="c2">getContext</span><span class="c3">(</span><span class="c10">&quot;2d&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canvas</span><span class="c3">.</span><span class="c2">width </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">width;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canvas</span><span class="c3">.</span><span class="c2">height </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">height;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">draw</span><span class="c3">(</span><span class="c2">context</span><span class="c3">);</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;i </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;max </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">filters</span><span class="c3">.</span><span class="c5 c2">length;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;filter </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">for</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c3">;</span><span class="c2">&nbsp;i </span><span class="c3">&lt;</span><span class="c2">&nbsp;max</span><span class="c3">;</span><span class="c2">&nbsp;i</span><span class="c3">++</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filter </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">filters</span><span class="c3">[</span><span class="c2">i</span><span class="c3">];</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filter</span><span class="c3">.</span><span class="c2">apply</span><span class="c3">(</span><span class="c2">canvas</span><span class="c3">,</span><span class="c2">context</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c5 c2">&nbsp;canvas;</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">DisplayObject</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">render </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c5 c2">&nbsp;context )</span></p><p class="c0"><span class="c3">{</span><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">update</span><span class="c3">();</span><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">visible </span><span class="c3">==</span><span class="c2">&nbsp;</span><span class="c15">false</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;mat </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">matrix;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">save</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">globalAlpha </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c5 c2">alpha;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c36">transform</span><span class="c3">(</span><span class="c2">mat</span><span class="c3">.</span><span class="c2">a</span><span class="c3">,</span><span class="c2">mat</span><span class="c3">.</span><span class="c2">b</span><span class="c3">,</span><span class="c2">mat</span><span class="c3">.</span><span class="c2">c</span><span class="c3">,</span><span class="c2">mat</span><span class="c3">.</span><span class="c2">d</span><span class="c3">,</span><span class="c2">mat</span><span class="c3">.</span><span class="c2">tx</span><span class="c3">,</span><span class="c2">mat</span><span class="c3">.</span><span class="c2">ty</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">if</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">filters </span><span class="c3">!=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c5 c2">&nbsp;)</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">// &nbsp;on appelle une nouvelle m&eacute;thode _applyFilters</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;buffer </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_applyFilters</span><span class="c3">(); </span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">drawImage</span><span class="c3">(</span><span class="c2">canvas</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c4">0</span><span class="c3">,</span><span class="c2">&nbsp;buffer</span><span class="c3">.</span><span class="c2">width</span><span class="c3">,</span><span class="c2">&nbsp;buffer</span><span class="c3">.</span><span class="c2">height </span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">else</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">draw</span><span class="c3">(</span><span class="c2">context</span><span class="c3">);</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">restore</span><span class="c3">();</span></p><p class="c0"><span class="c3">};</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Nous avons vu comment impl&eacute;menter le code sur la classe DisplayObject mais si vous faites bien attention, vous verrez que la m&eacute;thode &quot;_</span><span class="c6 c23">appplyFilters</span><span class="c6">&quot; boucle sur un tableau d&#39;objets. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Chacun de ces objets est suppos&eacute; disposer d&#39;une m&eacute;thode &quot;</span><span class="c6 c23">apply</span><span class="c6">&quot;, nous allons d&egrave;s &agrave; pr&eacute;sent impl&eacute;menter la classe qui nous permettra d&#39;obtenir ces objets, la classe PixelFilter.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c33 c24 c40">Impl&eacute;mentation de la classe PixelFilter:</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">La classe PixelFilter sera notre classe de base pour les filtres, elle devra disposer </span></p><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_jvsv2xnnd1u1-0 start"><li class="c38 c9"><span class="c6">D&#39;une m&eacute;thode </span><span class="c6 c23">apply</span><span class="c6">&nbsp;qui prend 2 param&egrave;tres une r&eacute;f&eacute;rence vers le canvas et une r&eacute;f&eacute;rence vers le context de ce canvas.</span></li></ul><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_jvsv2xnnd1u1-0"><li class="c38 c9"><span class="c6">Une m&eacute;thode </span><span class="c6 c23">process </span><span class="c6">qui sera appel&eacute;e par la m&eacute;thode apply, c&#39;est cette m&eacute;thode que les classes filles surchargeront et dans laquelle le traitement des pixels se fera.</span></li></ul><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_jvsv2xnnd1u1-0"><li class="c38 c9"><span class="c6">Une m&eacute;thode </span><span class="c6 c23">getPixels</span><span class="c6">&nbsp;qui nous permettra de r&eacute;cup&eacute;rer les pixels du canvas</span></li></ul><p class="c7"><span class="c6"></span></p><ul class="c25 lst-kix_jvsv2xnnd1u1-0"><li class="c38 c9"><span class="c6">Une m&eacute;thode </span><span class="c6 c23">setPixels</span><span class="c6">&nbsp;qui nous permettra d&#39;&eacute;diter les pixels du canvas.</span></li></ul><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Classe PixelFilter:</span></p><p class="c7"><span class="c6"></span></p><a href="#" name="2422b490747ba348100e72572770eb3564a13f03"></a><a href="#" name="64"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">PixelFilter</span><span class="c3">(){}</span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">registerClass</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">PixelFilter</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;PixelFilter&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">PixelFilter</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_canvas </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0"><span class="c1">PixelFilter</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">_context </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">null</span><span class="c3">;</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">PixelFilter</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">getPixels </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">return</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_context</span><span class="c3">.</span><span class="c2">getImageData</span><span class="c3">(</span><span class="c4">0</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_canvas</span><span class="c3">.</span><span class="c2">width</span><span class="c3">,</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_canvas</span><span class="c3">.</span><span class="c2">height</span><span class="c3">);</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">PixelFilter</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">setPixels </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">pixels</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="c3">.</span><span class="c2">putImageData</span><span class="c3">(</span><span class="c2">pixels</span><span class="c3">,</span><span class="c4">0</span><span class="c3">,</span><span class="c4">0</span><span class="c3">);</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">PixelFilter</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">process </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c28">//code de notre filtre ici</span></p><p class="c0"><span class="c3">};</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">PixelFilter</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">apply </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">(</span><span class="c2">canvas</span><span class="c3">,</span><span class="c2">context</span><span class="c3">)</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_canvas </span><span class="c3">=</span><span class="c2">&nbsp;canvas</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">_context </span><span class="c3">=</span><span class="c2">&nbsp;context</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">process</span><span class="c3">();</span></p><p class="c0"><span class="c3">};</span></p></td></tr></tbody></table><p class="c9"><span class="c6">Et en cadeau, voici une classe nomm&eacute;e GrayScaleFilter, qui h&eacute;rite de notre classe PixelFilter</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c36">classe GrayScaleFilter:</span></p><a href="#" name="3d643ec59675275455524c666f106c145485c60b"></a><a href="#" name="65"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c17"><td class="c30"><p class="c0 c8"><span class="c5 c1"></span></p><p class="c0"><span class="c15">function</span><span class="c2">&nbsp;</span><span class="c1">GrayScaleFilter</span><span class="c3">(){}</span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">registerClass</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">GrayScaleFilter</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;GrayScaleFilter&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0"><span class="c1">Tomahawk</span><span class="c3">.</span><span class="c2">extend</span><span class="c3">(</span><span class="c2">&nbsp;</span><span class="c1">GrayScaleFilter</span><span class="c3">,</span><span class="c2">&nbsp;</span><span class="c10">&quot;PixelFilter&quot;</span><span class="c2">&nbsp;</span><span class="c3">);</span></p><p class="c0 c8"><span class="c5 c2"></span></p><p class="c0"><span class="c1">GrayScaleFilter</span><span class="c3">.</span><span class="c2">prototype</span><span class="c3">.</span><span class="c2">process </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">function</span><span class="c3">()</span></p><p class="c0"><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;pixels </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">getPixels</span><span class="c3">();</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;data </span><span class="c3">=</span><span class="c2">&nbsp;pixels</span><span class="c3">.</span><span class="c2">data</span><span class="c3">;</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">for</span><span class="c2">&nbsp;</span><span class="c3">(</span><span class="c15">var</span><span class="c2">&nbsp;i</span><span class="c3">=</span><span class="c4">0</span><span class="c3">;</span><span class="c2">&nbsp;i</span><span class="c3">&lt;</span><span class="c2">data</span><span class="c3">.</span><span class="c2">length</span><span class="c3">;</span><span class="c2">&nbsp;i</span><span class="c3">+=</span><span class="c4">4</span><span class="c3">)</span><span class="c5 c2">&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">{</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;r </span><span class="c3">=</span><span class="c2">&nbsp;data</span><span class="c3">[</span><span class="c2">i</span><span class="c3">];</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;g </span><span class="c3">=</span><span class="c2">&nbsp;data</span><span class="c3">[</span><span class="c2">i</span><span class="c3">+</span><span class="c4">1</span><span class="c3">];</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;b </span><span class="c3">=</span><span class="c2">&nbsp;data</span><span class="c3">[</span><span class="c2">i</span><span class="c3">+</span><span class="c4">2</span><span class="c3">];</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">var</span><span class="c2">&nbsp;v </span><span class="c3">=</span><span class="c2">&nbsp;</span><span class="c4">0.2126</span><span class="c3">*</span><span class="c2">r </span><span class="c3">+</span><span class="c2">&nbsp;</span><span class="c4">0.7152</span><span class="c3">*</span><span class="c2">g </span><span class="c3">+</span><span class="c2">&nbsp;</span><span class="c4">0.0722</span><span class="c3">*</span><span class="c2">b</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data</span><span class="c3">[</span><span class="c2">i</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;data</span><span class="c3">[</span><span class="c2">i</span><span class="c3">+</span><span class="c4">1</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;data</span><span class="c3">[</span><span class="c2">i</span><span class="c3">+</span><span class="c4">2</span><span class="c3">]</span><span class="c2">&nbsp;</span><span class="c3">=</span><span class="c2">&nbsp;v</span><span class="c3">;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">}</span></p><p class="c0"><span class="c5 c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15">this</span><span class="c3">.</span><span class="c2">setPixels</span><span class="c3">(</span><span class="c2">pixels</span><span class="c3">);</span></p><p class="c0"><span class="c3">};</span></p></td></tr></tbody></table><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9 c32"><span class="c49">Conclusion</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Voil&agrave;, nous avons pass&eacute;e en revue l&#39;ensemble des </span><span class="c6">notions </span><sup><a href="#cmnt18" name="cmnt_ref18">[r]</a></sup><sup><a href="#cmnt19" name="cmnt_ref19">[s]</a></sup><sup><a href="#cmnt20" name="cmnt_ref20">[t]</a></sup><sup><a href="#cmnt21" name="cmnt_ref21">[u]</a></sup><sup><a href="#cmnt22" name="cmnt_ref22">[v]</a></sup><span class="c6">qui vous seront n&eacute;c&eacute;ssaires pour construire un moteur d&#39;affichage &quot;</span><span class="c6 c23">Flash Like</span><span class="c6">&quot; avec l&#39;API html5 de la balise Canvas, je vous encourage &agrave; tester vos propres impl&eacute;mentations, &agrave; vous cr&eacute;er vous-m&ecirc;mes vos propres exercices.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Les connaissances que vous avez acquises dans ce cours sont transversales, c&#39;est &agrave; dire que vous pourrez les r&eacute;utiliser dans d&#39;autres langages.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">C&#39;&eacute;tait un r&eacute;el plaisir de passer ce temps en votre compagnie et j&#39;esp&egrave;re sinc&egrave;rement que vous avez appr&eacute;ci&eacute; cette premi&egrave;re exp&eacute;rience dans le monde de la programmation des moteurs graphiques. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">C&rsquo;est &agrave; Paris que je vous retrouverai lors de mes sessions de formation chez Mediabox, dont les programmes sont consultables sur la page suivante.</span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><h1 class="c12 c9 c42"><a name="h.x89ru67dxahi"></a><span>Nos formations HTML, HTML5, CSS &amp; Canvas</span></h1><h3 class="c12 c9 c41"><a name="h.l8w4ptv3szq3"></a><span class="c50 c57 c51"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Fwww.mediabox.fr%2Fprogramme-html-css-bases-maitrise.html&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNH-IRe1up0rawWbp7vWWTtABiPJRw">Formation HTML &amp; CSS, des bases &agrave; la ma&icirc;trise</a></span><span class="c50"><br></span><span class="c43 c22">D&eacute;couvrez le programme d&#39;initiation HTML et CSS et cr&eacute;ez des sites internet aux normes du web.</span></h3><h3 class="c41 c12 c9"><a name="h.om3gqq7tdckz"></a><span class="c50 c57 c51"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Fwww.mediabox.fr%2Fprogramme-html5-css3-initiation.html&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFQKkuSR2AcYTPBRMF9Ih21in6B3w">Formation HTML5 &amp; CSS3</a></span><span class="c50"><br></span><span class="c43 c22">D&eacute;couvrez toutes les nouveaut&eacute;s du HTML5 (nouvelles balises, microdonn&eacute;es, meilleur r&eacute;f&eacute;rencement, vid&eacute;o et audio sans Flash, ...) et celles du CSS3 (s&eacute;lecteurs, graphisme avanc&eacute;, gestion des m&eacute;dias, transformations, animations, media queries, responsive design, ...)</span></h3><h3 class="c41 c12 c9"><a name="h.gz0i27nk74n5"></a><span class="c50 c51 c57"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Fwww.mediabox.fr%2Fprogramme-hml5-canvas.html&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNESvMawUHsMN0Y8DKAvlUNxR0dgPQ">Formation HTML5 &amp; Canvas</a></span><span class="c50"><br></span><span class="c22 c43">Apprenez &agrave; construire votre propre moteur d&#39;affichage &agrave; l&#39;aide des toutes nouvelles fonctionnalit&eacute;s du HTML5 et de la balise Canvas.</span></h3><h3 class="c41 c12 c9"><a name="h.ya4jvdqw60ww"></a><span class="c50 c57 c51"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Fwww.mediabox.fr%2Fprogramme-responsive-web-design.html&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNE0ps9WXpSz17WO1r5ZIwDrxnn30Q">Formation Responsive Web Design</a></span><span class="c50"><br></span><span class="c43 c22">Maitriser le Responsive Web Design et pr&eacute;parez vos sites pour qu&#39;ils soient v&eacute;ritablement multiplateformes : iphone, ipad, tablettes, tv, pc, mac</span></h3><h3 class="c41 c12 c9"><a name="h.elleevuyl0v"></a><span class="c50 c57 c51"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Fwww.mediabox.fr%2Fprogramme-javascript-html5-ria.html&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHWf2YAKL03RtQcTL4ImjZahWHGYg">Formation Javascript &amp; HTML5 D&eacute;veloppeur RIA - Niveau 1</a></span><span class="c50"><br></span><span class="c43 c22">Formation HTML5 : Maitrisez le HTML5 et d&eacute;veloppez des applications riches en html5, javascript, css3. Cr&eacute;ez des webApp pour terminaux mobiles iPhone, Android etc.</span></h3><h3 class="c41 c12 c9"><a name="h.dw8ss3kochyn"></a><span class="c50 c57 c51"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Fwww.mediabox.fr%2Fprogramme-javascript-html5-niveau-perfectionnement.html&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHRjSeg2myjIjak3gWjIgNKcecKjA">Formation Javascript &amp; HTML5 D&eacute;veloppeur RIA - Niveau 2</a></span><span class="c50"><br></span><span class="c43 c22">Formation HTML5 : Devenez expert HTML5 et d&eacute;veloppez des applications riches en html5, javascript, css3 avec la formation perfectionnement HTML5. Cr&eacute;ez des webApp pour terminaux mobiles iPhone, Android, etc.</span></h3><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9 c32"><span class="c49">Remerciements</span></p><p class="c7 c32"><span class="c49"></span></p><p class="c9"><span class="c6">Je tiens &agrave; remercier les personnes suivantes pour leur travail de relecture, correction, suggestions et leur soutien: </span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">- </span><span class="c6 c24">C&eacute;line Moulard</span><span class="c6">, d&eacute;veloppeuse PHP/MySQL Javascript chez The Tiny Spark ( </span><span class="c6 c46"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Fthe-tiny-spark.com&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFR_pU402JtfuPh3iM7iphvCt_hCw">http://the-tiny-spark.com</a></span><span class="c6">&nbsp;) pour son soutien, la relecture et la correction des fautes. </span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">- </span><span class="c6 c24">Pierre Girard</span><span class="c6">, g&eacute;rant &nbsp;de la soci&eacute;t&eacute; Mediabox, centre de formation parisien ( </span><span class="c6 c46"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Fmediabox.fr&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGYB9Xyem3e0F5BbCl2JM1kus_qow">http://mediabox.fr</a></span><span class="c6">&nbsp;) </span><span class="c6">pour m&rsquo;avoir fait confiance concernant l&rsquo;inter&ecirc;t de cette formation et de la r&eacute;daction d&rsquo;un support de cours associ&eacute; sous ce format.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">- </span><span class="c6 c24">Ga&euml;tan Boishue</span><span class="c6">, Directeur technique de la soci&eacute;t&eacute; Mediabox, centre de formation parisien &nbsp;( </span><span class="c6 c46"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Fmediabox.fr&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGYB9Xyem3e0F5BbCl2JM1kus_qow">http://mediabox.fr</a></span><span class="c6">&nbsp;) </span><span class="c6">pour</span><span class="c6">&nbsp;son soutien et travail de relecture.</span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">- </span><span class="c6 c24">Didier Mouronval</span><span class="c6">, </span><span class="c6 c64">Responsable de publication des rubriques D&eacute;veloppement Web pour ( </span><span class="c6 c46 c64"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Fdeveloppez.com&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHU_4wTJQS9mepMmxf3QUNcVPcyOA">http://developpez.com</a></span><span class="c6 c64">&nbsp;) pour sa relecture et son travail d&rsquo;adaptation au format developpez.com</span></p><p class="c7"><span class="c6 c64"></span></p><p class="c9"><span class="c6 c64">-</span><span class="c6 c64 c24 c70">Xavier Lecomte</span><span class="c6 c64 c70">, responsable des rubriques JavaScript et AJAX pour sa relecture et sa participation concernant la publication de cet ouvrage sur la plateforme </span><span class="c6 c64">&nbsp;( </span><span class="c6 c46 c64"><a class="c21" href="http://www.google.com/url?q=http%3A%2F%2Fdeveloppez.com&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHU_4wTJQS9mepMmxf3QUNcVPcyOA">http://developpez.com</a></span><span class="c6 c64">&nbsp;) </span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c7"><span class="c6"></span></p><p class="c9"><span class="c6">Je tiens &eacute;galement &agrave; remercier les autres personnes que je connais pas personnellement mais qui m&rsquo;ont aid&eacute; en ajoutant des commentaires au document ainsi que les commuanut&eacute;s des sites mediabox.fr,developpez.com, alsacreations.com et openclassrooms.com.</span></p><p class="c7 c61"><span class="c6"></span></p><p class="c7 c61"><span class="c6"></span></p><p class="c7 c61"><span class="c6"></span></p><p class="c7 c61"><span class="c6"></span></p><p class="c61 c9"><span class="c6">Nicolas Legrand</span></p><p class="c7 c54"><span></span></p><p class="c54 c9"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 304.00px; height: 399.00px;"><img alt="" src="images/image01.png" style="width: 304.00px; height: 399.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7 c54"><span></span></p><div><p class="c7 c54 c37"><span></span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref1" name="cmnt1">[a]</a><span class="c5 c31 c22">Bonjour,</span></p><p class="c20 c9"><span class="c5 c31 c22">&nbsp;Il manque l&#39;accolade ouvrante du css canvas.</span></p><p class="c20 c9"><span class="c5 c31 c22">Super doc sinon ;)</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref2" name="cmnt2">[b]</a><span class="c5 c31 c22">Merci de ton commentaire, c&#39;est corrig&eacute; !</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref3" name="cmnt3">[c]</a><span class="c5 c31 c22">Ici il faudrait s&eacute;parer les blocs de code &quot;Matrix2d&quot; et la mise &agrave; jour de &quot;DisplayObject&quot;</span></p><p class="c20 c9"><span class="c5 c31 c22">Et surtout il manque une ligne</span></p><p class="c20 c9"><span class="c5 c31 c22">&quot;return mat;&quot;</span></p><p class="c20 c9"><span class="c5 c31 c22">&nbsp;&agrave; la fin de la m&eacute;thode DisplayObject.prototype.update</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref4" name="cmnt4">[d]</a><span class="c5 c31 c22">Corrig&eacute; ! Merci encore !</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref5" name="cmnt5">[e]</a><span class="c5 c31 c22">De rien.</span></p><p class="c20 c7"><span class="c5 c31 c22"></span></p><p class="c20 c9"><span class="c5 c31 c22">Du coup il y a encore des erreur dans le chapitre &quot;collisions&quot;</span></p><p class="c20 c7"><span class="c5 c31 c22"></span></p><p class="c20 c9"><span class="c5 c31 c22">Donc le mieux :</span></p><p class="c20 c9"><span class="c5 c31 c22">avant return mat, ajouter &eacute;galement:</span></p><p class="c20 c9"><span class="c5 c31 c22">current.matrix = mat;</span></p><p class="c20 c7"><span class="c5 c22 c31"></span></p><p class="c20 c9"><span class="c5 c31 c22">Sinon, de mani&egrave;re g&eacute;n&eacute;ral, serait-il possible d&#39;avoir des exemples fonctionnels de l&#39;utilisation de la classe MovieClip ?</span></p><p class="c20 c7"><span class="c5 c31 c22"></span></p><p class="c20 c9"><span class="c5 c31 c22">Egalement, Existe-t-il un gestionnaire de spriteSheet au sein de tomahawk ?</span></p><p class="c20 c9"><span class="c5 c31 c22">De mani&egrave;re &agrave; exploiter des json hash pour lire une boucle d&#39;animation ?</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref6" name="cmnt6">[f]</a><span class="c5 c31 c22">IL n &#39;y a plus besoin de faire un return mat; en fait on modifie directement la propri&eacute;t&eacute; this.matrix dans la methode update.</span></p><p class="c20 c7"><span class="c5 c31 c22"></span></p><p class="c20 c9"><span class="c5 c31 c22">Pour un exemple d&#39;utilisation de la classe MovieClip c&#39;est quelque chose qui est en cours de mise en place ( en fait je pr&eacute;vois de mettre en ligne des exemples h&eacute;berg&eacute;s sur un serveur pour chaque &eacute;tape &quot;clef&quot; de l&#39;open book ). </span></p><p class="c20 c7"><span class="c5 c31 c22"></span></p><p class="c20 c9"><span class="c5 c31 c22">Quand tu parles de gestionnaire de spritesheet au sein de tomahawk tu parles de la version de production, ou la version p&eacute;dagogique de l&#39;open book ? Les deux versions sont quand m&ecirc;me diff&eacute;rentes.</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref7" name="cmnt7">[g]</a><span class="c5 c31 c22">Tu peux regarder la &quot;nouvelle&quot; version de la m&eacute;thode update, tu constateras qu&#39;elle r&eacute;utilise la propri&eacute;t&eacute; this.matrix</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref8" name="cmnt8">[h]</a><span class="c5 c31 c22">vu :-)</span></p><p class="c20 c9"><span class="c5 c31 c22">Je parle un peu des deux en fait.</span></p><p class="c20 c9"><span class="c5 c31 c22">Je me demandais (si ce n&#39;est pas d&eacute;j&agrave; fait ) comment implanter proprement un sequenceur qui s&#39;appuirait sur des json hash pour lire une animation en boucle &agrave; partir d&#39;un spriteSheet.</span></p><p class="c20 c9"><span class="c5 c31 c22">Le tout en restant dans une logique orient&eacute; objet.</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref9" name="cmnt9">[i]</a><span class="c5 c31 c22">Alors pour &ccedil;a ce sera dans la prochaine version de tomahawk ( qui est &agrave; 99% termin&eacute;e sur mon local mais qui demandera un petit temps de publication du fait que j&#39;ai beauuucoup de boulot &agrave; c&ocirc;t&eacute; et 0 sponsors, du coup je le fais en mode b&eacute;n&eacute;vole pour l&#39;instant :) ). </span></p><p class="c20 c7"><span class="c5 c31 c22"></span></p><p class="c9 c20"><span class="c5 c31 c22">J&#39;ai d&eacute;velopp&eacute; une classe &quot;Animation&quot;, qui en fait correspond plus &agrave; une vraie classe MovieClip telle qu&#39;on la retrouve dans flash.</span></p><p class="c20 c7"><span class="c5 c31 c22"></span></p><p class="c20 c9"><span class="c5 c31 c22">Les outils d&#39;&eacute;ditions qui vont avec seront publi&eacute;s en &nbsp;ligne ( et accessibles gratuitement ) dans l&#39;ann&eacute;e, la prochaine &eacute;tape importante &eacute;tant l&#39;impl&eacute;mentation de webgl au sein de tomahawk qui elle est pr&eacute;vue pour cet &eacute;t&eacute; ( il y aura &eacute;galement un livre blanc associ&eacute; avec une version p&eacute;dagogique comme maintenant )</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref10" name="cmnt10">[j]</a><span class="c5 c31 c22">Ok, Je suis en train de modifier l&#39;assetLoader pour pouvoir charger des json et de cr&eacute;er une classe &quot;TextureSequencer&quot; (pour g&eacute;n&eacute;rer des tableaux de textures afin de &quot;nourrir&quot; la classe MovieClip )</span></p><p class="c20 c9"><span class="c5 c31 c22">Si tu es int&eacute;ress&eacute;, je pourrais t&#39;envoyer cela... ou ?</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref11" name="cmnt11">[k]</a><span class="c5 c31 c22">Le mieux serait qu&#39;on en discute sur skype si tu l&#39;as: legrand.nicolas28 pour ma part.</span></p><p class="c20 c7"><span class="c5 c31 c22"></span></p><p class="c20 c9"><span class="c5 c31 c22">Sinon si tu regardes bien, pour cr&eacute;er des textures dynamiquement ( et avec la meme image en tant que source ) il y a d&eacute;j&agrave; la classe TextureAtlas, je te conseille plut&ocirc;t de modifier cette classe-ci, pour la bonne et simple raison qu&#39;elle ne contiendra pas de code qui concerne le &quot;chargement&quot; d&#39;une image.</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref12" name="cmnt12">[l]</a><span class="c5 c31 c22">Sinon tu peux me contacter sur mon mail: n.legrand28@gmail.com</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref13" name="cmnt13">[m]</a><span class="c5 c31 c22">Le callback &quot;onAdded&quot; doit &ecirc;tre le 3&egrave;me param&egrave;tre, pas le 2&egrave;me.</span></p><p class="c20 c9"><span class="c5 c31 c22">Les param&egrave;tres sont:</span></p><p class="c20 c9"><span class="c5 c31 c22">&nbsp;type, scope, callback, useCapture</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref14" name="cmnt14">[n]</a><span class="c5 c31 c22">Pour que l&#39;exemple marche, il faut donc remplacer</span></p><p class="c20 c9"><span class="c5 c31 c22">disp.addEventListener(Event.ADDED, onAdded);</span></p><p class="c20 c7"><span class="c5 c31 c22"></span></p><p class="c20 c9"><span class="c5 c31 c22">par</span></p><p class="c20 c7"><span class="c5 c31 c22"></span></p><p class="c20 c9"><span class="c5 c31 c22">disp.addEventListener(Event.ADDED,null, onAdded);</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref15" name="cmnt15">[o]</a><span class="c5 c31 c22">Corrig&eacute; ! Merci</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref16" name="cmnt16">[p]</a><span class="c5 c31 c22">Ici tomahawk_ns.Point n&#39;est pas impl&eacute;ment&eacute;, il faudrait ajouter une classe Point.js et enlever le domaine tomahawk_ns</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref17" name="cmnt17">[q]</a><span class="c5 c31 c22">C&#39;est ok, merci d&#39;avoir point&eacute; cette incoh&eacute;rence ( j&#39;ai modifi&eacute; ce chapitre r&eacute;cemment )</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref18" name="cmnt18">[r]</a><span class="c5 c31 c22">options</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref19" name="cmnt19">[s]</a><span class="c5 c31 c22">pourquoi options plut&ocirc;t que notions ?</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref20" name="cmnt20">[t]</a><span class="c5 c31 c22">_Discussion marqu&eacute;e comme ferm&eacute;e_</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref21" name="cmnt21">[u]</a><span class="c5 c31 c22">_Rouverte_</span></p><p class="c20 c9"><span class="c5 c31 c22">D&eacute;sol&eacute;, yeux embrum&eacute;s &agrave; la fin du document...</span></p></div><div class="c27"><p class="c20 c9"><a href="#cmnt_ref22" name="cmnt22">[v]</a><span class="c5 c31 c22">pas de soucis</span></p></div></body></html>